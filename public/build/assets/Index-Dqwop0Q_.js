import{j as e,r as x,W as w,Y as _,b as D}from"./app-7XFigbmq.js";import{D as C}from"./DataTable-CYfQn6yM.js";import{B as c}from"./button-CCcPhxbK.js";import{C as S,a as P,b as I,c as E}from"./card-BKWKaNas.js";import{A as F}from"./authenticated-layout-B6kGi5TT.js";import{B as K}from"./badge-tq6SxLA1.js";import{R as v}from"./RatingStars-qTNWmiJA.js";import{D as h,a as p,b as g,c as f,d as j,e as T}from"./dialog-CnpdXIFW.js";import{L as o}from"./label-ztH3PvpF.js";import{I as b}from"./input-CnohFrKr.js";import{F as N}from"./file-text-DkuEkhrt.js";import"./table-uXPPKHso.js";import"./separator-DyyDiEGZ.js";import"./index-DEaZXpuG.js";import"./sun-NolOlq6D.js";import"./users-2aCKo87b.js";import"./log-out-Bg06zR0y.js";const U=()=>[{header:"#",cell:({row:t})=>t.index+1},{id:"profile_image",header:"Photo",cell:({row:t})=>{const a=t.original.profile_image;if(a){const n=a.startsWith("http")?a:`/storage/${a}`;return e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:n,alt:"Profile",className:"w-10 h-10 rounded-full object-cover",onError:i=>{var l;i.currentTarget.style.display="none",(l=i.currentTarget.nextElementSibling)==null||l.classList.remove("hidden")}}),e.jsx("span",{className:"text-gray-400 italic text-xs hidden absolute inset-0 flex items-center justify-center",children:"No image"})]})}return e.jsx("span",{className:"text-gray-400 italic",children:"No image"})}},{accessorKey:"code",header:"Code"},{accessorKey:"name",header:"Name"},{accessorKey:"email",header:"Email"},{accessorKey:"surname",header:"Surname"},{accessorKey:"dob",header:"DOB"},{accessorKey:"id_passport",header:"ID/Passport"},{id:"identification_document",header:"Documents",cell:({row:t})=>{const a=t.original.identification_document;if(a){const n=a.startsWith("http")?a:`/storage/${a}`;return e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(N,{className:"w-4 h-4 text-blue-500"}),e.jsx("a",{href:n,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 text-xs underline",children:"View Doc"})]})}return e.jsx("span",{className:"text-gray-400 italic text-xs",children:"No doc"})}},{accessorKey:"phone",header:"Phone"},{id:"rating",header:"Rating",cell:({row:t})=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(v,{rating:typeof t.original.average_rating=="number"?Math.round(t.original.average_rating):0,readonly:!0,size:"sm"}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:["(",t.original.total_ratings,")"]})]})},{accessorKey:"status",header:"Status",cell:({row:t})=>e.jsx(K,{variant:t.original.status?"default":"destructive",children:t.original.status?"Active":"Inactive"})}];function X({students:t}){var m,u;const[a,n]=x.useState(null),[i,l]=x.useState(null),s=w({password:"",password_confirmation:""}),y=()=>{n(null)};return e.jsxs(F,{header:"Students",children:[e.jsx(_,{title:"Students"}),e.jsxs("div",{className:"container mx-auto py-10",children:[e.jsxs(S,{children:[e.jsxs(P,{className:"flex flex-row items-center justify-between",children:[e.jsx(I,{children:"Students"}),e.jsx(D,{href:route("club.students.create"),children:e.jsx(c,{children:"Add Student"})})]}),e.jsx(E,{children:e.jsx(C,{columns:U(),data:t})})]}),e.jsx(h,{open:!!a,onOpenChange:y,children:e.jsxs(p,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(g,{children:[e.jsx(f,{children:"Student Details"}),e.jsx(j,{children:"View detailed information about the student."})]}),a&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex justify-center",children:e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[a.profile_image?e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:a.profile_image.startsWith("http")?a.profile_image:`/storage/${a.profile_image}`,alt:"Profile",className:"w-32 h-32 rounded-full object-cover border-2 border-gray-200 shadow-lg",onError:r=>{var d;r.currentTarget.style.display="none",(d=r.currentTarget.nextElementSibling)==null||d.classList.remove("hidden")}}),e.jsx("div",{className:"w-32 h-32 hidden flex items-center justify-center rounded-full bg-gray-100 text-gray-400 text-sm italic border-2 border-gray-200",children:"No Image"})]}):e.jsx("div",{className:"w-32 h-32 flex items-center justify-center rounded-full bg-gray-100 text-gray-400 text-sm italic border-2 border-gray-200",children:"No Image"}),e.jsxs("div",{className:"text-center",children:[e.jsxs("h3",{className:"font-semibold text-lg",children:[a.name," ",a.surname]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:a.code})]})]})}),e.jsx("div",{className:"grid grid-cols-2 gap-4",children:[{label:"UID",value:a.uid},{label:"Email",value:a.email},{label:"Phone",value:a.phone},{label:"Grade",value:a.grade},{label:"Gender",value:a.gender},{label:"Nationality",value:a.nationality},{label:"Date of Birth",value:a.dob?new Date(a.dob).toLocaleDateString():"Not specified"},{label:"Date of Death",value:a.dod?new Date(a.dod).toLocaleDateString():"Not specified"},{label:"ID/Passport",value:a.id_passport},{label:"Identification Document",value:a.identification_document?e.jsx("a",{href:a.identification_document.startsWith("http")?a.identification_document:`/storage/${a.identification_document}`,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 underline",children:"View Document"}):"No document uploaded"},{label:"City",value:a.city||"Not specified"},{label:"Street",value:a.street||"Not specified"},{label:"Postal Code",value:a.postal_code||"Not specified"},{label:"Country",value:a.country||"Not specified"},{label:"Organization",value:((m=a.organization)==null?void 0:m.name)||"Not specified"},{label:"Club",value:((u=a.club)==null?void 0:u.name)||"Not specified"},{label:"Status",value:a.status?"Active":"Inactive"},{label:"Rating",value:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(v,{rating:typeof a.average_rating=="number"?Math.round(a.average_rating):0,readonly:!0,size:"sm"}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[typeof a.average_rating=="number"?a.average_rating.toFixed(1):"0.0"," ","(",a.total_ratings," ","ratings)"]})]})}].map((r,d)=>e.jsxs("div",{className:"space-y-1",children:[e.jsx(o,{className:"text-sm font-medium text-muted-foreground",children:r.label}),e.jsx("div",{className:"text-sm",children:r.value})]},d))}),e.jsxs("div",{className:"border-t pt-6",children:[e.jsx("h4",{className:"font-semibold mb-4",children:"Attachments"}),e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{className:"text-sm font-medium text-muted-foreground",children:"Profile Image"}),e.jsx("div",{className:"bg-gray-50 rounded-lg p-4 border-2 border-dashed border-gray-200 min-h-[200px] flex items-center justify-center",children:a.profile_image?e.jsx("img",{src:a.profile_image.startsWith("http")?a.profile_image:`/storage/${a.profile_image}`,alt:"Profile",className:"max-w-full max-h-48 object-contain rounded"}):e.jsx("span",{className:"text-gray-400 italic",children:"No profile image"})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{className:"text-sm font-medium text-muted-foreground",children:"Identification Document"}),e.jsx("div",{className:"bg-gray-50 rounded-lg p-4 border-2 border-dashed border-gray-200 min-h-[200px] flex items-center justify-center",children:a.identification_document?e.jsxs("div",{className:"text-center",children:[e.jsx(N,{className:"w-12 h-12 text-blue-500 mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-gray-600",children:"PDF Document Available"}),e.jsx("a",{href:a.identification_document.startsWith("http")?a.identification_document:`/storage/${a.identification_document}`,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 text-sm underline mt-1 inline-block",children:"View Document"})]}):e.jsx("span",{className:"text-gray-400 italic",children:"No identification document"})})]})]})]})]})]})}),i&&e.jsx(h,{open:!!i,onOpenChange:r=>{r||(l(null),s.reset())},children:e.jsxs(p,{children:[e.jsxs(g,{children:[e.jsx(f,{children:"Change Password"}),e.jsxs(j,{children:["Update password for"," ",i.name," ",i.surname]})]}),e.jsxs("form",{onSubmit:r=>{r.preventDefault(),s.patch(route("club.students.updatePassword",i.id),{onSuccess:()=>{l(null),s.reset()}})},className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs(o,{htmlFor:"password",children:["New Password"," ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(b,{id:"password",type:"password",placeholder:"Enter new password",value:s.data.password,onChange:r=>s.setData("password",r.target.value),required:!0}),s.errors.password&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:s.errors.password})]}),e.jsxs("div",{children:[e.jsxs(o,{htmlFor:"password_confirmation",children:["Confirm Password"," ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(b,{id:"password_confirmation",type:"password",placeholder:"Confirm new password",value:s.data.password_confirmation,onChange:r=>s.setData("password_confirmation",r.target.value),required:!0}),s.errors.password_confirmation&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:s.errors.password_confirmation})]}),e.jsxs(T,{children:[e.jsx(c,{type:"button",variant:"outline",onClick:()=>{l(null),s.reset()},children:"Cancel"}),e.jsx(c,{type:"submit",disabled:s.processing,children:s.processing?"Updating...":"Update Password"})]})]})]})})]})]})}export{U as columns,X as default};
