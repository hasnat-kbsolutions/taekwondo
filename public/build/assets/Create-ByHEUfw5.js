import{r as o,W as y,j as e,Y as F}from"./app-CikEoOUb.js";import{A as w}from"./authenticated-layout-tnqnI4FE.js";import{I as h}from"./input-BghCconx.js";import{T as A}from"./textarea-BES-R4bf.js";import{B as p}from"./button-DE34mfwC.js";import{L as d}from"./label-DFDTJu9O.js";import{C as E,a as D,b as P,c as T}from"./card-B9gfxKxc.js";import{S as j,a as f,b as g,c as C,e as S}from"./select-D_R4pDbd.js";import"./index-CQAMZMT0.js";import"./index-BPaBik1e.js";import"./index-CEUW6_er.js";import"./chevron-down-rq2aknLd.js";function Y({clubs:b,students:n}){const[i,_]=o.useState(""),[a,u]=o.useState(""),{data:c,setData:s,post:v,processing:m,errors:x}=y({club_id:"",student_id:"",file:null,issued_at:"",notes:""}),N=t=>{t.preventDefault(),console.log("Submitting form data:",c),v(route("organization.certifications.store"),{preserveScroll:!0,onSuccess:()=>{}})},r=t=>x[t]&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:x[t]}),I=n.filter(t=>!i||t.club.id.toString()===i);return o.useEffect(()=>{if(i&&s("club_id",parseInt(i)),a){const t=n.find(l=>l.id.toString()===a);t&&(s("club_id",t.club.id),s("student_id",t.id))}},[i,a,n,s]),e.jsxs(w,{header:"Create Certification",children:[e.jsx(F,{title:"Create Certification"}),e.jsx("div",{className:"container mx-auto py-10",children:e.jsxs(E,{children:[e.jsxs(D,{children:[e.jsx(P,{children:"Create New Certification"}),e.jsx("p",{className:"text-muted-foreground text-sm",children:"Assign a certification to a student. Fields marked with * are required."})]}),e.jsx(T,{children:e.jsxs("form",{onSubmit:N,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs(d,{htmlFor:"club_id",children:["Club"," ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs(j,{value:i,onValueChange:t=>{console.log("Selected club:",t),_(t),u(""),s("club_id",parseInt(t)),s("student_id","")},children:[e.jsx(f,{children:e.jsx(g,{placeholder:"Select a club"})}),e.jsx(C,{children:b.map(t=>e.jsx(S,{value:t.id.toString(),children:t.name},t.id))})]}),r("club_id")]}),e.jsxs("div",{children:[e.jsxs(d,{htmlFor:"student_id",children:["Student"," ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs(j,{value:a,onValueChange:t=>{console.log("Selected student:",t),u(t),s("student_id",parseInt(t))},disabled:!i,children:[e.jsx(f,{children:e.jsx(g,{placeholder:"Select a student"})}),e.jsx(C,{children:I.map(t=>e.jsxs(S,{value:t.id.toString(),children:[t.name," -"," ",t.club.name]},t.id))})]}),r("student_id")]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx(d,{htmlFor:"issued_at",children:"Issued Date"}),e.jsx(h,{id:"issued_at",type:"date",value:c.issued_at,onChange:t=>s("issued_at",t.target.value)}),r("issued_at")]}),e.jsxs("div",{children:[e.jsxs(d,{htmlFor:"file",children:["Certificate File"," ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(h,{id:"file",type:"file",onChange:t=>{var l;return s("file",((l=t.target.files)==null?void 0:l[0])||null)},accept:".pdf,.jpg,.jpeg,.png",required:!0}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Accepted formats: PDF, JPG, JPEG, PNG (max 10MB)"}),r("file")]})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"notes",children:"Notes"}),e.jsx(A,{id:"notes",value:c.notes,onChange:t=>s("notes",t.target.value),placeholder:"Additional notes about this certification...",rows:4}),r("notes")]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx(p,{type:"submit",disabled:m,children:m?"Creating...":"Create Certification"}),e.jsx(p,{type:"button",variant:"outline",onClick:()=>window.history.back(),children:"Cancel"})]})]})})]})})]})}export{Y as default};
