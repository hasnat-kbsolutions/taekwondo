import{j as e,r as c,Y as W,b as g,y as w}from"./app-BOiaKrnq.js";import{D as B}from"./DataTable-C7Y4JBaD.js";import{B as p}from"./button-D8YHfysu.js";import{C as D,a as C,b as I,c as A}from"./card-D2K8gMSj.js";import{A as M,D as R,a as $,b as U,c as h}from"./authenticated-layout-DN-QAHOE.js";import{L as n}from"./label-DnRgMY3U.js";import{S as E,a as P,b as T,c as V,e as d}from"./select-BgqjcFjh.js";import{C as z}from"./country-dropdown-Ns4R2SH1.js";import{B as G}from"./badge-CGO4XOmO.js";import{R as F}from"./RatingStars-6SF_7-ss.js";import{D as H,a as O,b as q,c as Y,d as J}from"./dialog-DXR6Yr1A.js";import{F as K}from"./file-text-Cja5Td5X.js";import{E as Q}from"./ellipsis-BluzSH6V.js";import{E as X}from"./eye-CwtMz0lv.js";import{S as Z}from"./square-pen-Dm1aUC8M.js";import{T as ee}from"./trash-2-zkKMwqEB.js";import"./table-DNQQVKZT.js";import"./input-CvH_BJnq.js";import"./separator-wF5N-nG0.js";import"./index-Us7THKc4.js";import"./sun-0h1ZuuTt.js";import"./users-DkIv6nVO.js";import"./log-out-DvMYnxvU.js";import"./index-C6yEH-YU.js";import"./index-C3o37o0H.js";import"./chevron-down-C3yehkxA.js";import"./popover-CSRM3rz-.js";import"./globe-D_aHA1xb.js";const te=x=>[{header:"#",cell:({row:s})=>s.index+1},{id:"profile_image",header:"Photo",cell:({row:s})=>{const l=s.original.profile_image;if(l){const m=l.startsWith("http")?l:`/storage/${l}`;return e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:m,alt:"Profile",className:"w-10 h-10 rounded-full object-cover",onError:i=>{var o;i.currentTarget.style.display="none",(o=i.currentTarget.nextElementSibling)==null||o.classList.remove("hidden")}}),e.jsx("span",{className:"text-gray-400 italic text-xs hidden absolute inset-0 flex items-center justify-center",children:"No image"})]})}return e.jsx("span",{className:"text-gray-400 italic",children:"No image"})}},{accessorKey:"code",header:"Code"},{accessorKey:"name",header:"Name"},{accessorKey:"surname",header:"Surname"},{accessorKey:"dob",header:"DOB"},{accessorKey:"id_passport",header:"ID/Passport"},{id:"identification_document",header:"Documents",cell:({row:s})=>{const l=s.original.identification_document;if(l){const m=l.startsWith("http")?l:`/storage/${l}`;return e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(K,{className:"w-4 h-4 text-blue-500"}),e.jsx("a",{href:m,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 text-xs underline",children:"View Doc"})]})}return e.jsx("span",{className:"text-gray-400 italic text-xs",children:"No doc"})}},{accessorKey:"email",header:"Email"},{accessorKey:"phone",header:"Phone"},{id:"rating",header:"Rating",cell:({row:s})=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(F,{rating:typeof s.original.average_rating=="number"?Math.round(s.original.average_rating):0,readonly:!0,size:"sm"}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:["(",s.original.total_ratings,")"]})]})},{accessorKey:"status",header:"Status",cell:({row:s})=>e.jsx(G,{variant:s.original.status?"default":"destructive",children:s.original.status?"Active":"Inactive"})},{id:"actions",header:"Actions",cell:({row:s})=>{const l=s.original;return e.jsxs(R,{children:[e.jsx($,{asChild:!0,children:e.jsx(p,{variant:"ghost",size:"icon",className:"h-8 w-8",children:e.jsx(Q,{className:"h-4 w-4"})})}),e.jsxs(U,{align:"end",children:[e.jsxs(h,{onClick:()=>x(l),children:[e.jsx(X,{className:"w-4 h-4 mr-2"})," View"]}),e.jsx(h,{asChild:!0,children:e.jsxs(g,{href:route("organization.students.edit",l.id),children:[e.jsx(Z,{className:"w-4 h-4 mr-2"})," Edit"]})}),e.jsx(h,{asChild:!0,children:e.jsxs(g,{href:route("organization.students.destroy",l.id),method:"delete",as:"button",children:[e.jsx(ee,{className:"w-4 h-4 mr-2"})," Delete"]})})]})]})}}];function Ee({students:x,clubs:s=[],nationalities:l=[],countries:m=[],filters:i}){const[o,f]=c.useState(i.club_id||""),[j,b]=c.useState(i.nationality||""),[v,N]=c.useState(i.country||""),[y,S]=c.useState(i.status||""),[t,_]=c.useState(null),k=a=>{_(a)},u=a=>{w.get(route("organization.students.index"),{club_id:a.club_id??(o||null),nationality:a.nationality??(j||null),country:a.country??(v||null),status:a.status??(y||null)},{preserveScroll:!0,preserveState:!0,replace:!0})},L=()=>{f(""),b(""),N(""),S(""),w.get(route("organization.students.index"),{},{preserveScroll:!0,preserveState:!1,replace:!0})};return e.jsxs(M,{header:"Students",children:[e.jsx(W,{title:"Students"}),e.jsxs("div",{className:"container mx-auto py-10 space-y-6",children:[e.jsxs(D,{children:[e.jsx(C,{className:"flex flex-row items-center justify-between",children:e.jsx(I,{children:"Filters"})}),e.jsx(A,{children:e.jsxs("div",{className:"flex items-end gap-4 flex-wrap",children:[e.jsxs("div",{className:"flex flex-col w-[200px]",children:[e.jsx(n,{className:"text-sm mb-1",children:"Club"}),e.jsxs(E,{value:o,onValueChange:a=>{const r=a==="all"?"":a;f(r),u({club_id:r})},children:[e.jsx(P,{children:e.jsx(T,{placeholder:"All Clubs"})}),e.jsxs(V,{children:[e.jsx(d,{value:"all",children:"All"}),s.map(a=>e.jsx(d,{value:a.id.toString(),children:a.name},a.id))]})]})]}),e.jsxs("div",{className:"w-[200px]",children:[e.jsx(n,{className:"text-sm mb-1",children:"Nationality"}),e.jsx(z,{placeholder:"All Nationalities",defaultValue:j||"",onChange:a=>{const r=(a==null?void 0:a.alpha3)||"";b(r),u({nationality:r})},slim:!1})]}),e.jsxs("div",{className:"w-[200px]",children:[e.jsx(n,{className:"text-sm mb-1",children:"Country"}),e.jsx(z,{placeholder:"All Countries",defaultValue:v||"",onChange:a=>{const r=(a==null?void 0:a.alpha3)||"";N(r),u({country:r})}})]}),e.jsxs("div",{className:"flex flex-col w-[200px]",children:[e.jsx(n,{className:"text-sm mb-1",children:"Status"}),e.jsxs(E,{value:y,onValueChange:a=>{const r=a==="all"?"":a;S(r),u({status:r})},children:[e.jsx(P,{children:e.jsx(T,{placeholder:"All Statuses"})}),e.jsxs(V,{children:[e.jsx(d,{value:"all",children:"All"}),e.jsx(d,{value:"active",children:"Active"}),e.jsx(d,{value:"inactive",children:"Inactive"})]})]})]}),e.jsx("div",{className:"flex items-end",children:e.jsx(p,{className:"flex flex-wrap items-center gap-2 md:flex-row bg-primary text-background",onClick:L,children:"Reset Filters"})})]})})]}),e.jsxs(D,{children:[e.jsxs(C,{className:"flex flex-row items-center justify-between",children:[e.jsx(I,{children:"Students"}),e.jsx(g,{href:route("organization.students.create"),children:e.jsx(p,{children:"Add Student"})})]}),e.jsx(A,{children:e.jsx(B,{columns:te(k),data:x})})]})]}),e.jsx(H,{open:!!t,onOpenChange:()=>_(null),children:e.jsxs(O,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(q,{children:[e.jsx(Y,{children:"Student Details"}),e.jsx(J,{children:"View detailed information about the student."})]}),t&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex justify-center",children:e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[t.profile_image?e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:t.profile_image.startsWith("http")?t.profile_image:`/storage/${t.profile_image}`,alt:"Profile",className:"w-32 h-32 rounded-full object-cover border-2 border-gray-200 shadow-lg",onError:a=>{var r;a.currentTarget.style.display="none",(r=a.currentTarget.nextElementSibling)==null||r.classList.remove("hidden")}}),e.jsx("div",{className:"w-32 h-32 hidden flex items-center justify-center rounded-full bg-gray-100 text-gray-400 text-sm italic border-2 border-gray-200",children:"No Image"})]}):e.jsx("div",{className:"w-32 h-32 flex items-center justify-center rounded-full bg-gray-100 text-gray-400 text-sm italic border-2 border-gray-200",children:"No Image"}),e.jsxs("div",{className:"text-center",children:[e.jsxs("h3",{className:"font-semibold text-lg",children:[t.name," ",t.surname]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:t.code})]})]})}),e.jsx("div",{className:"grid grid-cols-2 gap-4",children:[{label:"UID",value:t.uid},{label:"Email",value:t.email},{label:"Phone",value:t.phone},{label:"Grade",value:t.grade},{label:"Gender",value:t.gender},{label:"Nationality",value:t.nationality},{label:"Date of Birth",value:t.dob?new Date(t.dob).toLocaleDateString():"Not specified"},{label:"Date of Death",value:t.dod?new Date(t.dod).toLocaleDateString():"Not specified"},{label:"ID/Passport",value:t.id_passport},{label:"Identification Document",value:t.identification_document?e.jsx("a",{href:t.identification_document.startsWith("http")?t.identification_document:`/storage/${t.identification_document}`,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 underline",children:"View Document"}):"No document uploaded"},{label:"Website",value:t.website||"Not specified"},{label:"Street",value:t.street||"Not specified"},{label:"Postal Code",value:t.postal_code||"Not specified"},{label:"City",value:t.city||"Not specified"},{label:"Country",value:t.country||"Not specified"},{label:"Status",value:t.status?"Active":"Inactive"},{label:"Rating",value:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(F,{rating:typeof t.average_rating=="number"?Math.round(t.average_rating):0,readonly:!0,size:"sm"}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[typeof t.average_rating=="number"?t.average_rating.toFixed(1):"0.0"," ","(",t.total_ratings," ","ratings)"]})]})}].map((a,r)=>e.jsxs("div",{className:"space-y-1",children:[e.jsx(n,{className:"text-sm font-medium text-muted-foreground",children:a.label}),e.jsx("div",{className:"text-sm",children:a.value})]},r))}),e.jsxs("div",{className:"border-t pt-6",children:[e.jsx("h4",{className:"font-semibold mb-4",children:"Attachments"}),e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{className:"text-sm font-medium text-muted-foreground",children:"Profile Image"}),e.jsx("div",{className:"bg-gray-50 rounded-lg p-4 border-2 border-dashed border-gray-200 min-h-[200px] flex items-center justify-center",children:t.profile_image?e.jsx("img",{src:t.profile_image.startsWith("http")?t.profile_image:`/storage/${t.profile_image}`,alt:"Profile",className:"max-w-full max-h-48 object-contain rounded"}):e.jsx("span",{className:"text-gray-400 italic",children:"No profile image"})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{className:"text-sm font-medium text-muted-foreground",children:"Identification Document"}),e.jsx("div",{className:"bg-gray-50 rounded-lg p-4 border-2 border-dashed border-gray-200 min-h-[200px] flex items-center justify-center",children:t.identification_document?e.jsxs("div",{className:"text-center",children:[e.jsx(K,{className:"w-12 h-12 text-blue-500 mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-gray-600",children:"PDF Document Available"}),e.jsx("a",{href:t.identification_document.startsWith("http")?t.identification_document:`/storage/${t.identification_document}`,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 text-sm underline mt-1 inline-block",children:"View Document"})]}):e.jsx("span",{className:"text-gray-400 italic",children:"No identification document"})})]})]})]})]})]})})]})}export{te as columns,Ee as default};
