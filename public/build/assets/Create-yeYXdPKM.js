import{W as C,r,a as b,j as e,Y as f}from"./app-Dws0rbSg.js";import{A as y}from"./authenticated-layout-D0uKPWKL.js";import{B as S}from"./button-BTLVkzyX.js";import{C as _,a as A,b as N,c as R}from"./card-Byz0f1Dl.js";import{I as o}from"./input-CcKLnWAK.js";import"./index-CaBc06c4.js";function I({companies:h,organizations:u,clubs:x}){const{data:s,setData:d,post:m,processing:p}=C({date:"",attendances:{}}),[l,j]=r.useState([]),[a,i]=r.useState({company_id:"",organization_id:"",club_id:""});r.useEffect(()=>{a.company_id&&a.organization_id&&a.club_id&&b.get(route("students.filter"),{params:a}).then(t=>j(t.data))},[a]);const c=(t,n,v)=>{d("attendances",{...s.attendances,[t]:{...s.attendances[t],[n]:v}})},g=t=>{t.preventDefault(),m(route("attendances.store"))};return e.jsxs(y,{header:"Record Attendance",children:[e.jsx(f,{title:"Record Attendance"}),e.jsx("div",{className:"container mx-auto py-10",children:e.jsxs(_,{children:[e.jsx(A,{children:e.jsx(N,{children:"New Attendance"})}),e.jsx(R,{children:e.jsxs("form",{onSubmit:g,className:"space-y-4",children:[e.jsx(o,{type:"date",value:s.date,onChange:t=>d("date",t.target.value)}),e.jsxs("select",{onChange:t=>i({...a,company_id:t.target.value}),children:[e.jsx("option",{value:"",children:"Select Company"}),h.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]}),e.jsxs("select",{onChange:t=>i({...a,organization_id:t.target.value}),children:[e.jsx("option",{value:"",children:"Select Organization"}),u.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]}),e.jsxs("select",{onChange:t=>i({...a,club_id:t.target.value}),children:[e.jsx("option",{value:"",children:"Select Club"}),x.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]}),l.length>0&&e.jsxs("table",{className:"w-full border mt-4",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Name"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"Remarks"})]})}),e.jsx("tbody",{children:l.map(t=>e.jsxs("tr",{children:[e.jsx("td",{children:t.name}),e.jsx("td",{children:e.jsxs("select",{onChange:n=>c(t.id,"status",n.target.value),children:[e.jsx("option",{value:"present",children:"Present"}),e.jsx("option",{value:"absent",children:"Absent"}),e.jsx("option",{value:"late",children:"Late"}),e.jsx("option",{value:"excused",children:"Excused"})]})}),e.jsx("td",{children:e.jsx(o,{type:"text",onChange:n=>c(t.id,"remarks",n.target.value),placeholder:"Remarks"})})]},t.id))})]}),e.jsx(S,{type:"submit",disabled:p,children:"Submit Attendance"})]})})]})})]})}export{I as default};
