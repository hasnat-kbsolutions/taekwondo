import{j as e,Y as j}from"./app-CHxsABbU.js";import{A as p}from"./authenticated-layout-BpjSoaF9.js";import{C as s,a,b as n,c as l}from"./card-C5nEaoSG.js";import{R as o}from"./RatingStars-EOcZkDrV.js";import{D as u}from"./DataTable-CkQCuIhe.js";import"./button-CVVcaTnG.js";import"./input-CbcG-BTm.js";import"./separator-DNOPl6qu.js";import"./index-CN-1e5st.js";import"./createLucideIcon-BOF96pXa.js";import"./building-2-Ik-crbZS.js";import"./users-BD-bUwfe.js";import"./log-out-DhNmSrES.js";import"./calendar-BaxiiAEL.js";import"./sun-BGtUC1J2.js";import"./table-DlA2-qFm.js";const L=({ratings:t,stats:i,userType:h})=>{const g=[{header:"#",cell:({row:r})=>r.index+1},{header:"Rating",cell:({row:r})=>e.jsx(o,{rating:r.original.rating,readonly:!0,size:"sm"})},{header:"From",cell:({row:r})=>e.jsxs("span",{children:[r.original.rater_name," (",r.original.rater_type,")"]})},{header:"To",cell:({row:r})=>e.jsxs("span",{children:[r.original.rated_name," (",r.original.rated_type,")"]})},{header:"Comment",cell:({row:r})=>e.jsx("span",{className:"max-w-xs truncate",title:r.original.comment||"",children:r.original.comment||"No comment"})},{header:"Date",cell:({row:r})=>e.jsx("span",{children:new Date(r.original.created_at).toLocaleDateString()})}],d=(i==null?void 0:i.total_ratings)??t.length,m=(i==null?void 0:i.average_rating)??(d>0?t.reduce((r,x)=>r+x.rating,0)/d:0),c=h==="Organization";return e.jsxs(p,{header:"Ratings Overview",children:[e.jsx(j,{title:"Ratings Overview"}),e.jsxs("div",{className:"container mx-auto py-10",children:[c&&i?e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[e.jsxs(s,{children:[e.jsx(a,{children:e.jsx(n,{className:"text-lg",children:"Total Ratings"})}),e.jsx(l,{children:e.jsx("span",{className:"text-3xl font-bold",children:i.total_ratings})})]}),e.jsxs(s,{children:[e.jsx(a,{children:e.jsx(n,{className:"text-lg",children:"Average Rating"})}),e.jsx(l,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(o,{rating:Math.round(i.average_rating),readonly:!0,size:"sm"}),e.jsx("span",{className:"text-2xl font-bold",children:i.average_rating.toFixed(1)})]})})]}),e.jsxs(s,{children:[e.jsx(a,{children:e.jsx(n,{className:"text-lg",children:"Students Rated"})}),e.jsx(l,{children:e.jsx("span",{className:"text-3xl font-bold",children:i.students_rated})})]}),e.jsxs(s,{children:[e.jsx(a,{children:e.jsx(n,{className:"text-lg",children:"Instructors Rated"})}),e.jsx(l,{children:e.jsx("span",{className:"text-3xl font-bold",children:i.instructors_rated})})]})]}):e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[e.jsxs(s,{children:[e.jsx(a,{children:e.jsx(n,{className:"text-lg",children:"Total Ratings"})}),e.jsx(l,{children:e.jsx("span",{className:"text-3xl font-bold",children:d})})]}),e.jsxs(s,{children:[e.jsx(a,{children:e.jsx(n,{className:"text-lg",children:"Average Rating"})}),e.jsx(l,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(o,{rating:Math.round(m),readonly:!0,size:"sm"}),e.jsx("span",{className:"text-2xl font-bold",children:m.toFixed(1)})]})})]})]}),c&&i&&e.jsxs(s,{className:"mb-8",children:[e.jsx(a,{children:e.jsx(n,{children:"Rating Distribution"})}),e.jsx(l,{children:e.jsx("div",{className:"grid grid-cols-5 gap-4",children:Object.entries(i.rating_distribution).map(([r,x])=>e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:x}),e.jsx("div",{className:"text-sm text-muted-foreground",children:r.replace("_"," ").replace("stars","â˜…")})]},r))})})]}),e.jsxs(s,{children:[e.jsx(a,{children:e.jsxs(n,{children:[c?"Student & Instructor Ratings":"All Ratings"," (",t.length,")"]})}),e.jsx(l,{children:t.length>0?e.jsx(u,{columns:g,data:t}):e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No ratings found."})})]})]})]})};export{L as default};
