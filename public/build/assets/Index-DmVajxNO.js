import{r as P,j as e,Y as R,y as f,b as g}from"./app-Cczs6-pu.js";import{A,B as F,D as T,a as I,b as _,c as u}from"./authenticated-layout-DEeh39OK.js";import{B as y}from"./button-CggtxzJ5.js";import{C as l,a as r,b as i,c as n}from"./card-vYZ9cLYq.js";import{L as E}from"./label-CZZW3Csb.js";import{S as L,a as k,b as H,c as V,e as $}from"./select-B9LWK5kt.js";import{D as K}from"./DataTable-B0H1oPcH.js";import{W as N}from"./wallet-BNV4qstJ.js";import{H as O}from"./hourglass-B4K1tHUQ.js";import{E as W}from"./ellipsis-jKDB3kJQ.js";import{F as z}from"./file-text-B9lCz7L7.js";import{D as C}from"./download-DG-Axjq2.js";import{f as J}from"./format-LUeNQFBy.js";import"./input-DsdL8FF4.js";import"./separator-DyVKSp-u.js";import"./index-Cb-X0E5O.js";import"./createLucideIcon-UMabuQnl.js";import"./building-2-C5wJhXXz.js";import"./users-Ds4nSVQ5.js";import"./log-out-BsjkLR5-.js";import"./sun-BlgYwToS.js";import"./index-mUeHlh6V.js";import"./index-BxnyZUfo.js";import"./chevron-down-POU4J2A8.js";import"./table-CEaOauNm.js";const x=new Date().getFullYear(),q=Array.from({length:31},(d,c)=>x-15+c),h=(d,c="MYR")=>{const m=Number(d)||0;return c==="JPY"?m.toLocaleString():m.toFixed(2)};function ye({year:d,payments:c,totalPayments:m,paidPayments:w,pendingPayments:b,amountsByCurrency:t,defaultCurrencyCode:o}){const[v,j]=P.useState(d||x),M=s=>{const a=parseInt(s);j(a),f.get(route("student.payments.index"),{year:a})},S=()=>{j(x),f.get(route("student.payments.index"),{year:x})},Y=[{header:"#",cell:({row:s})=>s.index+1},{header:"Amount",cell:({row:s})=>{var p;const a=((p=s.original.currency)==null?void 0:p.symbol)||"RM",D=s.original.currency_code||"MYR";return`${a} ${h(s.original.amount,D)}`}},{header:"Method",accessorKey:"method"},{header:"Status",cell:({row:s})=>e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${s.original.status==="paid"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:s.original.status})},{header:"Payment Month",accessorKey:"payment_month"},{header:"Pay At",cell:({row:s})=>s.original.pay_at?J(new Date(s.original.pay_at),"MMM dd, yyyy"):"-"},{header:"Notes",cell:({row:s})=>s.original.notes||"-"},{header:"Actions",cell:({row:s})=>e.jsxs(T,{children:[e.jsx(I,{asChild:!0,children:e.jsx(y,{variant:"ghost",size:"icon",className:"h-8 w-8",children:e.jsx(W,{className:"h-4 w-4"})})}),e.jsxs(_,{align:"end",children:[e.jsx(u,{asChild:!0,children:e.jsxs(g,{href:route("student.payments.invoice",{payment:s.original.id}),children:[e.jsx(z,{className:"w-4 h-4 mr-2"})," View Invoice"]})}),e.jsx(u,{asChild:!0,children:e.jsxs(g,{href:route("student.payments.invoice",{payment:s.original.id}),children:[e.jsx(C,{className:"w-4 h-4 mr-2"})," Download Invoice"]})})]})]})}];return e.jsxs(A,{header:"My Payments",children:[e.jsx(R,{title:"My Payments"}),e.jsxs("div",{className:"container mx-auto py-10 space-y-6",children:[e.jsxs(l,{children:[e.jsx(r,{children:e.jsx(i,{children:"Filters"})}),e.jsx(n,{children:e.jsxs("div",{className:"flex items-end gap-4 flex-wrap",children:[e.jsxs("div",{className:"flex flex-col w-[180px]",children:[e.jsx(E,{className:"text-sm mb-1",children:"Year"}),e.jsxs(L,{onValueChange:M,value:v.toString(),children:[e.jsx(k,{children:e.jsx(H,{placeholder:"Select a year"})}),e.jsx(V,{children:q.map(s=>e.jsx($,{value:s.toString(),children:s},s))})]})]}),e.jsx("div",{className:"flex items-end",children:e.jsx(y,{onClick:S,children:"Reset Filters"})})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs(l,{children:[e.jsxs(r,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(i,{className:"text-sm font-medium",children:"Total Payments"}),e.jsx(N,{className:"h-6 w-6 text-primary"})]}),e.jsx(n,{children:e.jsx("div",{className:"text-2xl font-bold",children:m||0})})]}),e.jsxs(l,{children:[e.jsxs(r,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(i,{className:"text-sm font-medium",children:"Paid"}),e.jsx(F,{className:"h-6 w-6 text-green-600"})]}),e.jsx(n,{children:e.jsx("div",{className:"text-2xl font-bold text-green-600",children:w||0})})]}),e.jsxs(l,{children:[e.jsxs(r,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(i,{className:"text-sm font-medium",children:"Pending"}),e.jsx(O,{className:"h-6 w-6 text-yellow-500"})]}),e.jsx(n,{children:e.jsx("div",{className:"text-2xl font-bold text-yellow-500",children:b||0})})]}),e.jsxs(l,{className:"col-span-1 sm:col-span-2 lg:col-span-4",children:[e.jsxs(r,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(i,{className:"text-sm font-medium",children:"Total Revenue"}),e.jsx(N,{className:"h-6 w-6 text-primary"})]}),e.jsx(n,{children:e.jsxs("div",{className:"space-y-1 w-full",children:[e.jsxs("div",{className:"text-lg font-bold",children:[o==="MYR"?"RM":o," ",h((t==null?void 0:t[o||"MYR"])||0,o||"MYR")]}),t&&Object.keys(t).length>1&&e.jsx("div",{className:"text-xs text-muted-foreground space-y-1",children:Object.entries(t).filter(([s])=>s!==o).map(([s,a])=>e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{children:[s,":"]}),e.jsx("span",{children:h(a,s)})]},s))})]})})]})]}),e.jsxs(l,{children:[e.jsx(r,{children:e.jsx(i,{children:"My Payments"})}),e.jsx(n,{children:e.jsx(K,{data:c,columns:Y})})]})]})]})}export{ye as default};
