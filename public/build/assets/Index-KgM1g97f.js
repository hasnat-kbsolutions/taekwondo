import{j as e,r as i,Y as M,b as x,y as C}from"./app-DTQk7vxO.js";import{D as R}from"./DataTable-DfOZR7zM.js";import{B as h}from"./button-CWNR-vJJ.js";import{C as w,a as D,b as _,c as I}from"./card-IdKNm35h.js";import{A as F,D as L,a as k,b as G,c as u}from"./authenticated-layout-CC74nmYh.js";import{L as r}from"./label-D5atn-hE.js";import{S as A,a as P,b as E,c as z,e as n}from"./select-C2jbp9A4.js";import{C as K}from"./country-dropdown-CaqJALih.js";import{B as H}from"./badge-CkJnoIhx.js";import{R as V}from"./RatingStars-dkC4rdri.js";import{D as O,a as q,b as U,c as Y,d as J}from"./dialog-Bw2hNP4a.js";import{E as Q}from"./ellipsis-kV8jHywm.js";import{E as W}from"./eye-DZmgEU3K.js";import{S as X}from"./square-pen-CNfrKdL3.js";import{T as Z}from"./trash-2-BLHKxCog.js";import"./table-_7vXIEUi.js";import"./input-Bg81MIu0.js";import"./separator-C00dqrTm.js";import"./index-SIYl0Iv-.js";import"./sun-DpprhLd3.js";import"./users-CqSFjye9.js";import"./log-out-BKeuGqX9.js";import"./index-DiFbUrIw.js";import"./index-B8ANasXJ.js";import"./chevron-down-0Kdm1Tqi.js";import"./popover-Cukv8_id.js";import"./globe-CbJuoGOO.js";const $=m=>[{header:"#",cell:({row:t})=>t.index+1},{id:"profile_image",header:"Photo",cell:({row:t})=>t.original.profile_image?e.jsx("img",{src:t.original.profile_image,alt:"Profile",className:"w-10 h-10 rounded-full object-cover"}):e.jsx("span",{className:"text-gray-400 italic",children:"No image"})},{accessorKey:"code",header:"Code"},{accessorKey:"name",header:"Name"},{accessorKey:"surname",header:"Surname"},{accessorKey:"dob",header:"DOB"},{accessorKey:"id_passport",header:"ID/Passport"},{accessorKey:"email",header:"Email"},{accessorKey:"phone",header:"Phone"},{id:"rating",header:"Rating",cell:({row:t})=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(V,{rating:typeof t.original.average_rating=="number"?Math.round(t.original.average_rating):0,readonly:!0,size:"sm"}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:["(",t.original.total_ratings,")"]})]})},{accessorKey:"status",header:"Status",cell:({row:t})=>e.jsx(H,{variant:t.original.status?"default":"destructive",children:t.original.status?"Active":"Inactive"})},{id:"actions",header:"Actions",cell:({row:t})=>{const o=t.original;return e.jsxs(L,{children:[e.jsx(k,{asChild:!0,children:e.jsx(h,{variant:"ghost",size:"icon",className:"h-8 w-8",children:e.jsx(Q,{className:"h-4 w-4"})})}),e.jsxs(G,{align:"end",children:[e.jsxs(u,{onClick:()=>m(o),children:[e.jsx(W,{className:"w-4 h-4 mr-2"})," View"]}),e.jsx(u,{asChild:!0,children:e.jsxs(x,{href:route("organization.students.edit",o.id),children:[e.jsx(X,{className:"w-4 h-4 mr-2"})," Edit"]})}),e.jsx(u,{asChild:!0,children:e.jsxs(x,{href:route("organization.students.destroy",o.id),method:"delete",as:"button",children:[e.jsx(Z,{className:"w-4 h-4 mr-2"})," Delete"]})})]})]})}}];function Ie({students:m,clubs:t=[],nationalities:o=[],countries:ee=[],filters:d}){const[g,p]=i.useState(d.club_id||""),[j,f]=i.useState(d.nationality||""),[v,y]=i.useState(d.country||""),[b,N]=i.useState(d.status||""),[s,S]=i.useState(null),T=a=>{S(a)},c=a=>{C.get(route("organization.students.index"),{club_id:a.club_id??(g||null),nationality:a.nationality??(j||null),country:a.country??(v||null),status:a.status??(b||null)},{preserveScroll:!0,preserveState:!0,replace:!0})},B=()=>{p(""),f(""),y(""),N(""),C.get(route("organization.students.index"),{},{preserveScroll:!0,preserveState:!1,replace:!0})};return e.jsxs(F,{header:"Students",children:[e.jsx(M,{title:"Students"}),e.jsxs("div",{className:"container mx-auto py-10 space-y-6",children:[e.jsxs(w,{children:[e.jsx(D,{className:"flex flex-row items-center justify-between",children:e.jsx(_,{children:"Filters"})}),e.jsx(I,{children:e.jsxs("div",{className:"flex items-end gap-4 flex-wrap",children:[e.jsxs("div",{className:"flex flex-col w-[200px]",children:[e.jsx(r,{className:"text-sm mb-1",children:"Club"}),e.jsxs(A,{value:g,onValueChange:a=>{const l=a==="all"?"":a;p(l),c({club_id:l})},children:[e.jsx(P,{children:e.jsx(E,{placeholder:"All Clubs"})}),e.jsxs(z,{children:[e.jsx(n,{value:"all",children:"All"}),t.map(a=>e.jsx(n,{value:a.id.toString(),children:a.name},a.id))]})]})]}),e.jsxs("div",{className:"w-[200px]",children:[e.jsx(r,{className:"text-sm mb-1",children:"Nationality"}),e.jsx(K,{placeholder:"All Nationalities",defaultValue:j||"",onChange:a=>{const l=(a==null?void 0:a.alpha3)||"";f(l),c({nationality:l})},slim:!1})]}),e.jsxs("div",{className:"w-[200px]",children:[e.jsx(r,{className:"text-sm mb-1",children:"Country"}),e.jsx(K,{placeholder:"All Countries",defaultValue:v||"",onChange:a=>{const l=(a==null?void 0:a.alpha3)||"";y(l),c({country:l})}})]}),e.jsxs("div",{className:"flex flex-col w-[200px]",children:[e.jsx(r,{className:"text-sm mb-1",children:"Status"}),e.jsxs(A,{value:b,onValueChange:a=>{const l=a==="all"?"":a;N(l),c({status:l})},children:[e.jsx(P,{children:e.jsx(E,{placeholder:"All Statuses"})}),e.jsxs(z,{children:[e.jsx(n,{value:"all",children:"All"}),e.jsx(n,{value:"active",children:"Active"}),e.jsx(n,{value:"inactive",children:"Inactive"})]})]})]}),e.jsx("div",{className:"flex items-end",children:e.jsx(h,{className:"flex flex-wrap items-center gap-2 md:flex-row bg-primary text-background",onClick:B,children:"Reset Filters"})})]})})]}),e.jsxs(w,{children:[e.jsxs(D,{className:"flex flex-row items-center justify-between",children:[e.jsx(_,{children:"Students"}),e.jsx(x,{href:route("organization.students.create"),children:e.jsx(h,{children:"Add Student"})})]}),e.jsx(I,{children:e.jsx(R,{columns:$(T),data:m})})]})]}),e.jsx(O,{open:!!s,onOpenChange:()=>S(null),children:e.jsxs(q,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(U,{children:[e.jsx(Y,{children:"Student Details"}),e.jsx(J,{children:"View detailed information about the student."})]}),s&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex justify-center",children:e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[s.profile_image?e.jsx("img",{src:s.profile_image,alt:"Profile",className:"w-32 h-32 rounded-full object-cover border-2 border-gray-200 shadow-lg"}):e.jsx("div",{className:"w-32 h-32 flex items-center justify-center rounded-full bg-gray-100 text-gray-400 text-sm italic border-2 border-gray-200",children:"No Image"}),e.jsxs("div",{className:"text-center",children:[e.jsxs("h3",{className:"font-semibold text-lg",children:[s.name," ",s.surname]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.code})]})]})}),e.jsx("div",{className:"grid grid-cols-2 gap-4",children:[{label:"UID",value:s.uid},{label:"Email",value:s.email},{label:"Phone",value:s.phone},{label:"Grade",value:s.grade},{label:"Gender",value:s.gender},{label:"Nationality",value:s.nationality},{label:"Date of Birth",value:s.dob?new Date(s.dob).toLocaleDateString():"Not specified"},{label:"ID/Passport",value:s.id_passport},{label:"City",value:s.city||"Not specified"},{label:"Country",value:s.country||"Not specified"},{label:"Status",value:s.status?"Active":"Inactive"},{label:"Rating",value:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(V,{rating:typeof s.average_rating=="number"?Math.round(s.average_rating):0,readonly:!0,size:"sm"}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[typeof s.average_rating=="number"?s.average_rating.toFixed(1):"0.0"," ","(",s.total_ratings," ","ratings)"]})]})}].map((a,l)=>e.jsxs("div",{className:"space-y-1",children:[e.jsx(r,{className:"text-sm font-medium text-muted-foreground",children:a.label}),e.jsx("div",{className:"text-sm",children:a.value})]},l))}),e.jsxs("div",{className:"border-t pt-6",children:[e.jsx("h4",{className:"font-semibold mb-4",children:"Attachments"}),e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-sm font-medium text-muted-foreground",children:"ID/Passport Image"}),e.jsx("div",{className:"bg-gray-50 rounded-lg p-4 border-2 border-dashed border-gray-200 min-h-[200px] flex items-center justify-center",children:s.id_passport_image?e.jsx("img",{src:s.id_passport_image,alt:"ID/Passport",className:"max-w-full max-h-48 object-contain rounded"}):e.jsx("span",{className:"text-gray-400 italic",children:"No ID/Passport image"})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-sm font-medium text-muted-foreground",children:"Signature Image"}),e.jsx("div",{className:"bg-gray-50 rounded-lg p-4 border-2 border-dashed border-gray-200 min-h-[200px] flex items-center justify-center",children:s.signature_image?e.jsx("img",{src:s.signature_image,alt:"Signature",className:"max-w-full max-h-48 object-contain rounded"}):e.jsx("span",{className:"text-gray-400 italic",children:"No signature image"})})]})]})]})]})]})})]})}export{$ as columns,Ie as default};
