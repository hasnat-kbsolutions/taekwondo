import{W as D,r as v,j as e,Y as I}from"./app-D1SDBIop.js";import{A as B}from"./authenticated-layout-CCz5eQ_q.js";import{I as d}from"./input-B3m-7Gcr.js";import{C as g}from"./country-dropdown-BjzkicRB.js";import{L as r}from"./label-Mi81xqvw.js";import{B as T}from"./button-7Hd0cb1s.js";import{S as c,a as u,b as o,c as h,e as s,d as _,f as S}from"./select-DuabGzMV.js";import"./separator-CTLkRMH0.js";import"./index-D1s9PUES.js";import"./sun-Dezua4s8.js";import"./users-BytQ2UPK.js";import"./log-out-BkyLan4n.js";import"./dialog-CzE-osex.js";import"./popover-DQX4_ecQ.js";import"./index-DOKFqae7.js";import"./globe-oG4uDV3s.js";import"./chevron-down-khwMYqqQ.js";import"./index-CncvHzeb.js";function K({clubs:w,student:p,plans:j=[],currencies:y=[],feePlan:a}){const{data:t,setData:n,post:N,processing:G,errors:m}=D({...p,_method:"put",profile_image:null,identification_document:null,plan_id:a!=null&&a.plan_id?String(a.plan_id):"",interval:(a==null?void 0:a.interval)??"monthly",interval_count:(a==null?void 0:a.interval_count)??null,discount_type:(a==null?void 0:a.discount_type)??"",discount_value:(a==null?void 0:a.discount_value)??null,currency_code:(a==null?void 0:a.currency_code)??""}),x=v.useMemo(()=>j.filter(l=>String(l.planable_id)===String(t.club_id)),[j,t.club_id]);v.useEffect(()=>{if(!t.club_id){t.plan_id!==""&&n("plan_id","");return}t.plan_id!==""&&!x.some(b=>String(b.id)===String(t.plan_id))&&a!=null&&a.plan_id&&String(a.plan_id)!==String(t.plan_id)&&n("plan_id","")},[t.club_id,x,t.plan_id,n,a]);const C=l=>{l.preventDefault(),N(route("organization.students.update",p.id))},i=l=>m[l]&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:m[l]});return e.jsxs(B,{header:"Edit Student",children:[e.jsx(I,{title:"Edit Student"}),e.jsx("div",{className:"container mx-auto py-10",children:e.jsxs("form",{onSubmit:C,className:"flex flex-wrap",children:[e.jsxs("div",{className:"w-[33.33%] px-2 mt-3",children:[e.jsxs(r,{children:["Select Club ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs(c,{value:String(t.club_id)||"",onValueChange:l=>n("club_id",l),children:[e.jsx(u,{className:"w-full",children:e.jsx(o,{placeholder:"Select Club"})}),e.jsx(h,{children:w.map(l=>e.jsx(s,{value:String(l.id),children:l.name},l.id))})]}),i("club_id")]}),e.jsxs("div",{className:"w-[33.33%] px-2 mt-3",children:[e.jsxs(r,{children:["Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(d,{placeholder:"Name",value:t.name,onChange:l=>n("name",l.target.value)}),i("name")]}),e.jsxs("div",{className:"w-[33.33%] px-2 mt-3",children:[e.jsx(r,{children:"Surname"}),e.jsx(d,{placeholder:"Surname",value:t.surname,onChange:l=>n("surname",l.target.value)})]}),e.jsxs("div",{className:"w-[33.33%] px-2 mt-3",children:[e.jsxs(r,{children:["Nationality ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(g,{placeholder:"Select nationality",defaultValue:t.nationality,onChange:l=>n("nationality",l.alpha3),slim:!1}),i("nationality")]}),e.jsxs("div",{className:"w-[33.33%] px-2 mt-3",children:[e.jsxs(r,{children:["Date of Birth"," ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(d,{type:"date",value:t.dob,onChange:l=>n("dob",l.target.value)}),i("dob")]}),e.jsxs("div",{className:"w-[33.33%] px-2 mt-3",children:[e.jsx(r,{children:"Date of Deactivation"}),e.jsx(d,{type:"date",value:t.dod,onChange:l=>n("dod",l.target.value)}),i("dod")]}),e.jsxs("div",{className:"w-[33.33%] px-2 mt-3",children:[e.jsxs(r,{children:["Grade ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs(c,{value:t.grade||"",onValueChange:l=>n("grade",l),children:[e.jsx(u,{className:"w-full",children:e.jsx(o,{placeholder:"Select Grade"})}),e.jsxs(h,{children:[e.jsxs(_,{children:[e.jsx(S,{children:"Gup (Student Grades)"}),e.jsx(s,{value:"10th Gup - White",children:"10th Gup - White"}),e.jsx(s,{value:"9th Gup - White w/ Yellow Tag",children:"9th Gup - White w/ Yellow Tag"}),e.jsx(s,{value:"8th Gup - Yellow",children:"8th Gup - Yellow"}),e.jsx(s,{value:"7th Gup - Yellow w/ Green Tag",children:"7th Gup - Yellow w/ Green Tag"}),e.jsx(s,{value:"6th Gup - Green",children:"6th Gup - Green"}),e.jsx(s,{value:"5th Gup - Green w/ Blue Tag",children:"5th Gup - Green w/ Blue Tag"}),e.jsx(s,{value:"4th Gup - Blue",children:"4th Gup - Blue"}),e.jsx(s,{value:"3rd Gup - Blue w/ Red Tag",children:"3rd Gup - Blue w/ Red Tag"}),e.jsx(s,{value:"2nd Gup - Red",children:"2nd Gup - Red"}),e.jsx(s,{value:"1st Gup - Red w/ Black Tag",children:"1st Gup - Red w/ Black Tag"})]}),e.jsxs(_,{children:[e.jsx(S,{children:"Dan (Black Belt Ranks)"}),e.jsx(s,{value:"1st Dan - Black Belt",children:"1st Dan - Black Belt"}),e.jsx(s,{value:"2nd Dan - Assistant Instructor",children:"2nd Dan - Assistant Instructor"}),e.jsx(s,{value:"3rd Dan - Instructor",children:"3rd Dan - Instructor"}),e.jsx(s,{value:"4th Dan - International Instructor",children:"4th Dan - International Instructor"}),e.jsx(s,{value:"5th Dan - International Instructor",children:"5th Dan - International Instructor"}),e.jsx(s,{value:"6th Dan - Senior Instructor",children:"6th Dan - Senior Instructor"}),e.jsx(s,{value:"7th Dan - Master",children:"7th Dan - Master"}),e.jsx(s,{value:"8th Dan - Senior Master",children:"8th Dan - Senior Master"}),e.jsx(s,{value:"9th Dan - Grand Master",children:"9th Dan - Grand Master"})]})]})]}),i("grade")]}),e.jsxs("div",{className:"w-[33.33%] px-2 mt-3",children:[e.jsxs(r,{children:["Gender ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs(c,{value:t.gender,onValueChange:l=>n("gender",l),children:[e.jsx(u,{className:"w-full",children:e.jsx(o,{placeholder:"Select Gender"})}),e.jsxs(h,{children:[e.jsx(s,{value:"male",children:"Male"}),e.jsx(s,{value:"female",children:"Female"})]})]}),i("gender")]}),e.jsxs("div",{className:"w-[33.33%] px-2 mt-3",children:[e.jsx(r,{children:"City"}),e.jsx(d,{placeholder:"City",value:t.city,onChange:l=>n("city",l.target.value)}),i("city")]}),e.jsxs("div",{className:"w-[33.33%] px-2 mt-3",children:[e.jsx(r,{children:"Postal Code"}),e.jsx(d,{placeholder:"Postal Code",value:t.postal_code,onChange:l=>n("postal_code",l.target.value)}),i("postal_code")]}),e.jsxs("div",{className:"w-[33.33%] px-2 mt-3",children:[e.jsx(r,{children:"Street"}),e.jsx(d,{placeholder:"Street",value:t.street,onChange:l=>n("street",l.target.value)}),i("street")]}),e.jsxs("div",{className:"w-[33.33%] px-2 mt-3",children:[e.jsx(r,{children:"Country"}),e.jsx(g,{placeholder:"Select country",defaultValue:t.country,onChange:l=>n("country",l.alpha3),slim:!1}),i("country")]}),e.jsxs("div",{className:"w-[33.33%] px-2 mt-3",children:[e.jsx(r,{children:"Status"}),e.jsxs(c,{value:String(t.status),onValueChange:l=>n("status",l==="true"),children:[e.jsx(u,{children:e.jsx(o,{placeholder:"Select Status"})}),e.jsxs(h,{children:[e.jsx(s,{value:"true",children:"Active"}),e.jsx(s,{value:"false",children:"Inactive"})]})]}),i("status")]}),e.jsx("div",{className:"w-full px-2 mt-6",children:e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Plan Assignment"})}),e.jsxs("div",{className:"w-[33.33%] px-2 mt-3",children:[e.jsx(r,{children:"Plan"}),e.jsxs(c,{value:String(t.plan_id)||"",onValueChange:l=>n("plan_id",l),disabled:x.length===0,children:[e.jsx(u,{className:"w-full",children:e.jsx(o,{placeholder:"Select Plan"})}),e.jsx(h,{children:x.length===0?e.jsx(s,{value:"no-plans",disabled:!0,children:"No active plans available"}):x.map(l=>e.jsxs(s,{value:String(l.id),children:[l.name," - ",l.currency_code," ",l.base_amount]},l.id))})]}),i("plan_id")]}),e.jsxs("div",{className:"w-[33.33%] px-2 mt-3",children:[e.jsx(r,{children:"Interval"}),e.jsxs(c,{value:t.interval,onValueChange:l=>n("interval",l),children:[e.jsx(u,{className:"w-full",children:e.jsx(o,{placeholder:"Select Interval"})}),e.jsxs(h,{children:[e.jsx(s,{value:"monthly",children:"Monthly"}),e.jsx(s,{value:"quarterly",children:"Quarterly"}),e.jsx(s,{value:"semester",children:"Semester"}),e.jsx(s,{value:"yearly",children:"Yearly"}),e.jsx(s,{value:"custom",children:"Custom"})]})]}),i("interval")]}),t.interval==="custom"&&e.jsxs("div",{className:"w-[33.33%] px-2 mt-3",children:[e.jsxs(r,{children:["Interval Count (Months)"," ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(d,{type:"number",min:"1",placeholder:"Enter number of months",value:t.interval_count??"",onChange:l=>n("interval_count",l.target.value?parseInt(l.target.value):null)}),i("interval_count")]}),e.jsxs("div",{className:"w-[33.33%] px-2 mt-3",children:[e.jsx(r,{children:"Discount Type"}),e.jsxs(c,{value:t.discount_type||"none",onValueChange:l=>n("discount_type",l==="none"?"":l),children:[e.jsx(u,{className:"w-full",children:e.jsx(o,{placeholder:"Select Discount Type (Optional)"})}),e.jsxs(h,{children:[e.jsx(s,{value:"none",children:"None"}),e.jsx(s,{value:"percent",children:"Percentage"}),e.jsx(s,{value:"fixed",children:"Fixed Amount"})]})]}),i("discount_type")]}),t.discount_type&&e.jsxs("div",{className:"w-[33.33%] px-2 mt-3",children:[e.jsxs(r,{children:["Discount Value"," ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(d,{type:"number",min:"0",step:"0.01",placeholder:t.discount_type==="percent"?"Enter percentage":"Enter amount",value:t.discount_value??"",onChange:l=>n("discount_value",l.target.value?parseFloat(l.target.value):null)}),i("discount_value")]}),e.jsxs("div",{className:"w-[33.33%] px-2 mt-3",children:[e.jsx(r,{children:"Currency"}),e.jsxs(c,{value:t.currency_code||"default",onValueChange:l=>n("currency_code",l==="default"?"":l),children:[e.jsx(u,{className:"w-full",children:e.jsx(o,{placeholder:"Select Currency (Optional)"})}),e.jsxs(h,{children:[e.jsx(s,{value:"default",children:"Use Plan Currency"}),y.map(l=>e.jsxs(s,{value:l.code,children:[l.code," - ",l.name]},l.code))]})]}),i("currency_code")]}),e.jsx("div",{className:"w-full px-2 mt-5",children:e.jsx(T,{type:"submit",disabled:G,children:"Update"})})]})})]})}export{K as default};
