import{r,j as e,Y as B,b as x,y as C}from"./app-DCaEnIQ_.js";import{B as p}from"./button-BYn5AtxP.js";import{B as I}from"./badge-DIUS3TcX.js";import{A as K,D as T,a as V,b as J,c as N}from"./authenticated-layout-B6ZEfIqX.js";import{S as d,a as o,b as u,c as m,e as t}from"./select-DZ9GbxSz.js";import{D as k}from"./DataTable-B5dhW2LL.js";import{C as w,a as M,b as A,c as D}from"./card-CrukETFe.js";import{L as h}from"./label-BkhqmzXR.js";import{E as R}from"./ellipsis-yVFJlZ9J.js";import"./input-ROFZV3Ig.js";import"./index-BHdoycJG.js";import"./index-C9NISCAZ.js";import"./index-Cr6pMLAT.js";import"./chevron-down-pj6_iuMY.js";import"./table-BLO6Njln.js";const $=[{header:"#",cell:({row:s})=>s.index+1},{header:"Student",cell:({row:s})=>{var l;return((l=s.original.student)==null?void 0:l.name)||"-"}},{header:"Amount",accessorKey:"amount"},{header:"Status",cell:({row:s})=>e.jsx(I,{variant:s.original.status==="paid"||s.original.status==="success"?"default":"destructive",children:s.original.status})},{header:"Method",accessorKey:"method"},{header:"Payment Month",accessorKey:"payment_month"},{header:"Pay At",accessorKey:"pay_at"},{header:"Actions",cell:({row:s})=>e.jsxs(T,{children:[e.jsx(V,{asChild:!0,children:e.jsx(p,{variant:"ghost",size:"icon",className:"h-8 w-8",children:e.jsx(R,{className:"h-4 w-4"})})}),e.jsxs(J,{align:"end",children:[e.jsx(N,{asChild:!0,children:e.jsx(x,{href:route("admin.payments.edit",s.original.id),children:"Edit"})}),e.jsx(N,{asChild:!0,children:e.jsx(x,{href:route("admin.payments.destroy",s.original.id),method:"delete",as:"button",children:"Delete"})})]})]})}],j=new Date().getFullYear(),z=Array.from({length:5},(s,l)=>(j-l).toString()),H=[{label:"January",value:"01"},{label:"February",value:"02"},{label:"March",value:"03"},{label:"April",value:"04"},{label:"May",value:"05"},{label:"June",value:"06"},{label:"July",value:"07"},{label:"August",value:"08"},{label:"September",value:"09"},{label:"October",value:"10"},{label:"November",value:"11"},{label:"December",value:"12"}];function ie({payments:s,filters:l}){var b,g;const[n,f]=r.useState(l.status||""),[i,v]=r.useState(((b=l.payment_month)==null?void 0:b.split("-")[0])||j.toString()),[c,y]=r.useState(((g=l.payment_month)==null?void 0:g.split("-")[1])||""),P=({year:a,month:S,status:_})=>{const L=a&&S?`${a}-${S}`:"";C.get(route("admin.payments.index"),{status:_||null,payment_month:L||null},{preserveScroll:!0,preserveState:!0,replace:!0})},[Y,E]=r.useState(!0);r.useEffect(()=>{if(Y){E(!1);return}P({year:i,month:c,status:n})},[i,c,n]);const F=()=>{f(""),v(j.toString()),y(""),C.get(route("admin.payments.index"),{},{preserveScroll:!0,preserveState:!1,replace:!0})};return e.jsxs(K,{header:"Payments",children:[e.jsx(B,{title:"Payments"}),e.jsxs("div",{className:"container mx-auto py-10 space-y-6",children:[e.jsxs(w,{children:[e.jsx(M,{className:"flex flex-row items-center justify-between",children:e.jsx(A,{children:"Filters"})}),e.jsx(D,{children:e.jsxs("div",{className:"flex items-end gap-4 flex-wrap",children:[e.jsxs("div",{className:"flex flex-col w-[160px]",children:[e.jsx(h,{className:"text-sm mb-1",children:"Year"}),e.jsxs(d,{value:i,onValueChange:v,children:[e.jsx(o,{children:e.jsx(u,{placeholder:"Year"})}),e.jsx(m,{children:z.map(a=>e.jsx(t,{value:a,children:a},a))})]})]}),e.jsxs("div",{className:"flex flex-col w-[160px]",children:[e.jsx(h,{className:"text-sm mb-1",children:"Month"}),e.jsxs(d,{value:c,onValueChange:a=>y(a==="all"?"":a),children:[e.jsx(o,{children:e.jsx(u,{placeholder:"Month"})}),e.jsxs(m,{children:[e.jsx(t,{value:"all",children:"All"}),H.map(a=>e.jsx(t,{value:a.value,children:a.label},a.value))]})]})]}),e.jsxs("div",{className:"flex flex-col w-[160px]",children:[e.jsx(h,{className:"text-sm mb-1",children:"Status"}),e.jsxs(d,{value:n,onValueChange:a=>f(a==="all"?"":a),children:[e.jsx(o,{children:e.jsx(u,{placeholder:"All Statuses"})}),e.jsxs(m,{children:[e.jsx(t,{value:"all",children:"All"}),e.jsx(t,{value:"paid",children:"Paid"}),e.jsx(t,{value:"unpaid",children:"Unpaid"})]})]})]}),e.jsx("div",{className:"flex items-end",children:e.jsx(p,{className:"flex flex-wrap items-center gap-2 md:flex-row bg-primary text-black",onClick:F,children:"Reset Filters"})})]})})]}),e.jsxs(w,{children:[e.jsxs(M,{className:"flex flex-row items-center justify-between",children:[e.jsx(A,{children:"Payments"}),e.jsx(x,{href:route("admin.payments.create"),children:e.jsx(p,{children:"Add Payment"})})]}),e.jsx(D,{children:e.jsx(k,{data:s,columns:$})})]})]})]})}export{ie as default};
