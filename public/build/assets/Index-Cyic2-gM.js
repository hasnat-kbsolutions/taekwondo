import{r as M,W as P,j as e,Y as A,b as l}from"./app-D1SDBIop.js";import{s as i}from"./index-sFwGSaal.js";import{B as u}from"./button-7Hd0cb1s.js";import{A as E,D as K,a as T,b as V,c as g}from"./authenticated-layout-CCz5eQ_q.js";import{D as U}from"./DataTable-CTlwiT1d.js";import{C as c,c as x,a as F,b as q}from"./card-SIQLewJN.js";import{D,a as B,b as S,c as I,d as H,e as G}from"./dialog-CzE-osex.js";import{B as d}from"./badge-B2pD0yQA.js";import{L as p}from"./label-Mi81xqvw.js";import{I as W}from"./input-B3m-7Gcr.js";import{U as _,B as R}from"./users-BytQ2UPK.js";import{E as Y}from"./ellipsis-DuWf100E.js";import{E as J}from"./eye-DIUvHSTv.js";import{S as Q}from"./square-pen-Dy-mR3_4.js";import{K as X}from"./key-CV0eMilG.js";import{T as Z}from"./trash-2-DHIUmDlX.js";import"./separator-CTLkRMH0.js";import"./index-D1s9PUES.js";import"./sun-Dezua4s8.js";import"./log-out-BkyLan4n.js";import"./table-lA51mLPw.js";function ye({organizations:j,student:$,supporter:ee}){var v,f,N,y,k,w,C,L;const o=Array.isArray(j)?j:[],[s,b]=M.useState(null),[m,h]=M.useState(null),t=P({password:"",password_confirmation:""}),O=[{header:"ID",accessorKey:"id"},{header:"Name",accessorKey:"name"},{header:"Email",accessorKey:"email"},{header:"Phone",accessorKey:"phone"},{header:"City",accessorKey:"city"},{header:"Country",accessorKey:"country"},{header:"Students",cell:({row:r})=>{var a;return e.jsxs(l,{className:"inline-flex items-center gap-1 text-blue-600 hover:underline",href:i("admin.students.index",{organization_id:r.original.id}),children:[e.jsx(_,{className:"w-4 h-4 text-muted-foreground/50"}),e.jsx("span",{className:"text-muted-foreground",children:((a=r.original.students)==null?void 0:a.length)??0})]})}},{header:"Supporters",cell:({row:r})=>{var a;return e.jsxs(l,{className:"inline-flex items-center gap-1 text-blue-600 hover:underline",href:i("admin.supporters.index",{organization_id:r.original.id}),children:[e.jsx(_,{className:"w-4 h-4 text-muted-foreground/50"}),e.jsx("span",{className:"text-muted-foreground",children:((a=r.original.supporters)==null?void 0:a.length)??0})]})}},{header:"Clubs",cell:({row:r})=>{var z;const a=((z=r.original.clubs)==null?void 0:z.length)||0,n=r.original.id;return e.jsxs(l,{className:"inline-flex items-center gap-1 text-blue-600 hover:underline",href:i("admin.clubs.index",{organization_id:n}),children:[e.jsx(R,{className:"w-4 h-4 text-muted-foreground/50"}),e.jsx("span",{className:"text-muted-foreground",children:a})]})}},{header:"Status",accessorKey:"status",cell:({row:r})=>e.jsx(d,{variant:r.original.status?"default":"destructive",children:r.original.status?"Active":"Inactive"})},{header:"Default Currency",accessorKey:"default_currency",cell:({row:r})=>{const a=r.original.default_currency;return a?e.jsx(d,{variant:"outline",className:"font-mono",children:a}):e.jsx("span",{className:"text-gray-400",children:"Not set"})}},{header:"Actions",cell:({row:r})=>e.jsxs(K,{children:[e.jsx(T,{asChild:!0,children:e.jsx(u,{variant:"ghost",size:"icon",className:"h-8 w-8",children:e.jsx(Y,{className:"h-4 w-4"})})}),e.jsxs(V,{align:"end",children:[e.jsxs(g,{onClick:()=>b(r.original),children:[e.jsx(J,{className:"w-4 h-4 mr-2"})," View"]}),e.jsx(g,{asChild:!0,children:e.jsxs(l,{href:i("admin.organizations.edit",r.original.id),children:[e.jsx(Q,{className:"w-4 h-4 mr-2"})," Edit"]})}),e.jsxs(g,{onClick:()=>h(r.original),children:[e.jsx(X,{className:"w-4 h-4 mr-2"})," Change Password"]}),e.jsx(g,{asChild:!0,children:e.jsxs(l,{href:i("admin.organizations.destroy",r.original.id),method:"delete",as:"button",children:[e.jsx(Z,{className:"w-4 h-4 mr-2"})," Delete"]})})]})]})}];return e.jsxs(E,{header:"Ahli Gabungan",children:[e.jsx(A,{title:"Organizations"}),e.jsxs("div",{className:"container mx-auto py-10",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[e.jsx(c,{children:e.jsx(x,{className:"p-6",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx("svg",{className:"h-4 w-4 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"})})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Students"}),e.jsx("p",{className:"text-2xl font-bold",children:Number(o.reduce((r,a)=>{var n;return r+Number(((n=a.students)==null?void 0:n.length)||0)},0))})]})]})})}),e.jsx(c,{children:e.jsx(x,{className:"p-6",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx("svg",{className:"h-4 w-4 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Instructors"}),e.jsx("p",{className:"text-2xl font-bold",children:Number(o.reduce((r,a)=>{var n;return r+Number(((n=a.instructors)==null?void 0:n.length)||0)},0))})]})]})})}),e.jsx(c,{children:e.jsx(x,{className:"p-6",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:e.jsx("svg",{className:"h-4 w-4 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Clubs"}),e.jsx("p",{className:"text-2xl font-bold",children:Number(o.reduce((r,a)=>{var n;return r+Number(((n=a.clubs)==null?void 0:n.length)||0)},0))})]})]})})}),e.jsx(c,{children:e.jsx(x,{className:"p-6",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"p-2 bg-orange-100 rounded-lg",children:e.jsx("svg",{className:"h-4 w-4 text-orange-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Supporters"}),e.jsx("p",{className:"text-2xl font-bold",children:Number(o.reduce((r,a)=>{var n;return r+Number(((n=a.supporters)==null?void 0:n.length)||0)},0))})]})]})})})]}),e.jsxs(c,{children:[e.jsxs(F,{className:"flex flex-row items-center justify-between",children:[e.jsx(q,{children:"Organizations"}),e.jsx(l,{href:i("admin.organizations.create"),children:e.jsx(u,{children:"Add Supporter"})})]}),e.jsx(x,{children:e.jsx(U,{columns:O,data:o})})]}),s&&e.jsx(D,{open:!!s,onOpenChange:r=>{r||b(null)},children:e.jsxs(B,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(S,{children:[e.jsx(I,{children:"Organization Details"}),e.jsx(H,{children:"View detailed information about the organization."})]}),s&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex justify-center",children:e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx("div",{className:"w-32 h-32 flex items-center justify-center rounded-full bg-primary/10 text-primary text-4xl font-bold border-2 border-primary/20 shadow-lg",children:s.name.charAt(0).toUpperCase()}),e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"font-semibold text-xl",children:s.name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Organization ID:"," ",s.id]})]})]})}),e.jsx("div",{className:"grid grid-cols-2 gap-4",children:[{label:"Email",value:s.email||"Not specified"},{label:"Phone",value:s.phone||"Not specified"},{label:"City",value:s.city||"Not specified"},{label:"Country",value:s.country||"Not specified"},{label:"Street",value:s.street||"Not specified"},{label:"Postal Code",value:s.postal_code||"Not specified"},{label:"Website",value:s.website?e.jsx("a",{href:s.website,target:"_blank",rel:"noopener noreferrer",className:"text-primary underline hover:text-primary/80",children:s.website}):"Not specified"},{label:"Status",value:e.jsx(d,{variant:s.status?"default":"destructive",children:s.status?"Active":"Inactive"})}].map((r,a)=>e.jsxs("div",{className:"space-y-1",children:[e.jsx(p,{className:"text-sm font-medium text-muted-foreground",children:r.label}),e.jsx("div",{className:"text-sm",children:r.value})]},a))}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-xl p-4 bg-gray-50/50 dark:bg-gray-800/50",children:[e.jsxs("h5",{className:"font-semibold mb-3 text-blue-600 dark:text-blue-400 flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"})}),"Students (",((v=s.students)==null?void 0:v.length)||0,")"]}),e.jsx("div",{className:"max-h-40 overflow-y-auto",children:((f=s.students)==null?void 0:f.length)>0?e.jsx("div",{className:"space-y-2",children:s.students.map(r=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white dark:bg-gray-700 rounded-lg border border-gray-200 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors duration-150",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:r.name}),e.jsxs(d,{variant:"outline",className:"text-xs bg-blue-50 dark:bg-blue-950/50 text-blue-700 dark:text-blue-300 border-blue-200 dark:border-blue-800",children:["ID:"," ",r.id]})]},r.id))}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx("svg",{className:"w-12 h-12 mx-auto text-gray-400 dark:text-gray-500 mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"})}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 italic",children:"No students found"})]})})]}),e.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-xl p-4 bg-gray-50/50 dark:bg-gray-800/50",children:[e.jsxs("h5",{className:"font-semibold mb-3 text-green-600 dark:text-green-400 flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),"Instructors (",((N=s.instructors)==null?void 0:N.length)||0,")"]}),e.jsx("div",{className:"max-h-40 overflow-y-auto",children:((y=s.instructors)==null?void 0:y.length)>0?e.jsx("div",{className:"space-y-2",children:s.instructors.map(r=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white dark:bg-gray-700 rounded-lg border border-gray-200 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors duration-150",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:r.name}),r.grade&&e.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:["Grade:"," ",r.grade]})]}),e.jsxs(d,{variant:"outline",className:"text-xs bg-green-50 dark:bg-green-950/50 text-green-700 dark:text-green-300 border-green-200 dark:border-green-800",children:["ID:"," ",r.id]})]},r.id))}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx("svg",{className:"w-12 h-12 mx-auto text-gray-400 dark:text-gray-500 mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 italic",children:"No instructors found"})]})})]}),e.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-xl p-4 bg-gray-50/50 dark:bg-gray-800/50",children:[e.jsxs("h5",{className:"font-semibold mb-3 text-purple-600 dark:text-purple-400 flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),"Clubs (",((k=s.clubs)==null?void 0:k.length)||0,")"]}),e.jsx("div",{className:"max-h-40 overflow-y-auto",children:((w=s.clubs)==null?void 0:w.length)>0?e.jsx("div",{className:"space-y-2",children:s.clubs.map(r=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white dark:bg-gray-700 rounded-lg border border-gray-200 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors duration-150",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:r.name}),r.city&&e.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:[r.city,","," ",r.country]})]}),e.jsxs(d,{variant:"outline",className:"text-xs bg-purple-50 dark:bg-purple-950/50 text-purple-700 dark:text-purple-300 border-purple-200 dark:border-purple-800",children:["ID:"," ",r.id]})]},r.id))}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx("svg",{className:"w-12 h-12 mx-auto text-gray-400 dark:text-gray-500 mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 italic",children:"No clubs found"})]})})]}),e.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-xl p-4 bg-gray-50/50 dark:bg-gray-800/50",children:[e.jsxs("h5",{className:"font-semibold mb-3 text-orange-600 dark:text-orange-400 flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})}),"Supporters (",((C=s.supporters)==null?void 0:C.length)||0,")"]}),e.jsx("div",{className:"max-h-40 overflow-y-auto",children:((L=s.supporters)==null?void 0:L.length)>0?e.jsx("div",{className:"space-y-2",children:s.supporters.map(r=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white dark:bg-gray-700 rounded-lg border border-gray-200 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors duration-150",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:r.name}),e.jsxs(d,{variant:"outline",className:"text-xs bg-orange-50 dark:bg-orange-950/50 text-orange-700 dark:text-orange-300 border-orange-200 dark:border-orange-800",children:["ID:"," ",r.id]})]},r.id))}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx("svg",{className:"w-12 h-12 mx-auto text-gray-400 dark:text-gray-500 mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 italic",children:"No supporters found"})]})})]})]})]})]})}),m&&e.jsx(D,{open:!!m,onOpenChange:r=>{r||(h(null),t.reset())},children:e.jsxs(B,{children:[e.jsxs(S,{children:[e.jsx(I,{children:"Change Password"}),e.jsxs(H,{children:["Update password for"," ",m.name]})]}),e.jsxs("form",{onSubmit:r=>{r.preventDefault(),t.patch(i("admin.organizations.updatePassword",m.id),{onSuccess:()=>{h(null),t.reset()}})},className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs(p,{htmlFor:"password",children:["New Password"," ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(W,{id:"password",type:"password",placeholder:"Enter new password",value:t.data.password,onChange:r=>t.setData("password",r.target.value),required:!0}),t.errors.password&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:t.errors.password})]}),e.jsxs("div",{children:[e.jsxs(p,{htmlFor:"password_confirmation",children:["Confirm Password"," ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(W,{id:"password_confirmation",type:"password",placeholder:"Confirm new password",value:t.data.password_confirmation,onChange:r=>t.setData("password_confirmation",r.target.value),required:!0}),t.errors.password_confirmation&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:t.errors.password_confirmation})]}),e.jsxs(G,{children:[e.jsx(u,{type:"button",variant:"outline",onClick:()=>{h(null),t.reset()},children:"Cancel"}),e.jsx(u,{type:"submit",disabled:t.processing,children:t.processing?"Updating...":"Update Password"})]})]})]})})]})]})}export{ye as default};
