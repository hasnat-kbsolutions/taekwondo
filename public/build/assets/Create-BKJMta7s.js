import{q as y,r as C,j as e,Y as g,y as b}from"./app-DonfvVoW.js";import{A as N}from"./authenticated-layout-CqmZS_hs.js";import{C as S,a as P,b as I,c as D}from"./card-vZUl9tqe.js";import{L as a}from"./label-DmJFbOHp.js";import{I as l}from"./input-Dy_qbc52.js";import{B as c}from"./button-DYztBhfk.js";import{S as o,a as d,b as u,c as m,e as i}from"./select-BXXggIaW.js";import{C as w}from"./calendar-BCmlrXd6.js";import{P as V,a as F,b as M}from"./popover-DTvDaQfx.js";import{C as T}from"./react-icons.esm-Bkepamhy.js";import{f as x}from"./format-LUeNQFBy.js";import"./separator-Bj2Sa2yG.js";import"./index--YW_Mk4_.js";import"./sun-DZbQ5v7_.js";import"./users-puwp-WAo.js";import"./log-out-C0NbFVe-.js";import"./index-Bhx3pFlk.js";import"./index-CzXEmqM7.js";import"./chevron-down-BuTNFib9.js";function $(){const{currencies:h=[],errors:v={}}=y().props,[t,j]=C.useState({name:"",base_amount:"",currency_code:"MYR",is_active:!0,description:"",interval:"monthly",interval_count:"",discount_type:"",discount_value:"",effective_from:""}),n=(r,f)=>j(_=>({..._,[r]:f})),p=r=>{r.preventDefault(),b.post(route("club.plans.store"),{name:t.name,base_amount:t.base_amount,currency_code:t.currency_code,is_active:t.is_active,description:t.description,interval:t.interval,interval_count:t.interval==="custom"?Number(t.interval_count||0):null,discount_type:t.discount_type||null,discount_value:t.discount_value?Number(t.discount_value):0,effective_from:t.effective_from||null})},s=r=>v[r]&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:v[r]});return e.jsxs(N,{header:"Create Plan",children:[e.jsx(g,{title:"Create Plan"}),e.jsx("div",{className:"p-6",children:e.jsxs(S,{children:[e.jsx(P,{children:e.jsx(I,{children:"Create Plan"})}),e.jsx(D,{children:e.jsxs("form",{onSubmit:p,className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(a,{children:"Name"}),e.jsx(l,{value:t.name,onChange:r=>n("name",r.target.value)}),s("name")]}),e.jsxs("div",{children:[e.jsx(a,{children:"Base Amount"}),e.jsx(l,{type:"number",value:t.base_amount,onChange:r=>n("base_amount",r.target.value)}),s("base_amount")]}),e.jsxs("div",{children:[e.jsx(a,{children:"Currency"}),e.jsxs(o,{value:t.currency_code,onValueChange:r=>n("currency_code",r),children:[e.jsx(d,{children:e.jsx(u,{placeholder:"Select Currency"})}),e.jsx(m,{children:h.map(r=>e.jsxs(i,{value:r.code,children:[r.code," - ",r.symbol," ",r.name]},r.code))})]}),s("currency_code")]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx(a,{children:"Description"}),e.jsx(l,{value:t.description,onChange:r=>n("description",r.target.value)}),s("description")]}),e.jsxs("div",{children:[e.jsx(a,{children:"Interval"}),e.jsxs(o,{value:t.interval,onValueChange:r=>n("interval",r),children:[e.jsx(d,{children:e.jsx(u,{placeholder:"Select Interval"})}),e.jsxs(m,{children:[e.jsx(i,{value:"monthly",children:"Monthly"}),e.jsx(i,{value:"quarterly",children:"Quarterly"}),e.jsx(i,{value:"semester",children:"Semester"}),e.jsx(i,{value:"yearly",children:"Yearly"}),e.jsx(i,{value:"custom",children:"Custom (months)"})]})]}),s("interval")]}),t.interval==="custom"&&e.jsxs("div",{children:[e.jsx(a,{children:"Interval Count (months)"}),e.jsx(l,{value:t.interval_count,onChange:r=>n("interval_count",r.target.value),type:"number",min:1}),s("interval_count")]}),e.jsxs("div",{children:[e.jsx(a,{children:"Discount Type"}),e.jsxs(o,{value:t.discount_type||"",onValueChange:r=>n("discount_type",r==="none"?"":r),children:[e.jsx(d,{children:e.jsx(u,{placeholder:"None"})}),e.jsxs(m,{children:[e.jsx(i,{value:"none",children:"None"}),e.jsx(i,{value:"percent",children:"Percent"}),e.jsx(i,{value:"fixed",children:"Fixed"})]})]}),s("discount_type")]}),e.jsxs("div",{children:[e.jsx(a,{children:"Discount Value"}),e.jsx(l,{value:t.discount_value,onChange:r=>n("discount_value",r.target.value),type:"number",min:0}),s("discount_value")]}),e.jsxs("div",{children:[e.jsx(a,{children:"Effective From"}),e.jsxs(V,{children:[e.jsx(F,{asChild:!0,children:e.jsxs(c,{variant:"outline",className:"w-full justify-start text-left font-normal "+(!t.effective_from&&"text-muted-foreground"),children:[e.jsx(T,{className:"mr-2 h-4 w-4"}),t.effective_from?x(new Date(t.effective_from),"PPP"):"Pick a date"]})}),e.jsx(M,{className:"w-auto p-0",children:e.jsx(w,{mode:"single",selected:t.effective_from?new Date(t.effective_from):void 0,onSelect:r=>n("effective_from",r?x(r,"yyyy-MM-dd"):""),initialFocus:!0})})]}),s("effective_from")]}),e.jsxs("div",{className:"col-span-2 flex gap-3",children:[e.jsx(c,{type:"submit",children:"Save"}),e.jsx(c,{type:"button",variant:"outline",onClick:()=>history.back(),children:"Cancel"})]})]})})]})})]})}export{$ as default};
