import{r,j as e,Y as I,b as n,y as C}from"./app-CikEoOUb.js";import{B as f}from"./button-DE34mfwC.js";import{B as L}from"./badge-YCVpdJLF.js";import{A as B,D as K,a as V,b as J,c as u}from"./authenticated-layout-tnqnI4FE.js";import{S as m,a as h,b as x,c as p,e as t}from"./select-D_R4pDbd.js";import{D as $}from"./DataTable-BVsypS1V.js";import{C as w,a as A,b as M,c as D}from"./card-B9gfxKxc.js";import{L as j}from"./label-DFDTJu9O.js";import{E as k}from"./ellipsis-CvJy5PQA.js";import{S as R}from"./square-pen-GySVy4y7.js";import{T as q}from"./trash-2-BzQTabuC.js";import{F as z}from"./file-text-bh0pXV8K.js";import"./input-BghCconx.js";import"./index-CQAMZMT0.js";import"./index-BPaBik1e.js";import"./index-CEUW6_er.js";import"./chevron-down-rq2aknLd.js";import"./table-BDtgScpB.js";const H=[{header:"#",cell:({row:a})=>a.index+1},{header:"Student",cell:({row:a})=>{var l;return((l=a.original.student)==null?void 0:l.name)||"-"}},{header:"Amount",accessorKey:"amount"},{header:"Status",cell:({row:a})=>e.jsx(L,{variant:a.original.status==="paid"||a.original.status==="success"?"default":"destructive",children:a.original.status})},{header:"Method",accessorKey:"method"},{header:"Payment Month",accessorKey:"payment_month"},{header:"Pay At",accessorKey:"pay_at"},{header:"Actions",cell:({row:a})=>e.jsxs(K,{children:[e.jsx(V,{asChild:!0,children:e.jsx(f,{variant:"ghost",size:"icon",className:"h-8 w-8",children:e.jsx(k,{className:"h-4 w-4"})})}),e.jsxs(J,{align:"end",children:[e.jsx(u,{asChild:!0,children:e.jsxs(n,{href:route("club.payments.edit",a.original.id),children:[e.jsx(R,{className:"w-4 h-4 mr-2"})," Edit"]})}),e.jsx(u,{asChild:!0,children:e.jsxs(n,{href:route("club.payments.destroy",a.original.id),method:"delete",as:"button",children:[e.jsx(q,{className:"w-4 h-4 mr-2"})," Delete"]})}),e.jsx(u,{asChild:!0,children:e.jsxs(n,{href:route("club.payments.invoice",{payment:a.original.id}),children:[e.jsx(z,{className:"w-4 h-4 mr-2"})," Invoice"]})})]})]})}],b=new Date().getFullYear(),O=["All",...Array.from({length:5},(a,l)=>(b-l).toString())],U=[{label:"January",value:"01"},{label:"February",value:"02"},{label:"March",value:"03"},{label:"April",value:"04"},{label:"May",value:"05"},{label:"June",value:"06"},{label:"July",value:"07"},{label:"August",value:"08"},{label:"September",value:"09"},{label:"October",value:"10"},{label:"November",value:"11"},{label:"December",value:"12"}];function he({payments:a,filters:l}){var g,S;const[i,v]=r.useState(l.status||""),[c,y]=r.useState(((g=l.payment_month)==null?void 0:g.split("-")[0])||b.toString()),[d,o]=r.useState(((S=l.payment_month)==null?void 0:S.split("-")[1])||""),P=({year:s,month:N,status:E})=>{const _=s==="All"?"":N?`${s}-${N}`:`${s}-01`;C.get(route("club.payments.index"),{status:E||null,payment_month:_||null},{preserveScroll:!0,preserveState:!0,replace:!0})},[F,T]=r.useState(!0);r.useEffect(()=>{if(F){T(!1);return}P({year:c,month:d,status:i})},[c,d,i]);const Y=()=>{v(""),y(b.toString()),o(""),C.get(route("club.payments.index"),{},{preserveScroll:!0,preserveState:!1,replace:!0})};return e.jsxs(B,{header:"Payments",children:[e.jsx(I,{title:"Payments"}),e.jsxs("div",{className:"container mx-auto py-10 space-y-6",children:[e.jsxs(w,{children:[e.jsx(A,{className:"flex flex-row items-center justify-between",children:e.jsx(M,{children:"Filters"})}),e.jsx(D,{children:e.jsxs("div",{className:"flex items-end gap-4 flex-wrap",children:[e.jsxs("div",{className:"flex flex-col w-[160px]",children:[e.jsx(j,{className:"text-sm mb-1",children:"Year"}),e.jsxs(m,{value:c,onValueChange:s=>{y(s),s==="All"&&o("")},children:[e.jsx(h,{children:e.jsx(x,{placeholder:"Year"})}),e.jsx(p,{children:O.map(s=>e.jsx(t,{value:s,children:s},s))})]})]}),e.jsxs("div",{className:"flex flex-col w-[160px]",children:[e.jsx(j,{className:"text-sm mb-1",children:"Month"}),e.jsxs(m,{value:d,onValueChange:s=>o(s==="all"?"":s),children:[e.jsx(h,{children:e.jsx(x,{placeholder:"Month"})}),e.jsxs(p,{children:[e.jsx(t,{value:"all",children:"All"}),U.map(s=>e.jsx(t,{value:s.value,children:s.label},s.value))]})]})]}),e.jsxs("div",{className:"flex flex-col w-[160px]",children:[e.jsx(j,{className:"text-sm mb-1",children:"Status"}),e.jsxs(m,{value:i,onValueChange:s=>v(s==="all"?"":s),children:[e.jsx(h,{children:e.jsx(x,{placeholder:"All Statuses"})}),e.jsxs(p,{children:[e.jsx(t,{value:"all",children:"All"}),e.jsx(t,{value:"paid",children:"Paid"}),e.jsx(t,{value:"unpaid",children:"Unpaid"})]})]})]}),e.jsx("div",{className:"flex items-end",children:e.jsx(f,{className:"flex flex-wrap items-center gap-2 md:flex-row bg-primary text-background",onClick:Y,children:"Reset Filters"})})]})})]}),e.jsxs(w,{children:[e.jsxs(A,{className:"flex flex-row items-center justify-between",children:[e.jsx(M,{children:"Payments"}),e.jsx(n,{href:route("club.payments.create"),children:e.jsx(f,{children:"Add Payment"})})]}),e.jsx(D,{children:e.jsx($,{data:a,columns:H})})]})]})]})}export{he as default};
