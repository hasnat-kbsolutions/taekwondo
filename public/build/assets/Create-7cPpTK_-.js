import{q as g,r as C,j as e,Y as b,y as S}from"./app-DonfvVoW.js";import{A as N}from"./authenticated-layout-CqmZS_hs.js";import{C as P,a as z,b as I,c as D}from"./card-vZUl9tqe.js";import{L as s}from"./label-DmJFbOHp.js";import{I as l}from"./input-Dy_qbc52.js";import{B as m}from"./button-DYztBhfk.js";import{S as o,a as c,b as d,c as u,e as i}from"./select-BXXggIaW.js";import{C as V}from"./calendar-BCmlrXd6.js";import{P as w,a as F,b as M}from"./popover-DTvDaQfx.js";import{C as T}from"./react-icons.esm-Bkepamhy.js";import{f as h}from"./format-LUeNQFBy.js";import"./separator-Bj2Sa2yG.js";import"./index--YW_Mk4_.js";import"./sun-DZbQ5v7_.js";import"./users-puwp-WAo.js";import"./log-out-C0NbFVe-.js";import"./index-Bhx3pFlk.js";import"./index-CzXEmqM7.js";import"./chevron-down-BuTNFib9.js";function ee(){const{organizations:v=[],currencies:j=[],errors:x={}}=g().props,[r,p]=C.useState({organization_id:"",name:"",base_amount:"",currency_code:"MYR",is_active:!0,description:"",interval:"monthly",interval_count:"",discount_type:"",discount_value:"",effective_from:""}),t=(n,_)=>p(y=>({...y,[n]:_})),f=n=>{n.preventDefault(),S.post(route("admin.plans.store"),{organization_id:r.organization_id,name:r.name,base_amount:r.base_amount,currency_code:r.currency_code,is_active:r.is_active,description:r.description,interval:r.interval,interval_count:r.interval==="custom"?Number(r.interval_count||0):null,discount_type:r.discount_type||null,discount_value:r.discount_value?Number(r.discount_value):0,effective_from:r.effective_from||null})},a=n=>x[n]&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:x[n]});return e.jsxs(N,{header:"Create Plan",children:[e.jsx(b,{title:"Create Plan"}),e.jsx("div",{className:"p-6",children:e.jsxs(P,{children:[e.jsx(z,{children:e.jsx(I,{children:"Create Plan"})}),e.jsx(D,{children:e.jsxs("form",{onSubmit:f,className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs(s,{children:["Organization",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs(o,{value:r.organization_id,onValueChange:n=>t("organization_id",n),children:[e.jsx(c,{children:e.jsx(d,{placeholder:"Select Organization"})}),e.jsx(u,{children:v.map(n=>e.jsx(i,{value:String(n.id),children:n.name},n.id))})]}),a("organization_id")]}),e.jsxs("div",{children:[e.jsx(s,{children:"Name"}),e.jsx(l,{value:r.name,onChange:n=>t("name",n.target.value)}),a("name")]}),e.jsxs("div",{children:[e.jsx(s,{children:"Base Amount"}),e.jsx(l,{type:"number",value:r.base_amount,onChange:n=>t("base_amount",n.target.value)}),a("base_amount")]}),e.jsxs("div",{children:[e.jsx(s,{children:"Currency"}),e.jsxs(o,{value:r.currency_code,onValueChange:n=>t("currency_code",n),children:[e.jsx(c,{children:e.jsx(d,{placeholder:"Select Currency"})}),e.jsx(u,{children:j.map(n=>e.jsxs(i,{value:n.code,children:[n.code," - ",n.symbol," ",n.name]},n.code))})]}),a("currency_code")]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx(s,{children:"Description"}),e.jsx(l,{value:r.description,onChange:n=>t("description",n.target.value)}),a("description")]}),e.jsxs("div",{children:[e.jsx(s,{children:"Interval"}),e.jsxs(o,{value:r.interval,onValueChange:n=>t("interval",n),children:[e.jsx(c,{children:e.jsx(d,{placeholder:"Select Interval"})}),e.jsxs(u,{children:[e.jsx(i,{value:"monthly",children:"Monthly"}),e.jsx(i,{value:"quarterly",children:"Quarterly"}),e.jsx(i,{value:"semester",children:"Semester"}),e.jsx(i,{value:"yearly",children:"Yearly"}),e.jsx(i,{value:"custom",children:"Custom (months)"})]})]}),a("interval")]}),r.interval==="custom"&&e.jsxs("div",{children:[e.jsx(s,{children:"Interval Count (months)"}),e.jsx(l,{value:r.interval_count,onChange:n=>t("interval_count",n.target.value),type:"number",min:1}),a("interval_count")]}),e.jsxs("div",{children:[e.jsx(s,{children:"Discount Type"}),e.jsxs(o,{value:r.discount_type||"",onValueChange:n=>t("discount_type",n==="none"?"":n),children:[e.jsx(c,{children:e.jsx(d,{placeholder:"None"})}),e.jsxs(u,{children:[e.jsx(i,{value:"none",children:"None"}),e.jsx(i,{value:"percent",children:"Percent"}),e.jsx(i,{value:"fixed",children:"Fixed"})]})]}),a("discount_type")]}),e.jsxs("div",{children:[e.jsx(s,{children:"Discount Value"}),e.jsx(l,{value:r.discount_value,onChange:n=>t("discount_value",n.target.value),type:"number",min:0}),a("discount_value")]}),e.jsxs("div",{children:[e.jsx(s,{children:"Effective From"}),e.jsxs(w,{children:[e.jsx(F,{asChild:!0,children:e.jsxs(m,{variant:"outline",className:"w-full justify-start text-left font-normal "+(!r.effective_from&&"text-muted-foreground"),children:[e.jsx(T,{className:"mr-2 h-4 w-4"}),r.effective_from?h(new Date(r.effective_from),"PPP"):"Pick a date"]})}),e.jsx(M,{className:"w-auto p-0",children:e.jsx(V,{mode:"single",selected:r.effective_from?new Date(r.effective_from):void 0,onSelect:n=>t("effective_from",n?h(n,"yyyy-MM-dd"):""),initialFocus:!0})})]}),a("effective_from")]}),e.jsxs("div",{className:"col-span-2 flex gap-3",children:[e.jsx(m,{type:"submit",children:"Save"}),e.jsx(m,{type:"button",variant:"outline",onClick:()=>history.back(),children:"Cancel"})]})]})})]})})]})}export{ee as default};
