import{r as t,j as e,Y as O,b as u,y as A}from"./app-gYIPFPXi.js";import{B as i}from"./button-DfQjdSuc.js";import{B as R}from"./badge-DRc0qwwB.js";import{A as H,D as U,a as $,b as z,c as m}from"./authenticated-layout-BYLnZGXD.js";import{S as x,a as p,b as j,c as y,e as l}from"./select-BcI28XTK.js";import{D as q,a as G,d as Q,b as W,c as X,e as Z}from"./dialog-C-QiQU5y.js";import{D as ee}from"./DataTable-CViHcuYQ.js";import{C as P,a as w,b as _,c as E}from"./card-G2xcJWQM.js";import{L as g}from"./label-BoxIKn2v.js";import{E as se}from"./ellipsis-BbKLegi2.js";import"./input-B-R5K4jk.js";import"./index-CLbCPIar.js";import"./index-CD8e43-c.js";import"./index-DuFLIuYL.js";import"./chevron-down-DowfpiUd.js";import"./table-B8RkWeCc.js";const v=new Date().getFullYear(),ae=Array.from({length:5},(f,n)=>(v-n).toString()),te=[{label:"January",value:"01"},{label:"February",value:"02"},{label:"March",value:"03"},{label:"April",value:"04"},{label:"May",value:"05"},{label:"June",value:"06"},{label:"July",value:"07"},{label:"August",value:"08"},{label:"September",value:"09"},{label:"October",value:"10"},{label:"November",value:"11"},{label:"December",value:"12"}];function fe({payments:f,filters:n}){var D,M,N;const[c,b]=t.useState(n.status||""),[d,S]=t.useState(((D=n.payment_month)==null?void 0:D.split("-")[0])||v.toString()),[o,C]=t.useState(((M=n.payment_month)==null?void 0:M.split("-")[1])||""),[a,F]=t.useState(null),[Y,h]=t.useState(!1),L=s=>{F(s),h(!0)},T=({year:s,month:r,status:K})=>{const J=s&&r?`${s}-${r}`:"";A.get(route("admin.payments.index"),{status:K||null,payment_month:J||null},{preserveScroll:!0,preserveState:!0,replace:!0})},[V,k]=t.useState(!0);t.useEffect(()=>{if(V){k(!1);return}T({year:d,month:o,status:c})},[d,o,c]);const B=()=>{b(""),S(v.toString()),C(""),A.get(route("admin.payments.index"),{},{preserveScroll:!0,preserveState:!1,replace:!0})},I=[{header:"#",cell:({row:s})=>s.index+1},{header:"Student",cell:({row:s})=>{var r;return((r=s.original.student)==null?void 0:r.name)||"-"}},{header:"Amount",accessorKey:"amount"},{header:"Status",cell:({row:s})=>e.jsx(R,{variant:s.original.status==="paid"||s.original.status==="success"?"default":"destructive",children:s.original.status})},{header:"Method",accessorKey:"method"},{header:"Payment Month",accessorKey:"payment_month"},{header:"Pay At",accessorKey:"pay_at"},{header:"Actions",cell:({row:s})=>e.jsxs(U,{children:[e.jsx($,{asChild:!0,children:e.jsx(i,{variant:"ghost",size:"icon",className:"h-8 w-8",children:e.jsx(se,{className:"h-4 w-4"})})}),e.jsxs(z,{align:"end",children:[e.jsx(m,{onClick:()=>L(s.original),children:"View"}),e.jsx(m,{asChild:!0,children:e.jsx(u,{href:route("admin.payments.edit",s.original.id),children:"Edit"})}),e.jsx(m,{asChild:!0,children:e.jsx(u,{href:route("admin.payments.destroy",s.original.id),method:"delete",as:"button",children:"Delete"})})]})]})}];return e.jsxs(H,{header:"Payments",children:[e.jsx(O,{title:"Payments"}),e.jsxs("div",{className:"container mx-auto py-10 space-y-6",children:[e.jsxs(P,{children:[e.jsx(w,{children:e.jsx(_,{children:"Filters"})}),e.jsx(E,{children:e.jsxs("div",{className:"flex items-end gap-4 flex-wrap",children:[e.jsxs("div",{className:"flex flex-col w-[160px]",children:[e.jsx(g,{className:"text-sm mb-1",children:"Year"}),e.jsxs(x,{value:d,onValueChange:S,children:[e.jsx(p,{children:e.jsx(j,{placeholder:"Year"})}),e.jsx(y,{children:ae.map(s=>e.jsx(l,{value:s,children:s},s))})]})]}),e.jsxs("div",{className:"flex flex-col w-[160px]",children:[e.jsx(g,{className:"text-sm mb-1",children:"Month"}),e.jsxs(x,{value:o,onValueChange:s=>C(s==="all"?"":s),children:[e.jsx(p,{children:e.jsx(j,{placeholder:"Month"})}),e.jsxs(y,{children:[e.jsx(l,{value:"all",children:"All"}),te.map(s=>e.jsx(l,{value:s.value,children:s.label},s.value))]})]})]}),e.jsxs("div",{className:"flex flex-col w-[160px]",children:[e.jsx(g,{className:"text-sm mb-1",children:"Status"}),e.jsxs(x,{value:c,onValueChange:s=>b(s==="all"?"":s),children:[e.jsx(p,{children:e.jsx(j,{placeholder:"All Statuses"})}),e.jsxs(y,{children:[e.jsx(l,{value:"all",children:"All"}),e.jsx(l,{value:"paid",children:"Paid"}),e.jsx(l,{value:"unpaid",children:"Unpaid"})]})]})]}),e.jsx("div",{className:"flex items-end",children:e.jsx(i,{onClick:B,children:"Reset Filters"})})]})})]}),e.jsxs(P,{children:[e.jsxs(w,{className:"flex flex-row items-center justify-between",children:[e.jsx(_,{children:"Payments"}),e.jsx(u,{href:route("admin.payments.create"),children:e.jsx(i,{children:"Add Payment"})})]}),e.jsx(E,{children:e.jsx(ee,{data:f,columns:I})})]}),e.jsx(q,{open:Y,onOpenChange:h,children:e.jsxs(G,{children:[e.jsxs(Q,{children:[e.jsx(W,{children:"Edit Payment"}),e.jsx(X,{children:"Update payment details like amount and status."})]}),a&&e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Student:"})," ",(N=a.student)==null?void 0:N.name]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Amount:"})," RM"," ",a.amount]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Status:"})," ",a.status]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Method:"})," ",a.method]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Payment Month:"})," ",a.payment_month]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Pay At:"})," ",a.pay_at]}),a.notes&&e.jsxs("p",{children:[e.jsx("strong",{children:"Notes:"})," ",a.notes]})]}),e.jsx(Z,{children:e.jsx(i,{onClick:()=>h(!1),children:"Close"})})]})})]})]})}export{fe as default};
