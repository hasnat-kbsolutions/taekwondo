import{r as u,j as e,Y as E,b as _,y as m}from"./app-BCeOW9N9.js";import{D as I}from"./DataTable-Cvsj2WMj.js";import{B as j}from"./button-BJ6mlj7e.js";import{C as B,a as K,b as M,c as R}from"./card-VXQ6T6DP.js";import{A as V,D as L,a as F,b as k,c as C}from"./authenticated-layout-BDVPFE6k.js";import{L as x}from"./label-BgqE86Fs.js";import{S,a as b,b as A,c as w,e as o}from"./select-CNHaQc9V.js";import{C as D}from"./country-dropdown-Dx9arI5R.js";import{B as P}from"./badge-CU-JtyUY.js";import{R as U}from"./RatingStars-BkZpjcIX.js";import{E as H}from"./ellipsis-D-9Nm7cQ.js";import{T as O}from"./trash-2-hW1F2hEJ.js";import"./table-BvvKhhch.js";import"./input-BpihmCmf.js";import"./separator-BVeLWKCp.js";import"./index-C1m5ObQF.js";import"./sun-HQaehw-B.js";import"./users-BZ-atLCR.js";import"./log-out-g_pGI50i.js";import"./index-Dd0VXab7.js";import"./index-De3ioJU_.js";import"./chevron-down-mX2uQkHH.js";import"./dialog-8Rhv4OVu.js";import"./popover-CQyvMx5-.js";import"./globe-AX0tMp2N.js";const W=(c,h=!1)=>{const p=[{header:"#",cell:({row:s})=>s.index+1},{id:"profile_image",header:"Photo",cell:({row:s})=>{const r=s.original.profile_image;if(r){const l=r.startsWith("http")?r:`/storage/${r}`;return e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:l,alt:"Profile",className:"w-10 h-10 rounded-full object-cover",onError:i=>{var n;i.currentTarget.style.display="none",(n=i.currentTarget.nextElementSibling)==null||n.classList.remove("hidden")}}),e.jsx("span",{className:"text-gray-400 italic text-xs hidden absolute inset-0 flex items-center justify-center",children:"No image"})]})}return e.jsx("span",{className:"text-gray-400 italic",children:"No image"})}},{accessorKey:"code",header:"Code"},{accessorKey:"name",header:"Name"},{accessorKey:"surname",header:"Surname"},{accessorKey:"dob",header:"DOB"},{id:"rating",header:"Rating",cell:({row:s})=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(U,{rating:typeof s.original.average_rating=="number"?Math.round(s.original.average_rating):0,readonly:!0,size:"sm"}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:["(",s.original.total_ratings,")"]})]})},{accessorKey:"status",header:"Status",cell:({row:s})=>e.jsx(P,{variant:s.original.status?"default":"destructive",children:s.original.status?"Active":"Inactive"})}];return h||p.push({id:"actions",header:"Actions",cell:({row:s})=>e.jsxs(L,{children:[e.jsx(F,{asChild:!0,children:e.jsx(j,{variant:"ghost",size:"sm",children:e.jsx(H,{className:"w-4 h-4"})})}),e.jsxs(k,{align:"end",children:[e.jsx(C,{asChild:!0,children:e.jsx(_,{href:route("organization.students.edit",s.original.id),children:"Edit"})}),e.jsxs(C,{onClick:()=>{c&&confirm("Are you sure you want to delete this student?")&&c(s.original)},className:"text-red-600",children:[e.jsx(O,{className:"w-4 h-4 mr-2"}),"Delete"]})]})]})}),p};function ge({students:c,clubs:h=[],nationalities:p=[],countries:s=[],filters:r}){const[l,i]=u.useState(r.club_id||""),[n,g]=u.useState(r.nationality||""),[f,y]=u.useState(r.country||""),[v,N]=u.useState(r.status||""),d=t=>{m.get(route("organization.students.index"),{club_id:t.club_id??(l||null),nationality:t.nationality??(n||null),country:t.country??(f||null),status:t.status??(v||null)},{preserveScroll:!0,preserveState:!0,replace:!0})},z=()=>{i(""),g(""),y(""),N(""),m.get(route("organization.students.index"),{},{preserveScroll:!0,preserveState:!1,replace:!0})},T=t=>{m.delete(route("organization.students.destroy",t.id),{onSuccess:()=>{m.visit(route("organization.students.index"))}})};return e.jsxs(V,{header:"Students",children:[e.jsx(E,{title:"Students"}),e.jsx("div",{className:"container mx-auto py-10",children:e.jsxs(B,{children:[e.jsxs(K,{className:"flex flex-row items-center justify-between",children:[e.jsx(M,{children:"Students"}),!l&&e.jsx(_,{href:route("organization.students.create"),children:e.jsx(j,{children:"Add Student"})})]}),e.jsxs(R,{children:[e.jsx("div",{className:"mb-6 p-4 border rounded-lg bg-muted/50",children:e.jsxs("div",{className:"flex items-end gap-4 flex-wrap",children:[e.jsxs("div",{className:"flex flex-col w-[200px]",children:[e.jsx(x,{className:"text-sm mb-1",children:"Club"}),e.jsxs(S,{value:l,onValueChange:t=>{const a=t==="all"?"":t;i(a),d({club_id:a})},children:[e.jsx(b,{children:e.jsx(A,{placeholder:"All Clubs"})}),e.jsxs(w,{children:[e.jsx(o,{value:"all",children:"All"}),h.map(t=>e.jsx(o,{value:t.id.toString(),children:t.name},t.id))]})]})]}),e.jsxs("div",{className:"w-[200px]",children:[e.jsx(x,{className:"text-sm mb-1",children:"Nationality"}),e.jsx(D,{placeholder:"All Nationalities",defaultValue:n||"",onChange:t=>{const a=(t==null?void 0:t.alpha3)||"";g(a),d({nationality:a})},slim:!1})]}),e.jsxs("div",{className:"w-[200px]",children:[e.jsx(x,{className:"text-sm mb-1",children:"Country"}),e.jsx(D,{placeholder:"All Countries",defaultValue:f||"",onChange:t=>{const a=(t==null?void 0:t.alpha3)||"";y(a),d({country:a})}})]}),e.jsxs("div",{className:"flex flex-col w-[200px]",children:[e.jsx(x,{className:"text-sm mb-1",children:"Status"}),e.jsxs(S,{value:v,onValueChange:t=>{const a=t==="all"?"":t;N(a),d({status:a})},children:[e.jsx(b,{children:e.jsx(A,{placeholder:"All Statuses"})}),e.jsxs(w,{children:[e.jsx(o,{value:"all",children:"All"}),e.jsx(o,{value:"active",children:"Active"}),e.jsx(o,{value:"inactive",children:"Inactive"})]})]})]}),e.jsx("div",{className:"flex items-end",children:e.jsx(j,{variant:"secondary",onClick:z,children:"Reset Filters"})})]})}),e.jsx(I,{columns:W(T,!!l),data:c})]})]})})]})}export{W as columns,ge as default};
