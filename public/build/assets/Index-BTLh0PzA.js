import{j as e,r as o,Y as I,b as B,y}from"./app-CNLR0DIp.js";import{D as K}from"./DataTable-CsTW4IjW.js";import{B as S}from"./button-BFvzOohO.js";import{C as R,a as T,b as V,c as z}from"./card-A51GI-p_.js";import{A as D}from"./authenticated-layout-DutDL5IX.js";import{L as c}from"./label-DDNeWs3Y.js";import{S as N,a as b,b as C,c as A,e as i}from"./select-B8yE-HKp.js";import{C as _}from"./country-dropdown-uPHNdNut.js";import{B as E}from"./badge-sCvS2-u3.js";import{R as L}from"./RatingStars-C5OBqOfM.js";import"./table-5fSRAYSM.js";import"./input-BdDHIpxK.js";import"./separator-DTrM_Ru7.js";import"./index-BswMLaOF.js";import"./sun-CboAYruK.js";import"./users-CUo-C-vI.js";import"./log-out-B1kDetli.js";import"./index-RVYuYhkN.js";import"./index-CwCbuvh8.js";import"./chevron-down-Di6Iui4y.js";import"./dialog-C8esMiQc.js";import"./popover-PMlw8EkZ.js";import"./globe-DcoQSsuT.js";const F=()=>[{header:"#",cell:({row:s})=>s.index+1},{id:"profile_image",header:"Photo",cell:({row:s})=>{const r=s.original.profile_image;if(r){const u=r.startsWith("http")?r:`/storage/${r}`;return e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:u,alt:"Profile",className:"w-10 h-10 rounded-full object-cover",onError:d=>{var l;d.currentTarget.style.display="none",(l=d.currentTarget.nextElementSibling)==null||l.classList.remove("hidden")}}),e.jsx("span",{className:"text-gray-400 italic text-xs hidden absolute inset-0 flex items-center justify-center",children:"No image"})]})}return e.jsx("span",{className:"text-gray-400 italic",children:"No image"})}},{accessorKey:"code",header:"Code"},{accessorKey:"name",header:"Name"},{accessorKey:"surname",header:"Surname"},{accessorKey:"dob",header:"DOB"},{id:"rating",header:"Rating",cell:({row:s})=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(L,{rating:typeof s.original.average_rating=="number"?Math.round(s.original.average_rating):0,readonly:!0,size:"sm"}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:["(",s.original.total_ratings,")"]})]})},{accessorKey:"status",header:"Status",cell:({row:s})=>e.jsx(E,{variant:s.original.status?"default":"destructive",children:s.original.status?"Active":"Inactive"})}];function oe({students:s,clubs:r=[],nationalities:u=[],countries:d=[],filters:l}){const[m,x]=o.useState(l.club_id||""),[h,p]=o.useState(l.nationality||""),[j,g]=o.useState(l.country||""),[f,v]=o.useState(l.status||""),n=t=>{y.get(route("organization.students.index"),{club_id:t.club_id??(m||null),nationality:t.nationality??(h||null),country:t.country??(j||null),status:t.status??(f||null)},{preserveScroll:!0,preserveState:!0,replace:!0})},w=()=>{x(""),p(""),g(""),v(""),y.get(route("organization.students.index"),{},{preserveScroll:!0,preserveState:!1,replace:!0})};return e.jsxs(D,{header:"Students",children:[e.jsx(I,{title:"Students"}),e.jsx("div",{className:"container mx-auto py-10",children:e.jsxs(R,{children:[e.jsxs(T,{className:"flex flex-row items-center justify-between",children:[e.jsx(V,{children:"Students"}),e.jsx(B,{href:route("organization.students.create"),children:e.jsx(S,{children:"Add Student"})})]}),e.jsxs(z,{children:[e.jsx("div",{className:"mb-6 p-4 border rounded-lg bg-muted/50",children:e.jsxs("div",{className:"flex items-end gap-4 flex-wrap",children:[e.jsxs("div",{className:"flex flex-col w-[200px]",children:[e.jsx(c,{className:"text-sm mb-1",children:"Club"}),e.jsxs(N,{value:m,onValueChange:t=>{const a=t==="all"?"":t;x(a),n({club_id:a})},children:[e.jsx(b,{children:e.jsx(C,{placeholder:"All Clubs"})}),e.jsxs(A,{children:[e.jsx(i,{value:"all",children:"All"}),r.map(t=>e.jsx(i,{value:t.id.toString(),children:t.name},t.id))]})]})]}),e.jsxs("div",{className:"w-[200px]",children:[e.jsx(c,{className:"text-sm mb-1",children:"Nationality"}),e.jsx(_,{placeholder:"All Nationalities",defaultValue:h||"",onChange:t=>{const a=(t==null?void 0:t.alpha3)||"";p(a),n({nationality:a})},slim:!1})]}),e.jsxs("div",{className:"w-[200px]",children:[e.jsx(c,{className:"text-sm mb-1",children:"Country"}),e.jsx(_,{placeholder:"All Countries",defaultValue:j||"",onChange:t=>{const a=(t==null?void 0:t.alpha3)||"";g(a),n({country:a})}})]}),e.jsxs("div",{className:"flex flex-col w-[200px]",children:[e.jsx(c,{className:"text-sm mb-1",children:"Status"}),e.jsxs(N,{value:f,onValueChange:t=>{const a=t==="all"?"":t;v(a),n({status:a})},children:[e.jsx(b,{children:e.jsx(C,{placeholder:"All Statuses"})}),e.jsxs(A,{children:[e.jsx(i,{value:"all",children:"All"}),e.jsx(i,{value:"active",children:"Active"}),e.jsx(i,{value:"inactive",children:"Inactive"})]})]})]}),e.jsx("div",{className:"flex items-end",children:e.jsx(S,{variant:"secondary",onClick:w,children:"Reset Filters"})})]})}),e.jsx(K,{columns:F(),data:s})]})]})})]})}export{F as columns,oe as default};
