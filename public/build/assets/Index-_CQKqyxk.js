import{r as x,j as e,Y as H,b as j,y as _}from"./app-CHTahs9w.js";import{B as A}from"./button-61_i5sA_.js";import{B as K}from"./badge-DTr8z6D6.js";import{A as O,B as q,D as z,a as U,b as G,c as v}from"./authenticated-layout-B6_x2nFS.js";import{S as y,a as N,b as w,c as S,e as n}from"./select-DIgUbpof.js";import{D as Q}from"./DataTable-Db_gAYj4.js";import{C as i,a as c,b as d,c as o}from"./card-BVi_isWq.js";import{L as M}from"./label-nHQe9Kkw.js";import{D as E}from"./dollar-sign-BIRjyIa-.js";import{H as W}from"./hourglass-CMoFF1ql.js";import{E as X}from"./ellipsis-DipZZAEw.js";import{S as Z}from"./square-pen-BIcXFkcu.js";import{T as B}from"./trash-2-CX0mI5Tr.js";import{F as ee}from"./file-text-DpdobSdH.js";import"./input-CUTqb1li.js";import"./separator-Dz2BaDO3.js";import"./index-Bi5xXDMA.js";import"./sun-BU1_nhbK.js";import"./users-kcFiN24-.js";import"./log-out-phlCMelP.js";import"./index-cg3SeDw5.js";import"./index-CYDQTcHE.js";import"./chevron-down-DKEUU5xW.js";import"./table-D8s5HKRf.js";const P=(l,a="MYR")=>{const t=Number(l)||0;return a==="JPY"?t.toLocaleString():t.toFixed(2)},se=[{header:"#",cell:({row:l})=>l.index+1},{header:"Student",cell:({row:l})=>{var a;return((a=l.original.student)==null?void 0:a.name)||"-"}},{header:"Amount",cell:({row:l})=>{var h;const a=((h=l.original.currency)==null?void 0:h.symbol)||"RM",t=l.original.currency_code||"MYR";return`${a} ${P(l.original.amount,t)}`}},{header:"Status",cell:({row:l})=>e.jsx(K,{variant:l.original.status==="paid"||l.original.status==="success"?"default":"destructive",children:l.original.status})},{header:"Method",accessorKey:"method"},{header:"Payment Month",accessorKey:"payment_month"},{header:"Pay At",accessorKey:"pay_at"},{header:"Actions",cell:({row:l})=>e.jsxs(z,{children:[e.jsx(U,{asChild:!0,children:e.jsx(A,{variant:"ghost",size:"icon",className:"h-8 w-8",children:e.jsx(X,{className:"h-4 w-4"})})}),e.jsxs(G,{align:"end",children:[e.jsx(v,{asChild:!0,children:e.jsxs(j,{href:route("club.payments.edit",l.original.id),children:[e.jsx(Z,{className:"w-4 h-4 mr-2"})," Edit"]})}),e.jsx(v,{asChild:!0,children:e.jsxs(j,{href:route("club.payments.destroy",l.original.id),method:"delete",as:"button",children:[e.jsx(B,{className:"w-4 h-4 mr-2"})," Delete"]})}),e.jsx(v,{asChild:!0,children:e.jsxs(j,{href:route("club.payments.invoice",{payment:l.original.id}),children:[e.jsx(ee,{className:"w-4 h-4 mr-2"})," Invoice"]})})]})]})}],Y=new Date().getFullYear(),le=["All",...Array.from({length:5},(l,a)=>(Y-a).toString())],ae=[{label:"January",value:"01"},{label:"February",value:"02"},{label:"March",value:"03"},{label:"April",value:"04"},{label:"May",value:"05"},{label:"June",value:"06"},{label:"July",value:"07"},{label:"August",value:"08"},{label:"September",value:"09"},{label:"October",value:"10"},{label:"November",value:"11"},{label:"December",value:"12"}];function Ye({payments:l,filters:a,totalPayments:t,paidPayments:h,pendingPayments:L,amountsByCurrency:r,defaultCurrencyCode:m}){var F,T;const[p,D]=x.useState(a.status||""),[f,R]=x.useState(((F=a.payment_month)==null?void 0:F.split("-")[0])||Y.toString()),[b,g]=x.useState(((T=a.payment_month)==null?void 0:T.split("-")[1])||""),I=({year:s,month:u,status:J})=>{const V=s==="All"?"":u?`${s}-${u}`:`${s}-01`;_.get(route("club.payments.index"),{status:J||null,payment_month:V||null},{preserveScroll:!0,preserveState:!0,replace:!0})},[$,k]=x.useState(!0);x.useEffect(()=>{if($){k(!1);return}I({year:f,month:b,status:p})},[f,b,p]);const C=()=>{D(""),R(Y.toString()),g(""),_.get(route("club.payments.index"),{},{preserveScroll:!0,preserveState:!1,replace:!0})};return e.jsxs(O,{header:"Payments",children:[e.jsx(H,{title:"Payments"}),e.jsxs("div",{className:"container mx-auto py-10 space-y-6",children:[e.jsxs(i,{children:[e.jsx(c,{className:"flex flex-row items-center justify-between",children:e.jsx(d,{children:"Filters"})}),e.jsx(o,{children:e.jsxs("div",{className:"flex items-end gap-4 flex-wrap",children:[e.jsxs("div",{className:"flex flex-col w-[160px]",children:[e.jsx(M,{className:"text-sm mb-1",children:"Year"}),e.jsxs(y,{value:f,onValueChange:s=>{R(s),s==="All"&&g("")},children:[e.jsx(N,{children:e.jsx(w,{placeholder:"Year"})}),e.jsx(S,{children:le.map(s=>e.jsx(n,{value:s,children:s},s))})]})]}),e.jsxs("div",{className:"flex flex-col w-[160px]",children:[e.jsx(M,{className:"text-sm mb-1",children:"Month"}),e.jsxs(y,{value:b,onValueChange:s=>g(s==="all"?"":s),children:[e.jsx(N,{children:e.jsx(w,{placeholder:"Month"})}),e.jsxs(S,{children:[e.jsx(n,{value:"all",children:"All"}),ae.map(s=>e.jsx(n,{value:s.value,children:s.label},s.value))]})]})]}),e.jsxs("div",{className:"flex flex-col w-[160px]",children:[e.jsx(M,{className:"text-sm mb-1",children:"Status"}),e.jsxs(y,{value:p,onValueChange:s=>D(s==="all"?"":s),children:[e.jsx(N,{children:e.jsx(w,{placeholder:"All Statuses"})}),e.jsxs(S,{children:[e.jsx(n,{value:"all",children:"All"}),e.jsx(n,{value:"paid",children:"Paid"}),e.jsx(n,{value:"unpaid",children:"Unpaid"})]})]})]}),e.jsx("div",{className:"flex items-end",children:e.jsx(A,{className:"flex flex-wrap items-center gap-2 md:flex-row bg-primary text-background",onClick:C,children:"Reset Filters"})})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs(i,{children:[e.jsxs(c,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(d,{className:"text-sm font-medium",children:"Total Payments"}),e.jsx(E,{className:"h-6 w-6 text-primary"})]}),e.jsx(o,{children:e.jsx("div",{className:"text-2xl font-bold",children:t||0})})]}),e.jsxs(i,{children:[e.jsxs(c,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(d,{className:"text-sm font-medium",children:"Paid"}),e.jsx(q,{className:"h-6 w-6 text-green-600"})]}),e.jsx(o,{children:e.jsx("div",{className:"text-2xl font-bold text-green-600",children:h||0})})]}),e.jsxs(i,{children:[e.jsxs(c,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(d,{className:"text-sm font-medium",children:"Pending"}),e.jsx(W,{className:"h-6 w-6 text-yellow-500"})]}),e.jsx(o,{children:e.jsx("div",{className:"text-2xl font-bold text-yellow-500",children:L||0})})]}),e.jsxs(i,{className:"col-span-1 sm:col-span-2 lg:col-span-4",children:[e.jsxs(c,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(d,{className:"text-sm font-medium",children:"Total Revenue"}),e.jsx(E,{className:"h-6 w-6 text-primary"})]}),e.jsx(o,{children:e.jsxs("div",{className:"space-y-1 w-full",children:[e.jsxs("div",{className:"text-lg font-bold",children:[m==="MYR"?"RM":m," ",P((r==null?void 0:r[m||"MYR"])||0,m||"MYR")]}),r&&Object.keys(r).length>1&&e.jsx("div",{className:"text-xs text-muted-foreground space-y-1",children:Object.entries(r).filter(([s])=>s!==m).map(([s,u])=>e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{children:[s,":"]}),e.jsx("span",{children:P(u,s)})]},s))})]})})]})]}),e.jsxs(i,{children:[e.jsxs(c,{className:"flex flex-row items-center justify-between",children:[e.jsx(d,{children:"Payments"}),e.jsx(j,{href:route("club.payments.create"),children:e.jsx(A,{children:"Add Payment"})})]}),e.jsx(o,{children:e.jsx(Q,{data:l,columns:se})})]})]})]})}export{Ye as default};
