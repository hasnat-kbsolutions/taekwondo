import{W as M,j as e,Y as B}from"./app-CHxsABbU.js";import{B as v}from"./button-CVVcaTnG.js";import{S as c,a as o,b as m,c as h,e as l}from"./select-D09diZvD.js";import{I as g}from"./input-CbcG-BTm.js";import{L as n}from"./label-CCOtPfjK.js";import{C as E,a as V,b as D,c as I}from"./card-C5nEaoSG.js";import{A}from"./authenticated-layout-BpjSoaF9.js";import{C as L}from"./react-icons.esm-Dxgfoe4U.js";import{P as T,a as $,b as F}from"./popover-qCWsMXEn.js";import{C as R}from"./calendar-DZvMKiA3.js";import{C as Y}from"./checkbox-1NT2tx4g.js";import{f as _}from"./format-LUeNQFBy.js";import"./index-Dh0DyDEf.js";import"./index-B5rDxbdp.js";import"./index-CN-1e5st.js";import"./chevron-down-DVqaVJfg.js";import"./createLucideIcon-BOF96pXa.js";import"./separator-DNOPl6qu.js";import"./building-2-Ik-crbZS.js";import"./users-BD-bUwfe.js";import"./log-out-DhNmSrES.js";import"./calendar-BaxiiAEL.js";import"./sun-BGtUC1J2.js";function me({payment:a,students:N,bank_information:x,currencies:y}){var j;const{data:t,setData:u,put:C,processing:S,errors:p}=M({student_id:a.student_id||"",notes:a.notes||"",amount:a.amount||"",status:a.status||"unpaid",method:a.method||"cash",pay_at:a.pay_at||"",payment_month:a.payment_month.length===2?a.payment_month:a.payment_month.split("-")[1]||"",currency_code:a.currency_code||"MYR",bank_information:((j=a.bank_information)==null?void 0:j.map(s=>s.id))||[]}),r=(s,i)=>{u(s,i)},b=(s,i)=>{const f=t.bank_information,w=i?[...f,s]:f.filter(k=>k!==s);u("bank_information",w)},P=s=>{s.preventDefault(),C(route("admin.payments.update",a.id))},d=s=>p[s]&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:p[s]});return e.jsxs(A,{header:"Edit Payment",children:[e.jsx(B,{title:"Edit Payment"}),e.jsx("div",{className:"container mx-auto py-10",children:e.jsxs(E,{children:[e.jsx(V,{children:e.jsx(D,{children:"Edit Payment"})}),e.jsx(I,{children:e.jsxs("form",{onSubmit:P,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs(n,{children:["Student",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs(c,{value:t.student_id.toString(),onValueChange:s=>r("student_id",s),children:[e.jsx(o,{className:"w-full",children:e.jsx(m,{placeholder:"Select Student"})}),e.jsx(h,{children:N.map(s=>e.jsx(l,{value:String(s.id),children:s.name},s.id))})]}),d("student_id")]}),e.jsxs("div",{children:[e.jsxs(n,{children:["Amount",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(g,{type:"number",value:t.amount,onChange:s=>r("amount",s.target.value)}),d("amount")]}),e.jsxs("div",{children:[e.jsxs(n,{children:["Currency",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs(c,{value:t.currency_code,onValueChange:s=>r("currency_code",s),children:[e.jsx(o,{className:"w-full",children:e.jsx(m,{placeholder:"Select Currency"})}),e.jsx(h,{children:y.map(s=>e.jsxs(l,{value:s.code,children:[s.code," -"," ",s.symbol," ",s.name]},s.code))})]}),d("currency_code")]}),e.jsxs("div",{children:[e.jsxs(n,{children:["Status",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs(c,{value:t.status,onValueChange:s=>r("status",s),children:[e.jsx(o,{className:"w-full",children:e.jsx(m,{placeholder:"Select Status"})}),e.jsxs(h,{children:[e.jsx(l,{value:"paid",children:"Paid"}),e.jsx(l,{value:"unpaid",children:"Unpaid"})]})]}),d("status")]}),e.jsxs("div",{children:[e.jsxs(n,{children:["Method",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs(c,{value:t.method,onValueChange:s=>r("method",s),children:[e.jsx(o,{className:"w-full",children:e.jsx(m,{placeholder:"Select Method"})}),e.jsxs(h,{children:[e.jsx(l,{value:"cash",children:"Cash"}),e.jsx(l,{value:"stripe",children:"Stripe"})]})]}),d("method")]}),e.jsxs("div",{children:[e.jsxs(n,{children:["Month",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs(c,{value:t.payment_month.length===2?t.payment_month:t.payment_month.split("-")[1]||"",onValueChange:s=>r("payment_month",s),children:[e.jsx(o,{className:"w-full",children:e.jsx(m,{placeholder:"Select Month"})}),e.jsx(h,{children:["01","02","03","04","05","06","07","08","09","10","11","12"].map(s=>e.jsx(l,{value:s,children:new Date(0,parseInt(s)-1).toLocaleString("default",{month:"long"})},s))})]}),d("payment_month")]}),e.jsxs("div",{children:[e.jsxs(n,{children:["Pay At",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs(T,{children:[e.jsx($,{asChild:!0,children:e.jsxs(v,{variant:"outline",className:"w-full justify-start text-left font-normal "+(!t.pay_at&&"text-muted-foreground"),children:[e.jsx(L,{className:"mr-2 h-4 w-4"}),t.pay_at?_(new Date(t.pay_at),"PPP"):"Pick a date"]})}),e.jsx(F,{className:"w-auto p-0",children:e.jsx(R,{mode:"single",selected:t.pay_at?new Date(t.pay_at):void 0,onSelect:s=>r("pay_at",s?_(s,"yyyy-MM-dd"):""),initialFocus:!0})})]}),d("pay_at")]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx(n,{children:"Notes"}),e.jsx(g,{value:t.notes,onChange:s=>r("notes",s.target.value)})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(n,{className:"text-base font-semibold",children:"Bank Information (Select banks to show on invoice)"}),x&&x.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:x.map(s=>e.jsxs("div",{className:"flex items-center space-x-2 p-3 border rounded-lg",children:[e.jsx(Y,{id:`bank-${s.id}`,checked:t.bank_information.includes(s.id),onCheckedChange:i=>b(s.id,i)}),e.jsxs("div",{className:"flex-1",children:[e.jsx(n,{htmlFor:`bank-${s.id}`,className:"text-sm font-medium cursor-pointer",children:s.bank_name}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[s.account_name," -"," ",s.account_number,s.currency&&` (${s.currency})`]})]})]},s.id))}):e.jsxs("div",{className:"p-4 border border-dashed rounded-lg text-center text-muted-foreground",children:[e.jsx("p",{children:"No bank information available."}),e.jsx("p",{className:"text-sm",children:"Please add bank information first."})]}),d("bank_information")]}),e.jsx("div",{className:"pt-4",children:e.jsx(v,{type:"submit",disabled:S,children:"Save"})})]})})]})})]})}export{me as default};
