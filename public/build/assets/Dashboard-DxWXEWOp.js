import{r as M,j as e,Y as P,b as N,y as g}from"./app-CO_10S4M.js";import{A as T,C as b,B as u,S as w}from"./authenticated-layout-Dvq62uX6.js";import{C as t,a,b as l,c as r}from"./card-mFQ3ciLT.js";import{B as F}from"./button-aRElStvs.js";import{S as H,a as _,b as U,c as C,e as I}from"./select-Dlb3K254.js";import{B as L}from"./badge-BvY9NuOe.js";import{R as V}from"./RatingStars-B6N91Crt.js";import{C as $}from"./circle-alert-ClhIbM6Q.js";import{C as O}from"./clock-DEWc9f_6.js";import{M as W}from"./map-pin-qAZB6Owi.js";import{H as y}from"./hourglass-CdnQ7Ox1.js";import{T as z}from"./trending-up-DNnXt67G.js";import{W as v}from"./wallet-DxGqjge2.js";import"./input-CcCzwE1f.js";import"./separator-Dm-yAzcY.js";import"./index-rL7vOnwv.js";import"./sun-BAcRSrPD.js";import"./users-y5LTLO3D.js";import"./log-out-9dmwXuXz.js";import"./index-B0_-bcuz.js";import"./index-B3NU6vDc.js";import"./chevron-down-DoG7op4_.js";const o=new Date().getFullYear(),E=Array.from({length:31},(m,i)=>o-15+i),R=(m,i="MYR")=>{const c=Number(m)||0;return i==="JPY"?c.toLocaleString():c.toFixed(2)};function fe({year:m,attendanceStats:i,paymentStats:c,ratingStats:h,amountsByCurrency:n,paidAmountsByCurrency:J,defaultCurrencyCode:x,upcomingEvents:j=[]}){const[A,p]=M.useState(m||o),S=s=>{const d=parseInt(s);p(d),g.get(route("student.dashboard"),{year:d})},Y=()=>{p(o),g.get(route("student.dashboard"),{year:o})};return e.jsxs(T,{header:"Student Dashboard",children:[e.jsx(P,{title:"Student Dashboard"}),e.jsxs("div",{className:"container mx-auto py-8",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex items-end gap-4 flex-wrap",children:[e.jsxs("div",{className:"flex flex-col w-[180px]",children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Select Year"}),e.jsxs(H,{onValueChange:S,value:A.toString(),children:[e.jsx(_,{children:e.jsx(U,{placeholder:"Select a year"})}),e.jsx(C,{children:E.map(s=>e.jsx(I,{value:s.toString(),children:s},s))})]})]}),e.jsx("div",{className:"flex items-end",children:e.jsx(F,{onClick:Y,children:"Reset Filters"})})]})}),j&&j.length>0&&e.jsxs(t,{className:"mb-6 border-orange-500 bg-gradient-to-r from-orange-50 to-blue-50 dark:from-orange-950/20 dark:to-blue-950/20",children:[e.jsx(a,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx($,{className:"h-5 w-5 text-orange-600"}),e.jsx(l,{className:"text-lg",children:"Upcoming Events"})]}),e.jsx(N,{href:route("student.events.index"),className:"text-sm text-primary hover:underline",children:"View All"})]})}),e.jsx(r,{children:e.jsx("div",{className:"grid gap-3 md:grid-cols-3",children:j.map(s=>e.jsx(N,{href:route("student.events.show",s.id),className:"block",children:e.jsxs("div",{className:"p-3 rounded-lg border bg-white dark:bg-gray-800 hover:bg-accent/50 transition-colors cursor-pointer",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[e.jsx("h4",{className:"font-semibold text-sm line-clamp-1",children:s.title}),e.jsx(L,{variant:"outline",className:"text-xs shrink-0",children:s.event_type})]}),e.jsxs("div",{className:"space-y-1 text-xs text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(b,{className:"h-3 w-3"}),e.jsx("span",{children:new Date(s.event_date).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})})]}),s.start_time&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(O,{className:"h-3 w-3"}),e.jsx("span",{children:(()=>{const[d,D]=s.start_time.split(":"),f=parseInt(d),k=f>=12?"PM":"AM";return`${f%12||12}:${D} ${k}`})()})]}),s.venue&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(W,{className:"h-3 w-3"}),e.jsx("span",{className:"line-clamp-1",children:s.venue})]})]})]})},s.id))})})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:[e.jsxs(t,{children:[e.jsxs(a,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(l,{className:"text-sm font-medium",children:"Total Days"}),e.jsx(b,{className:"h-6 w-6 text-primary"})]}),e.jsx(r,{children:e.jsx("div",{className:"text-2xl font-bold",children:i.totalDays})})]}),e.jsxs(t,{children:[e.jsxs(a,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(l,{className:"text-sm font-medium",children:"Present Days"}),e.jsx(u,{className:"h-6 w-6 text-green-600"})]}),e.jsx(r,{children:e.jsx("div",{className:"text-2xl font-bold text-green-600",children:i.presentDays})})]}),e.jsxs(t,{children:[e.jsxs(a,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(l,{className:"text-sm font-medium",children:"Absent Days"}),e.jsx(y,{className:"h-6 w-6 text-red-500"})]}),e.jsx(r,{children:e.jsx("div",{className:"text-2xl font-bold text-red-500",children:i.absentDays})})]}),e.jsxs(t,{children:[e.jsxs(a,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(l,{className:"text-sm font-medium",children:"Attendance Rate"}),e.jsx(z,{className:"h-6 w-6 text-blue-600"})]}),e.jsx(r,{children:e.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:[i.attendanceRate,"%"]})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:[e.jsxs(t,{children:[e.jsxs(a,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(l,{className:"text-sm font-medium",children:"Total Payments"}),e.jsx(v,{className:"h-6 w-6 text-primary"})]}),e.jsx(r,{children:e.jsx("div",{className:"text-2xl font-bold",children:c.totalPayments})})]}),e.jsxs(t,{children:[e.jsxs(a,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(l,{className:"text-sm font-medium",children:"Paid"}),e.jsx(u,{className:"h-6 w-6 text-green-600"})]}),e.jsx(r,{children:e.jsx("div",{className:"text-2xl font-bold text-green-600",children:c.paidPayments})})]}),e.jsxs(t,{children:[e.jsxs(a,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(l,{className:"text-sm font-medium",children:"Unpaid"}),e.jsx(y,{className:"h-6 w-6 text-yellow-500"})]}),e.jsx(r,{children:e.jsx("div",{className:"text-2xl font-bold text-yellow-500",children:c.pendingPayments})})]}),e.jsxs(t,{className:"col-span-1 sm:col-span-2 lg:col-span-4",children:[e.jsxs(a,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(l,{className:"text-sm font-medium",children:"Total Amount"}),e.jsx(v,{className:"h-6 w-6 text-primary"})]}),e.jsx(r,{children:e.jsxs("div",{className:"space-y-1 w-full",children:[e.jsxs("div",{className:"text-lg font-bold",children:[x==="MYR"?"RM":x," ",R((n==null?void 0:n[x||"MYR"])||0,x||"MYR")]}),n&&Object.keys(n).length>1&&e.jsx("div",{className:"text-xs text-muted-foreground space-y-1",children:Object.entries(n).filter(([s])=>s!==x).map(([s,d])=>e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{children:[s,":"]}),e.jsx("span",{children:R(d,s)})]},s))})]})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs(t,{children:[e.jsxs(a,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(l,{className:"text-sm font-medium",children:"Average Rating"}),e.jsx(w,{className:"h-6 w-6 text-yellow-500"})]}),e.jsx(r,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(V,{rating:Math.round(h.averageRating||0),readonly:!0,size:"sm"}),e.jsx("span",{className:"text-2xl font-bold",children:(h.averageRating||0).toFixed(1)})]})})]}),e.jsxs(t,{children:[e.jsxs(a,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(l,{className:"text-sm font-medium",children:"Total Ratings"}),e.jsx(w,{className:"h-6 w-6 text-yellow-500"})]}),e.jsx(r,{children:e.jsx("div",{className:"text-2xl font-bold",children:h.totalRatings||0})})]})]})]})]})}export{fe as default};
