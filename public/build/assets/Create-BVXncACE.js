import{q as S,r as _,j as e,Y as b,y as P}from"./app-Cf1f6aE6.js";import{A as w}from"./authenticated-layout-BWUFX903.js";import{I as u}from"./input-Cs79MDSo.js";import{C as k}from"./react-icons.esm-nmui7_OT.js";import{P as A,a as M,b as V}from"./popover-C8oV1SVD.js";import{C as I}from"./calendar-Dah6UJZW.js";import{B as j}from"./button-DYamWovx.js";import{S as i,a as o,b as c,c as m,e as r}from"./select-CfH3MtOu.js";import{C as B,a as D,b as L,c as F}from"./card-DSPrioW3.js";import{L as t}from"./label-C6JvFhuR.js";import{C as T}from"./checkbox-M4R_rcZr.js";import{f as p}from"./format-LUeNQFBy.js";import"./separator-C9zOXLy-.js";import"./index-DAYrs0Gt.js";import"./sun-DHFgHePi.js";import"./users-CzVlTGY4.js";import"./log-out-arwFQeNm.js";import"./index-BM1F2IY_.js";import"./chevron-down-BVoNkL2R.js";import"./index-CEcug2ab.js";function ne(){const{students:f,currencies:v,defaultCurrency:g,bank_information:h}=S().props,[a,x]=_.useState({student_id:"",amount:"",currency_code:g||"MYR",status:"paid",method:"cash",pay_at:"",payment_month:"",notes:"",bank_information:[]}),n=(s,l)=>{x(d=>({...d,[s]:l}))},y=(s,l)=>{x(d=>({...d,bank_information:l?[...d.bank_information,s]:d.bank_information.filter(N=>N!==s)}))},C=s=>{s.preventDefault(),P.post(route("club.payments.store"),a)};return e.jsxs(w,{header:"Add Payment",children:[e.jsx(b,{title:"Add Payment"}),e.jsx("div",{className:"p-6",children:e.jsxs(B,{children:[e.jsx(D,{children:e.jsx(L,{children:"Add Payment"})}),e.jsx(F,{children:e.jsxs("form",{onSubmit:C,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(t,{children:"Student"}),e.jsxs(i,{value:a.student_id,onValueChange:s=>n("student_id",s),children:[e.jsx(o,{className:"w-full",children:e.jsx(c,{placeholder:"Select Student"})}),e.jsx(m,{children:f.map(s=>e.jsx(r,{value:String(s.id),children:s.name},s.id))})]})]}),e.jsxs("div",{children:[e.jsx(t,{children:"Amount"}),e.jsx(u,{type:"number",value:a.amount,onChange:s=>n("amount",s.target.value)})]}),e.jsxs("div",{children:[e.jsx(t,{children:"Currency"}),e.jsxs(i,{value:a.currency_code,onValueChange:s=>n("currency_code",s),children:[e.jsx(o,{className:"w-full",children:e.jsx(c,{placeholder:"Select Currency"})}),e.jsx(m,{children:v.map(s=>e.jsxs(r,{value:s.code,children:[s.code," -"," ",s.symbol," ",s.name]},s.code))})]})]}),e.jsxs("div",{children:[e.jsx(t,{children:"Status"}),e.jsxs(i,{value:a.status,onValueChange:s=>n("status",s),children:[e.jsx(o,{className:"w-full",children:e.jsx(c,{placeholder:"Select Status"})}),e.jsxs(m,{children:[e.jsx(r,{value:"paid",children:"Paid"}),e.jsx(r,{value:"unpaid",children:"Unpaid"})]})]})]}),e.jsxs("div",{children:[e.jsx(t,{children:"Method"}),e.jsxs(i,{value:a.method,onValueChange:s=>n("method",s),children:[e.jsx(o,{className:"w-full",children:e.jsx(c,{placeholder:"Select Method"})}),e.jsxs(m,{children:[e.jsx(r,{value:"cash",children:"Cash"}),e.jsx(r,{value:"stripe",children:"Stripe"})]})]})]}),e.jsxs("div",{children:[e.jsxs(t,{children:["Month",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs(i,{value:a.payment_month,onValueChange:s=>n("payment_month",s),children:[e.jsx(o,{className:"w-full",children:e.jsx(c,{placeholder:"Select Month"})}),e.jsx(m,{children:["01","02","03","04","05","06","07","08","09","10","11","12"].map(s=>e.jsx(r,{value:s,children:new Date(0,parseInt(s)-1).toLocaleString("default",{month:"long"})},s))})]})]}),e.jsxs("div",{children:[e.jsxs(t,{children:["Pay At",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs(A,{children:[e.jsx(M,{asChild:!0,children:e.jsxs(j,{variant:"outline",className:"w-full justify-start text-left font-normal "+(!a.pay_at&&"text-muted-foreground"),children:[e.jsx(k,{className:"mr-2 h-4 w-4"}),a.pay_at?p(new Date(a.pay_at),"PPP"):"Pick a date"]})}),e.jsx(V,{className:"w-auto p-0",children:e.jsx(I,{mode:"single",selected:a.pay_at?new Date(a.pay_at):void 0,onSelect:s=>n("pay_at",s?p(s,"yyyy-MM-dd"):""),initialFocus:!0})})]})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx(t,{children:"Notes"}),e.jsx(u,{value:a.notes,onChange:s=>n("notes",s.target.value)})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(t,{className:"text-base font-semibold",children:"Bank Information (Select banks to show on invoice)"}),h&&h.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:h.map(s=>e.jsxs("div",{className:"flex items-center space-x-2 p-3 border rounded-lg",children:[e.jsx(T,{id:`bank-${s.id}`,checked:a.bank_information.includes(s.id),onCheckedChange:l=>y(s.id,l)}),e.jsxs("div",{className:"flex-1",children:[e.jsx(t,{htmlFor:`bank-${s.id}`,className:"text-sm font-medium cursor-pointer",children:s.bank_name}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[s.account_name," -"," ",s.account_number,s.currency&&` (${s.currency})`]})]})]},s.id))}):e.jsxs("div",{className:"p-4 border border-dashed rounded-lg text-center text-muted-foreground",children:[e.jsx("p",{children:"No bank information available."}),e.jsx("p",{className:"text-sm",children:"Please add bank information first."})]})]}),e.jsx("div",{className:"pt-4",children:e.jsx(j,{type:"submit",children:"Save"})})]})})]})})]})}export{ne as default};
