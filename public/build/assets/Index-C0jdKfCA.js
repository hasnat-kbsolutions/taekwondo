import{j as e,r as b,Y as k,b as j,y as O}from"./app-v-MKZwHK.js";import{s as n}from"./index-sFwGSaal.js";import{B as y}from"./button-y2xYF5vs.js";import{A as U,D as B,a as F,b as V,c as v}from"./authenticated-layout-B2ZYBOu0.js";import{D as H}from"./DataTable-DHEsa1KD.js";import{B as C}from"./badge-CmqDq2dd.js";import{L as N}from"./label-C5sGq_pi.js";import{S as P,a as Y,b as G,c as W,e as E}from"./select-LjE5uhi2.js";import{C as q}from"./country-dropdown-C5dXovmi.js";import{D as K,a as Z,b as $,c as J,d as Q}from"./dialog-CgX1i5vf.js";import{C as m,a as x,b as u,c as h}from"./card-Bue6HVht.js";import{W as X}from"./wallet-GvFyiEsu.js";import{U as ee}from"./users-Be_mREES.js";import{G as se}from"./graduation-cap-CgPQVKL6.js";import{c as re}from"./createLucideIcon-aeo75YUw.js";import{A as ae}from"./arrow-right-B12VFpFe.js";import{E as le}from"./ellipsis-BFGdkXOv.js";import{E as te}from"./eye-CsYedDQK.js";import{S as ie}from"./square-pen-CoojvQP8.js";import{T as ne}from"./trash-2-BCvy34BF.js";import"./input-DM5ElhjT.js";import"./separator-DeFpeziM.js";import"./index-CLEmplpx.js";import"./building-2-Bma4Oo2b.js";import"./log-out-DFR9R_Ks.js";import"./sun-DA2HSJIJ.js";import"./table-s978S__J.js";import"./index-afWeK-hQ.js";import"./index-R1Ab9tXC.js";import"./chevron-down-B8hI96OS.js";import"./popover-Q4Aa8K8j.js";import"./globe-B5CYCGgO.js";/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ce=re("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]),oe=p=>[{header:"#",cell:({row:a})=>a.index+1},{header:"Logo",cell:({row:a})=>a.original.logo?e.jsx("img",{src:a.original.logo,alt:"Club Logo",className:"w-10 h-10 object-cover rounded"}):"-"},{header:"Club Name",cell:({row:a})=>{var t;return((t=a.original.user)==null?void 0:t.name)??"-"}},{header:"Organization",cell:({row:a})=>{var t;return((t=a.original.organization)==null?void 0:t.name)??"-"}},{header:"Location",cell:({row:a})=>e.jsx("div",{className:"text-sm",children:a.original.city&&a.original.country?e.jsxs(e.Fragment,{children:[e.jsx("div",{children:a.original.city}),e.jsx("div",{className:"text-muted-foreground",children:a.original.country})]}):a.original.city||a.original.country||"-"})},{header:"Status",cell:({row:a})=>e.jsx(C,{variant:a.original.status?"default":"destructive",children:a.original.status?"Active":"Inactive"})},{header:"Default Currency",accessorKey:"default_currency",cell:({row:a})=>{const t=a.original.default_currency;return t?e.jsx(C,{variant:"outline",className:"font-mono",children:t}):e.jsx("span",{className:"text-gray-400",children:"Not set"})}},{header:"Actions",cell:({row:a})=>e.jsxs(B,{children:[e.jsx(F,{asChild:!0,children:e.jsx(y,{variant:"ghost",size:"icon",className:"h-8 w-8",children:e.jsx(le,{className:"h-4 w-4"})})}),e.jsxs(V,{align:"end",children:[e.jsxs(v,{onClick:()=>p(a.original),children:[e.jsx(te,{className:"w-4 h-4 mr-2"})," View"]}),e.jsx(v,{asChild:!0,children:e.jsxs(j,{href:n("admin.clubs.edit",a.original.id),children:[e.jsx(ie,{className:"w-4 h-4 mr-2"})," Edit"]})}),e.jsx(v,{asChild:!0,children:e.jsxs(j,{href:n("admin.clubs.destroy",a.original.id),method:"delete",as:"button",children:[e.jsx(ne,{className:"w-4 h-4 mr-2"})," Delete"]})})]})]})}];function He({clubs:p,organizations:a=[],filters:t}){var z,T;const c=Array.isArray(p)?p:[],w=s=>(Number(s)||0).toFixed(2),o={};let d="MYR";c.forEach(s=>{var l,i;(l=s.payment_stats)!=null&&l.amounts_by_currency&&Object.entries(s.payment_stats.amounts_by_currency).forEach(([I,R])=>{o[I]=(o[I]||0)+R}),(i=s.payment_stats)!=null&&i.default_currency_code&&(d=s.payment_stats.default_currency_code)});const L=[{label:"Total Revenue",count:e.jsxs("div",{className:"space-y-1 w-full",children:[e.jsxs("div",{className:"text-lg font-bold",children:[d==="MYR"?"RM":d," ",w(o[d]||0)]}),Object.keys(o).length>1&&e.jsx("div",{className:"text-xs text-muted-foreground space-y-1",children:Object.entries(o).filter(([s])=>s!==d).map(([s,l])=>e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{children:[s,":"]}),e.jsx("span",{children:w(l)})]},s))})]}),icon:e.jsx(X,{className:"h-6 w-6 text-primary"}),url:n("admin.payments.index")},{label:"Total Students",count:Number(c.reduce((s,l)=>{var i;return s+Number(((i=l.students)==null?void 0:i.length)||0)},0)),icon:e.jsx(ee,{className:"h-6 w-6 text-blue-600"}),url:n("admin.students.index")},{label:"Total Instructors",count:Number(c.reduce((s,l)=>{var i;return s+Number(((i=l.instructors)==null?void 0:i.length)||0)},0)),icon:e.jsx(se,{className:"h-6 w-6 text-green-600"}),url:n("admin.instructors.index")},{label:"Total Supporters",count:Number(c.reduce((s,l)=>{var i;return s+Number(((i=l.supporters)==null?void 0:i.length)||0)},0)),icon:e.jsx(ce,{className:"h-6 w-6 text-purple-600"}),url:n("admin.supporters.index")}],[f,S]=b.useState(t.organization_id||""),[g,A]=b.useState(t.country||""),D=(s={})=>{O.get(n("admin.clubs.index"),{...s,organization_id:f||null,country:g||null},{preserveScroll:!0,preserveState:!0,replace:!0})},M=()=>{S(""),A(""),O.get(n("admin.clubs.index"),{},{preserveScroll:!0,preserveState:!0})},[r,_]=b.useState(null);return e.jsxs(U,{header:"Clubs",children:[e.jsx(k,{title:"Organizations"}),e.jsxs("div",{className:"container mx-auto py-10",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold mb-4 text-muted-foreground",children:"Overview Statistics"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 mb-6",children:L.map(s=>e.jsx(j,{href:s.url,className:`block group ${s.label==="Total Revenue"?"col-span-1 sm:col-span-2 lg:col-span-3 xl:col-span-4":""}`,children:e.jsxs(m,{className:"hover:shadow-lg transition-all duration-200 cursor-pointer hover:bg-accent/50 border-2 hover:border-primary/20",children:[e.jsxs(x,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(u,{className:"text-sm font-medium group-hover:text-primary transition-colors",children:s.label}),e.jsxs("div",{className:"flex items-center gap-2",children:[s.icon,e.jsx(ae,{className:"h-4 w-4 text-muted-foreground group-hover:text-primary group-hover:translate-x-1 transition-all duration-200"})]})]}),e.jsx(h,{children:e.jsx("div",{className:"text-2xl font-bold group-hover:text-primary transition-colors",children:s.count})})]})},s.label))})]}),e.jsxs(m,{children:[e.jsxs(x,{className:"flex flex-row items-center justify-between",children:[e.jsx(u,{children:"Clubs"}),e.jsx(j,{href:n("admin.clubs.create"),children:e.jsx(y,{children:"Add Club"})})]}),e.jsxs(h,{children:[e.jsx("div",{className:"mb-6 p-4 border rounded-lg bg-muted/50",children:e.jsxs("div",{className:"flex items-end gap-4 flex-wrap",children:[e.jsxs("div",{className:"flex flex-col w-[200px]",children:[e.jsx(N,{className:"text-sm mb-1",children:"Organizations"}),e.jsxs(P,{value:f||"",onValueChange:s=>{S(s),D({country:g})},children:[e.jsx(Y,{children:e.jsx(G,{placeholder:"All Organizations"})}),e.jsxs(W,{children:[e.jsx(E,{value:"all",children:"All"}),a.map(s=>e.jsx(E,{value:s.id.toString(),children:s.name},s.id))]})]})]}),e.jsxs("div",{className:"flex flex-col w-[200px]",children:[e.jsx(N,{className:"text-sm mb-1",children:"Country"}),e.jsx(q,{placeholder:"All Countries",defaultValue:g||"",onChange:s=>{const l=(s==null?void 0:s.alpha3)||"";A(l),D({organization_id:f})},slim:!1})]}),e.jsx("div",{className:"flex items-end",children:e.jsx(y,{variant:"secondary",onClick:M,children:"Reset Filters"})})]})}),e.jsx(H,{columns:oe(s=>_(s)),data:c})]})]}),r&&e.jsx(K,{open:!!r,onOpenChange:s=>{s||_(null)},children:e.jsxs(Z,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsxs($,{children:[e.jsx(J,{children:"Club Details"}),e.jsx(Q,{children:"View detailed information about the club."})]}),r&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex justify-center",children:e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx("div",{className:"w-32 h-32 flex items-center justify-center rounded-full bg-primary/10 text-primary text-4xl font-bold border-2 border-primary/20 shadow-lg",children:r.logo?e.jsx("img",{src:r.logo,alt:"Club Logo",className:"w-32 h-32 rounded-full object-cover"}):r.name.charAt(0).toUpperCase()}),e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"font-semibold text-xl",children:r.name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Club ID: ",r.id]})]})]})}),e.jsx("div",{className:"grid grid-cols-2 gap-4",children:[{label:"Email",value:((z=r.user)==null?void 0:z.email)||"Not specified"},{label:"Phone",value:r.phone||"Not specified"},{label:"City",value:r.city||"Not specified"},{label:"Country",value:r.country||"Not specified"},{label:"Tax Number",value:r.tax_number||"Not specified"},{label:"Invoice Prefix",value:r.invoice_prefix||"Not specified"},{label:"Organization",value:((T=r.organization)==null?void 0:T.name)||"Not specified"},{label:"Status",value:e.jsx(C,{variant:r.status?"default":"destructive",children:r.status?"Active":"Inactive"})}].map((s,l)=>e.jsxs("div",{className:"flex flex-col space-y-1",children:[e.jsx(N,{className:"text-sm font-medium text-muted-foreground",children:s.label}),e.jsx("div",{className:"text-sm",children:s.value})]},l))}),r.students&&r.students.length>0&&e.jsxs(m,{children:[e.jsx(x,{children:e.jsxs(u,{children:["Students (",r.students.length,")"]})}),e.jsx(h,{children:e.jsx("div",{className:"space-y-2",children:r.students.map(s=>e.jsx("div",{className:"flex items-center justify-between p-2 border rounded-lg",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-primary/10 rounded-full flex items-center justify-center text-primary font-semibold",children:s.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:s.name}),s.email&&e.jsx("p",{className:"text-sm text-muted-foreground",children:s.email})]})]})},s.id))})})]}),r.instructors&&r.instructors.length>0&&e.jsxs(m,{children:[e.jsx(x,{children:e.jsxs(u,{children:["Instructors (",r.instructors.length,")"]})}),e.jsx(h,{children:e.jsx("div",{className:"space-y-2",children:r.instructors.map(s=>e.jsx("div",{className:"flex items-center justify-between p-2 border rounded-lg",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-primary/10 rounded-full flex items-center justify-center text-primary font-semibold",children:s.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:s.name}),s.email&&e.jsx("p",{className:"text-sm text-muted-foreground",children:s.email})]})]})},s.id))})})]}),r.supporters&&r.supporters.length>0&&e.jsxs(m,{children:[e.jsx(x,{children:e.jsxs(u,{children:["Supporters (",r.supporters.length,")"]})}),e.jsx(h,{children:e.jsx("div",{className:"space-y-2",children:r.supporters.map(s=>e.jsx("div",{className:"flex items-center justify-between p-2 border rounded-lg",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-primary/10 rounded-full flex items-center justify-center text-primary font-semibold",children:s.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:s.name}),s.email&&e.jsx("p",{className:"text-sm text-muted-foreground",children:s.email})]})]})},s.id))})})]})]})]})})]})]})}export{He as default};
