import{j as e,r as w,W as Y,Y as G,b as f,y as P}from"./app-ByP4EyMF.js";import{s as c}from"./index-sFwGSaal.js";import{B as j}from"./button-xRIIPuWW.js";import{W as Z,A as $,D as J,a as Q,b as X,c as C}from"./authenticated-layout-Qq67eihM.js";import{D as ee}from"./DataTable-Dw3B_R9W.js";import{B as D}from"./badge-Dh2Aq8W_.js";import{L as m}from"./label-DlfdlFhI.js";import{S as se,a as re,b as ae,c as te,e as U}from"./select-DYOzuw-F.js";import{C as le}from"./country-dropdown-Dw1yaK_W.js";import{D as k,a as L,b as M,c as R,d as B,e as ie}from"./dialog-By_CRj9h.js";import{I as V}from"./input-DHU4GFng.js";import{C as x,a as u,b as h,c as p}from"./card-CKPA4ccG.js";import{U as H,G as ne}from"./users-BmXZoUBI.js";import{c as ce}from"./sun-w0LeklHu.js";import{A as oe}from"./arrow-right-BP2g0HWD.js";import{E as de}from"./ellipsis-C7xeqP8s.js";import{E as me}from"./eye-BKf0uv2I.js";import{S as xe}from"./square-pen-CQC0BOid.js";import{K as ue}from"./key-BPJsrajE.js";import{T as he}from"./trash-2-BVfeJSpJ.js";import"./separator-DivMgUP8.js";import"./index-DmN_BMdc.js";import"./log-out-DV0RpnIg.js";import"./table-9EkxEIEw.js";import"./index-BMO2_zHf.js";import"./index-UrMmZlMe.js";import"./index-C39nNiIL.js";import"./chevron-down-oDmv8qA3.js";import"./popover-BP-YhOe2.js";import"./globe-D58x0wZ6.js";/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pe=ce("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]),je=(g,b)=>[{header:"#",cell:({row:r})=>r.index+1},{header:"Logo",cell:({row:r})=>r.original.logo?e.jsx("img",{src:r.original.logo,alt:"Club Logo",className:"w-10 h-10 object-cover rounded"}):"-"},{header:"Club Name",cell:({row:r})=>{var t;return((t=r.original.user)==null?void 0:t.name)??"-"}},{header:"Email",cell:({row:r})=>{var t;return((t=r.original.user)==null?void 0:t.email)??"-"}},{header:"Organization",cell:({row:r})=>{var t;return((t=r.original.organization)==null?void 0:t.name)??"-"}},{header:"Location",cell:({row:r})=>e.jsx("div",{className:"text-sm",children:r.original.city&&r.original.country?e.jsxs(e.Fragment,{children:[e.jsx("div",{children:r.original.city}),e.jsx("div",{className:"text-muted-foreground",children:r.original.country})]}):r.original.city||r.original.country||"-"})},{header:"Status",cell:({row:r})=>e.jsx(D,{variant:r.original.status?"default":"destructive",children:r.original.status?"Active":"Inactive"})},{header:"Default Currency",accessorKey:"default_currency",cell:({row:r})=>{const t=r.original.default_currency;return t?e.jsx(D,{variant:"outline",className:"font-mono",children:t}):e.jsx("span",{className:"text-gray-400",children:"Not set"})}},{header:"Students",cell:({row:r})=>{var o;const t=((o=r.original.students)==null?void 0:o.length)||0,N=r.original.id;return e.jsxs(f,{href:c("admin.students.index",{club_id:N}),className:"flex items-center gap-2 hover:text-primary transition-colors cursor-pointer",children:[e.jsx(H,{className:"h-4 w-4 text-muted-foreground/50"}),e.jsx("span",{className:"text-muted-foreground",children:t})]})}},{header:"Actions",cell:({row:r})=>e.jsxs(J,{children:[e.jsx(Q,{asChild:!0,children:e.jsx(j,{variant:"ghost",size:"icon",className:"h-8 w-8",children:e.jsx(de,{className:"h-4 w-4"})})}),e.jsxs(X,{align:"end",children:[e.jsxs(C,{onClick:()=>g(r.original),children:[e.jsx(me,{className:"w-4 h-4 mr-2"})," View"]}),e.jsx(C,{asChild:!0,children:e.jsxs(f,{href:c("admin.clubs.edit",r.original.id),children:[e.jsx(xe,{className:"w-4 h-4 mr-2"})," Edit"]})}),b&&e.jsxs(C,{onClick:()=>b(r.original),children:[e.jsx(ue,{className:"w-4 h-4 mr-2"})," Change Password"]}),e.jsx(C,{asChild:!0,children:e.jsxs(f,{href:c("admin.clubs.destroy",r.original.id),method:"delete",as:"button",children:[e.jsx(he,{className:"w-4 h-4 mr-2"})," Delete"]})})]})]})}];function Ye({clubs:g,organizations:b=[],filters:r}){var E,O;const t=Array.isArray(g)?g:[],N=s=>(Number(s)||0).toFixed(2),o={};let d="MYR";t.forEach(s=>{var i,n;(i=s.payment_stats)!=null&&i.amounts_by_currency&&Object.entries(s.payment_stats.amounts_by_currency).forEach(([F,W])=>{o[F]=(o[F]||0)+W}),(n=s.payment_stats)!=null&&n.default_currency_code&&(d=s.payment_stats.default_currency_code)});const q=[{label:"Total Revenue",count:e.jsxs("div",{className:"space-y-1 w-full",children:[e.jsxs("div",{className:"text-lg font-bold",children:[d==="MYR"?"RM":d," ",N(o[d]||0)]}),Object.keys(o).length>1&&e.jsx("div",{className:"text-xs text-muted-foreground space-y-1",children:Object.entries(o).filter(([s])=>s!==d).map(([s,i])=>e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{children:[s,":"]}),e.jsx("span",{children:N(i)})]},s))})]}),icon:e.jsx(Z,{className:"h-6 w-6 text-primary"}),url:c("admin.payments.index")},{label:"Total Students",count:Number(t.reduce((s,i)=>{var n;return s+Number(((n=i.students)==null?void 0:n.length)||0)},0)),icon:e.jsx(H,{className:"h-6 w-6 text-blue-600"}),url:c("admin.students.index")},{label:"Total Instructors",count:Number(t.reduce((s,i)=>{var n;return s+Number(((n=i.instructors)==null?void 0:n.length)||0)},0)),icon:e.jsx(ne,{className:"h-6 w-6 text-green-600"}),url:c("admin.instructors.index")},{label:"Total Supporters",count:Number(t.reduce((s,i)=>{var n;return s+Number(((n=i.supporters)==null?void 0:n.length)||0)},0)),icon:e.jsx(pe,{className:"h-6 w-6 text-purple-600"}),url:c("admin.supporters.index")}],[S,A]=w.useState(r.organization_id||""),[_,I]=w.useState(r.country||""),z=(s={})=>{P.get(c("admin.clubs.index"),{...s,organization_id:S||null,country:_||null},{preserveScroll:!0,preserveState:!0,replace:!0})},K=()=>{A(""),I(""),P.get(c("admin.clubs.index"),{},{preserveScroll:!0,preserveState:!0})},[a,T]=w.useState(null),[v,y]=w.useState(null),l=Y({password:"",password_confirmation:""});return e.jsxs($,{header:"Clubs",children:[e.jsx(G,{title:"Organizations"}),e.jsxs("div",{className:"container mx-auto py-10",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold mb-4 text-muted-foreground",children:"Overview Statistics"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 mb-6",children:q.map(s=>e.jsx(f,{href:s.url,className:`block group ${s.label==="Total Revenue"?"col-span-1 sm:col-span-2 lg:col-span-3 xl:col-span-4":""}`,children:e.jsxs(x,{className:"hover:shadow-lg transition-all duration-200 cursor-pointer hover:bg-accent/50 border-2 hover:border-primary/20",children:[e.jsxs(u,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(h,{className:"text-sm font-medium group-hover:text-primary transition-colors",children:s.label}),e.jsxs("div",{className:"flex items-center gap-2",children:[s.icon,e.jsx(oe,{className:"h-4 w-4 text-muted-foreground group-hover:text-primary group-hover:translate-x-1 transition-all duration-200"})]})]}),e.jsx(p,{children:e.jsx("div",{className:"text-2xl font-bold group-hover:text-primary transition-colors",children:s.count})})]})},s.label))})]}),e.jsxs(x,{children:[e.jsxs(u,{className:"flex flex-row items-center justify-between",children:[e.jsx(h,{children:"Clubs"}),e.jsx(f,{href:c("admin.clubs.create"),children:e.jsx(j,{children:"Add Club"})})]}),e.jsxs(p,{children:[e.jsx("div",{className:"mb-6 p-4 border rounded-lg bg-muted/50",children:e.jsxs("div",{className:"flex items-end gap-4 flex-wrap",children:[e.jsxs("div",{className:"flex flex-col w-[200px]",children:[e.jsx(m,{className:"text-sm mb-1",children:"Organizations"}),e.jsxs(se,{value:S||"",onValueChange:s=>{A(s),z({country:_})},children:[e.jsx(re,{children:e.jsx(ae,{placeholder:"All Organizations"})}),e.jsxs(te,{children:[e.jsx(U,{value:"all",children:"All"}),b.map(s=>e.jsx(U,{value:s.id.toString(),children:s.name},s.id))]})]})]}),e.jsxs("div",{className:"flex flex-col w-[200px]",children:[e.jsx(m,{className:"text-sm mb-1",children:"Country"}),e.jsx(le,{placeholder:"All Countries",defaultValue:_||"",onChange:s=>{const i=(s==null?void 0:s.alpha3)||"";I(i),z({organization_id:S})},slim:!1})]}),e.jsx("div",{className:"flex items-end",children:e.jsx(j,{variant:"secondary",onClick:K,children:"Reset Filters"})})]})}),e.jsx(ee,{columns:je(s=>T(s),s=>y(s)),data:t})]})]}),a&&e.jsx(k,{open:!!a,onOpenChange:s=>{s||T(null)},children:e.jsxs(L,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(M,{children:[e.jsx(R,{children:"Club Details"}),e.jsx(B,{children:"View detailed information about the club."})]}),a&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex justify-center",children:e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx("div",{className:"w-32 h-32 flex items-center justify-center rounded-full bg-primary/10 text-primary text-4xl font-bold border-2 border-primary/20 shadow-lg",children:a.logo?e.jsx("img",{src:a.logo,alt:"Club Logo",className:"w-32 h-32 rounded-full object-cover"}):a.name.charAt(0).toUpperCase()}),e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"font-semibold text-xl",children:a.name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Club ID: ",a.id]})]})]})}),e.jsx("div",{className:"grid grid-cols-2 gap-4",children:[{label:"Email",value:((E=a.user)==null?void 0:E.email)||"Not specified"},{label:"Phone",value:a.phone||"Not specified"},{label:"City",value:a.city||"Not specified"},{label:"Country",value:a.country||"Not specified"},{label:"Tax Number",value:a.tax_number||"Not specified"},{label:"Invoice Prefix",value:a.invoice_prefix||"Not specified"},{label:"Organization",value:((O=a.organization)==null?void 0:O.name)||"Not specified"},{label:"Status",value:e.jsx(D,{variant:a.status?"default":"destructive",children:a.status?"Active":"Inactive"})}].map((s,i)=>e.jsxs("div",{className:"flex flex-col space-y-1",children:[e.jsx(m,{className:"text-sm font-medium text-muted-foreground",children:s.label}),e.jsx("div",{className:"text-sm",children:s.value})]},i))}),a.students&&a.students.length>0&&e.jsxs(x,{children:[e.jsx(u,{children:e.jsxs(h,{children:["Students (",a.students.length,")"]})}),e.jsx(p,{children:e.jsx("div",{className:"space-y-2",children:a.students.map(s=>e.jsx("div",{className:"flex items-center justify-between p-2 border rounded-lg",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-primary/10 rounded-full flex items-center justify-center text-primary font-semibold",children:s.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:s.name}),s.email&&e.jsx("p",{className:"text-sm text-muted-foreground",children:s.email})]})]})},s.id))})})]}),a.instructors&&a.instructors.length>0&&e.jsxs(x,{children:[e.jsx(u,{children:e.jsxs(h,{children:["Instructors (",a.instructors.length,")"]})}),e.jsx(p,{children:e.jsx("div",{className:"space-y-2",children:a.instructors.map(s=>e.jsx("div",{className:"flex items-center justify-between p-2 border rounded-lg",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-primary/10 rounded-full flex items-center justify-center text-primary font-semibold",children:s.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:s.name}),s.email&&e.jsx("p",{className:"text-sm text-muted-foreground",children:s.email})]})]})},s.id))})})]}),a.supporters&&a.supporters.length>0&&e.jsxs(x,{children:[e.jsx(u,{children:e.jsxs(h,{children:["Supporters (",a.supporters.length,")"]})}),e.jsx(p,{children:e.jsx("div",{className:"space-y-2",children:a.supporters.map(s=>e.jsx("div",{className:"flex items-center justify-between p-2 border rounded-lg",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-primary/10 rounded-full flex items-center justify-center text-primary font-semibold",children:s.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:s.name}),s.email&&e.jsx("p",{className:"text-sm text-muted-foreground",children:s.email})]})]})},s.id))})})]})]})]})}),v&&e.jsx(k,{open:!!v,onOpenChange:s=>{s||(y(null),l.reset())},children:e.jsxs(L,{children:[e.jsxs(M,{children:[e.jsx(R,{children:"Change Password"}),e.jsxs(B,{children:["Update password for"," ",v.name]})]}),e.jsxs("form",{onSubmit:s=>{s.preventDefault(),l.patch(c("admin.clubs.updatePassword",v.id),{onSuccess:()=>{y(null),l.reset()}})},className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs(m,{htmlFor:"password",children:["New Password"," ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(V,{id:"password",type:"password",placeholder:"Enter new password",value:l.data.password,onChange:s=>l.setData("password",s.target.value),required:!0}),l.errors.password&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:l.errors.password})]}),e.jsxs("div",{children:[e.jsxs(m,{htmlFor:"password_confirmation",children:["Confirm Password"," ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(V,{id:"password_confirmation",type:"password",placeholder:"Confirm new password",value:l.data.password_confirmation,onChange:s=>l.setData("password_confirmation",s.target.value),required:!0}),l.errors.password_confirmation&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:l.errors.password_confirmation})]}),e.jsxs(ie,{children:[e.jsx(j,{type:"button",variant:"outline",onClick:()=>{y(null),l.reset()},children:"Cancel"}),e.jsx(j,{type:"submit",disabled:l.processing,children:l.processing?"Updating...":"Update Password"})]})]})]})})]})]})}export{Ye as default};
