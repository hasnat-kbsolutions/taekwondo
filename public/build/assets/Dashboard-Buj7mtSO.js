import{r as P,j as e,Y as U,b as w,y}from"./app-z5-DDlZl.js";import{A as V,B as N,C as R,q as F,r as L,W as M,S as Y}from"./authenticated-layout-DG3NwruG.js";import{C as l,c as a,a as i,b as r}from"./card-BtibboR8.js";import{B as $}from"./button-LWPzmO8W.js";import{S as W,a as q,b as z,c as E,e as J}from"./select-eIK-EYoQ.js";import{B as k}from"./badge-ISNvvs_F.js";import{R as G}from"./RatingStars-CyOoK0zO.js";import{C as S}from"./circle-alert-BL1_wd98.js";import{M as K}from"./map-pin-03rfGwgo.js";import{H as D}from"./hourglass-CLBG-ZG5.js";import"./input-CwgJrOeH.js";import"./separator-BKpiOkSc.js";import"./index-C1jkJPUl.js";import"./sun-1OY4TRTr.js";import"./users-Do5M1CKm.js";import"./log-out-CDN_bDFY.js";import"./index-RtcTYlrH.js";import"./index-CleUAN4N.js";import"./chevron-down-CV1sNpCW.js";const f=new Date().getFullYear(),Q=Array.from({length:31},(j,x)=>f-15+x),o=(j,x="MYR")=>{const d=Number(j)||0;return x==="JPY"?d.toLocaleString():d.toFixed(2)};function Ne({year:j,attendanceStats:x,paymentStats:d,ratingStats:g,amountsByCurrency:m,paidAmountsByCurrency:h,defaultCurrencyCode:t,upcomingEvents:b=[],feePlan:c,unpaidFeesCount:p=0,unpaidAmount:_=0}){const[A,v]=P.useState(j||f),T=s=>{const n=parseInt(s);v(n),y.get(route("student.dashboard"),{year:n})},H=()=>{v(f),y.get(route("student.dashboard"),{year:f})};return e.jsxs(V,{header:"Student Dashboard",children:[e.jsx(U,{title:"Student Dashboard"}),e.jsxs("div",{className:"container mx-auto py-8",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex items-end gap-4 flex-wrap",children:[e.jsxs("div",{className:"flex flex-col w-[180px]",children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Select Year"}),e.jsxs(W,{onValueChange:T,value:A.toString(),children:[e.jsx(q,{children:e.jsx(z,{placeholder:"Select a year"})}),e.jsx(E,{children:Q.map(s=>e.jsx(J,{value:s.toString(),children:s},s))})]})]}),e.jsx("div",{className:"flex items-end",children:e.jsx($,{onClick:H,children:"Reset Filters"})})]})}),c&&p>0&&e.jsx(l,{className:"mb-6 border-l-4 border-red-500",children:e.jsx(a,{className:"pt-4 pb-4 px-6",children:e.jsxs("div",{className:"flex items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[e.jsx(S,{className:"h-5 w-5 text-red-600 flex-shrink-0"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-sm font-semibold text-red-700",children:"Outstanding Fees"}),e.jsxs("p",{className:"text-xs text-gray-600",children:[p," payment",p===1?"":"s"," due"]})]})]}),e.jsxs("div",{className:"text-right flex-shrink-0",children:[e.jsxs("p",{className:"text-lg font-bold text-red-700",children:[t==="MYR"?"RM":t," ",o(_,t)]}),e.jsx("p",{className:"text-xs text-gray-600",children:c.plan_name})]}),e.jsx(w,{href:route("student.payments.index"),className:"text-xs text-red-600 hover:text-red-800 font-semibold hover:underline px-3 py-2 rounded hover:bg-red-50 whitespace-nowrap flex-shrink-0",children:"View"})]})})}),c&&p===0&&e.jsx(l,{className:"mb-6 border-l-4 border-green-500",children:e.jsx(a,{className:"pt-4 pb-4 px-6",children:e.jsxs("div",{className:"flex items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[e.jsx(N,{className:"h-5 w-5 text-green-600 flex-shrink-0"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-sm font-semibold text-green-700",children:"All Payments Paid"}),e.jsxs("p",{className:"text-xs text-gray-600",children:[c.plan_name," â€¢ ",c.interval]})]})]}),e.jsxs("div",{className:"text-right flex-shrink-0",children:[e.jsxs("p",{className:"text-lg font-bold text-green-700",children:[t==="MYR"?"RM":t," ",o(c.effective_amount,c.currency_code)]}),e.jsx(k,{variant:c.is_active?"default":"secondary",className:"text-xs mt-1",children:c.is_active?"Active":"Inactive"})]})]})})}),b&&b.length>0&&e.jsxs(l,{className:"mb-6 border-orange-500 bg-gradient-to-r from-orange-50 to-blue-50 dark:from-orange-950/20 dark:to-blue-950/20",children:[e.jsx(i,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(S,{className:"h-5 w-5 text-orange-600"}),e.jsx(r,{className:"text-lg",children:"Upcoming Events"})]}),e.jsx(w,{href:route("student.events.index"),className:"text-sm text-primary hover:underline",children:"View All"})]})}),e.jsx(a,{children:e.jsx("div",{className:"grid gap-3 md:grid-cols-3",children:b.map(s=>e.jsx(w,{href:route("student.events.show",s.id),className:"block",children:e.jsxs("div",{className:"p-3 rounded-lg border bg-white dark:bg-gray-800 hover:bg-accent/50 transition-colors cursor-pointer",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[e.jsx("h4",{className:"font-semibold text-sm line-clamp-1",children:s.title}),e.jsx(k,{variant:"outline",className:"text-xs shrink-0",children:s.event_type})]}),e.jsxs("div",{className:"space-y-1 text-xs text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(R,{className:"h-3 w-3"}),e.jsx("span",{children:new Date(s.event_date).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})})]}),s.start_time&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(F,{className:"h-3 w-3"}),e.jsx("span",{children:(()=>{const[n,O]=s.start_time.split(":"),u=parseInt(n),I=u>=12?"PM":"AM";return`${u%12||12}:${O} ${I}`})()})]}),s.venue&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(K,{className:"h-3 w-3"}),e.jsx("span",{className:"line-clamp-1",children:s.venue})]})]})]})},s.id))})})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:[e.jsxs(l,{children:[e.jsxs(i,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(r,{className:"text-sm font-medium",children:"Total Days"}),e.jsx(R,{className:"h-6 w-6 text-primary"})]}),e.jsx(a,{children:e.jsx("div",{className:"text-2xl font-bold",children:x.totalDays})})]}),e.jsxs(l,{children:[e.jsxs(i,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(r,{className:"text-sm font-medium",children:"Present Days"}),e.jsx(N,{className:"h-6 w-6 text-green-600"})]}),e.jsx(a,{children:e.jsx("div",{className:"text-2xl font-bold text-green-600",children:x.presentDays})})]}),e.jsxs(l,{children:[e.jsxs(i,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(r,{className:"text-sm font-medium",children:"Absent Days"}),e.jsx(D,{className:"h-6 w-6 text-red-500"})]}),e.jsx(a,{children:e.jsx("div",{className:"text-2xl font-bold text-red-500",children:x.absentDays})})]}),e.jsxs(l,{children:[e.jsxs(i,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(r,{className:"text-sm font-medium",children:"Attendance Rate"}),e.jsx(L,{className:"h-6 w-6 text-blue-600"})]}),e.jsx(a,{children:e.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:[x.attendanceRate,"%"]})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:[e.jsxs(l,{children:[e.jsxs(i,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(r,{className:"text-sm font-medium",children:"Total Payments"}),e.jsx(M,{className:"h-6 w-6 text-primary"})]}),e.jsx(a,{children:e.jsx("div",{className:"text-2xl font-bold",children:d.totalPayments})})]}),e.jsxs(l,{children:[e.jsxs(i,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(r,{className:"text-sm font-medium",children:"Paid"}),e.jsx(N,{className:"h-6 w-6 text-green-600"})]}),e.jsx(a,{children:e.jsx("div",{className:"text-2xl font-bold text-green-600",children:d.paidPayments})})]}),e.jsxs(l,{children:[e.jsxs(i,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(r,{className:"text-sm font-medium",children:"Unpaid"}),e.jsx(D,{className:"h-6 w-6 text-yellow-500"})]}),e.jsx(a,{children:e.jsx("div",{className:"text-2xl font-bold text-yellow-500",children:d.pendingPayments})})]}),e.jsxs(l,{className:"col-span-1 sm:col-span-2 lg:col-span-2",children:[e.jsxs(i,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(r,{className:"text-sm font-medium",children:"Total Amount"}),e.jsx(M,{className:"h-6 w-6 text-primary"})]}),e.jsx(a,{children:e.jsxs("div",{className:"space-y-1 w-full",children:[e.jsxs("div",{className:"text-lg font-bold",children:[t==="MYR"?"RM":t," ",o((m==null?void 0:m[t||"MYR"])||0,t||"MYR")]}),m&&Object.keys(m).length>1&&e.jsx("div",{className:"text-xs text-muted-foreground space-y-1",children:Object.entries(m).filter(([s])=>s!==t).map(([s,n])=>e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{children:[s,":"]}),e.jsx("span",{children:o(n,s)})]},s))})]})})]}),e.jsxs(l,{className:"col-span-1 sm:col-span-2 lg:col-span-2",children:[e.jsxs(i,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(r,{className:"text-sm font-medium",children:"Paid Amount"}),e.jsx(N,{className:"h-6 w-6 text-green-600"})]}),e.jsx(a,{children:e.jsxs("div",{className:"space-y-1 w-full",children:[e.jsxs("div",{className:"text-lg font-bold text-green-600",children:[t==="MYR"?"RM":t," ",o((h==null?void 0:h[t||"MYR"])||0,t||"MYR")]}),h&&Object.keys(h).length>1&&e.jsx("div",{className:"text-xs text-muted-foreground space-y-1",children:Object.entries(h).filter(([s])=>s!==t).map(([s,n])=>e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{children:[s,":"]}),e.jsx("span",{children:o(n,s)})]},s))})]})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs(l,{children:[e.jsxs(i,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(r,{className:"text-sm font-medium",children:"Average Rating"}),e.jsx(Y,{className:"h-6 w-6 text-yellow-500"})]}),e.jsx(a,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(G,{rating:Math.round(g.averageRating||0),readonly:!0,size:"sm"}),e.jsx("span",{className:"text-2xl font-bold",children:(g.averageRating||0).toFixed(1)})]})})]}),e.jsxs(l,{children:[e.jsxs(i,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(r,{className:"text-sm font-medium",children:"Total Ratings"}),e.jsx(Y,{className:"h-6 w-6 text-yellow-500"})]}),e.jsx(a,{children:e.jsx("div",{className:"text-2xl font-bold",children:g.totalRatings||0})})]})]})]})]})}export{Ne as default};
