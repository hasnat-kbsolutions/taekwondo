import{r as u,j as e,Y as H,b as x,y as _}from"./app-2gn4RfSZ.js";import{B as A}from"./button-BIncYwTu.js";import{B as K}from"./badge-BdwXvqD0.js";import{A as O,B as U,D as W,a as q,b as z,c as n}from"./authenticated-layout-Cg-1muXU.js";import{S as y,a as N,b as w,c as S,e as i}from"./select-DucK0tRK.js";import{D as X}from"./DataTable-DGXkLYlU.js";import{C as c,a as d,b as o,c as m}from"./card-aDrCg9A8.js";import{L as M}from"./label-DHZZwbSO.js";import{W as R}from"./wallet-BHnETrAg.js";import{H as B}from"./hourglass-15x-2Ss_.js";import{C as T}from"./circle-x-BxOfsFzc.js";import{E as G}from"./ellipsis-Da7RdrnB.js";import{S as Q}from"./square-pen-l5RzgZWa.js";import{C as Z}from"./circle-check-big-CkUaz1X6.js";import{T as ee}from"./trash-2-DD-1iLwA.js";import{F as se}from"./file-text-PEhMVDmf.js";import{D as ae}from"./download-MkR0Ff7t.js";import"./input-Dj8_zug_.js";import"./separator-B-OjaV0S.js";import"./index-Bkygkmel.js";import"./createLucideIcon-DybH0MdA.js";import"./building-2-DNx1rPF9.js";import"./users-CkuQDTLu.js";import"./log-out-C5WUean8.js";import"./sun-CBb6fQqu.js";import"./index-CBzvCrkR.js";import"./index-BFcKiWpC.js";import"./chevron-down-ytmlgpZO.js";import"./table-2ad5ZTOX.js";const D=(s,l="MYR")=>{const t=Number(s)||0;return l==="JPY"?t.toLocaleString():t.toFixed(2)},le=[{header:"#",cell:({row:s})=>s.index+1},{header:"Student",cell:({row:s})=>{var l;return((l=s.original.student)==null?void 0:l.name)||"-"}},{header:"Amount",cell:({row:s})=>{var p;const l=((p=s.original.currency)==null?void 0:p.symbol)||"RM",t=s.original.currency_code||"MYR";return`${l} ${D(s.original.amount,t)}`}},{header:"Status",cell:({row:s})=>e.jsx(K,{variant:s.original.status==="paid"||s.original.status==="success"?"default":"destructive",children:s.original.status})},{header:"Method",accessorKey:"method"},{header:"Payment Month",accessorKey:"payment_month"},{header:"Pay At",accessorKey:"pay_at"},{header:"Actions",cell:({row:s})=>e.jsxs(W,{children:[e.jsx(q,{asChild:!0,children:e.jsx(A,{variant:"ghost",size:"icon",className:"h-8 w-8",children:e.jsx(G,{className:"h-4 w-4"})})}),e.jsxs(z,{align:"end",children:[e.jsx(n,{asChild:!0,children:e.jsxs(x,{href:route("club.payments.edit",s.original.id),children:[e.jsx(Q,{className:"w-4 h-4 mr-2"})," Edit"]})}),s.original.status==="unpaid"&&e.jsx(n,{asChild:!0,children:e.jsxs(x,{href:route("club.payments.updateStatus",s.original.id),method:"patch",data:{status:"paid"},as:"button",children:[e.jsx(Z,{className:"w-4 h-4 mr-2"})," Mark as Paid"]})}),(s.original.status==="paid"||s.original.status==="success")&&e.jsx(n,{asChild:!0,children:e.jsxs(x,{href:route("club.payments.updateStatus",s.original.id),method:"patch",data:{status:"unpaid"},as:"button",children:[e.jsx(T,{className:"w-4 h-4 mr-2"})," Mark as Unpaid"]})}),e.jsx(n,{asChild:!0,children:e.jsxs(x,{href:route("club.payments.destroy",s.original.id),method:"delete",as:"button",children:[e.jsx(ee,{className:"w-4 h-4 mr-2"})," Delete"]})}),e.jsx(n,{asChild:!0,children:e.jsxs(x,{href:route("invoice.show",{payment:s.original.id}),children:[e.jsx(se,{className:"w-4 h-4 mr-2"})," Invoice"]})}),e.jsxs(n,{onClick:l=>{l.preventDefault();const t=route("invoice.download",{payment:s.original.id});window.open(t,"_blank")},children:[e.jsx(ae,{className:"w-4 h-4 mr-2"})," Download Invoice"]})]})]})}],te=new Date().getFullYear(),re=["All",...Array.from({length:5},(s,l)=>(te-l).toString())],ne=[{label:"January",value:"01"},{label:"February",value:"02"},{label:"March",value:"03"},{label:"April",value:"04"},{label:"May",value:"05"},{label:"June",value:"06"},{label:"July",value:"07"},{label:"August",value:"08"},{label:"September",value:"09"},{label:"October",value:"10"},{label:"November",value:"11"},{label:"December",value:"12"}];function Ee({payments:s,filters:l,totalPayments:t,paidPayments:p,pendingPayments:k,unpaidPayments:F,amountsByCurrency:r,defaultCurrencyCode:h}){var C;const[f,P]=u.useState(l.status||""),[b,Y]=u.useState(l.payment_month?l.payment_month.length===4?l.payment_month:l.payment_month.split("-")[0]:"All"),[g,v]=u.useState(((C=l.payment_month)==null?void 0:C.split("-")[1])||""),E=({year:a,month:j,status:V})=>{const $=a==="All"?"":j?`${a}-${j}`:a;_.get(route("club.payments.index"),{status:V||null,payment_month:$||null},{preserveScroll:!0,preserveState:!0,replace:!0})},[I,L]=u.useState(!0);u.useEffect(()=>{if(I){L(!1);return}E({year:b,month:g,status:f})},[b,g,f]);const J=()=>{P(""),Y("All"),v(""),_.get(route("club.payments.index"),{},{preserveScroll:!0,preserveState:!1,replace:!0})};return e.jsxs(O,{header:"Payments",children:[e.jsx(H,{title:"Payments"}),e.jsxs("div",{className:"container mx-auto py-10 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs(c,{children:[e.jsxs(d,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(o,{className:"text-sm font-medium",children:"Total Payments"}),e.jsx(R,{className:"h-6 w-6 text-primary"})]}),e.jsx(m,{children:e.jsx("div",{className:"text-2xl font-bold",children:t||0})})]}),e.jsxs(c,{children:[e.jsxs(d,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(o,{className:"text-sm font-medium",children:"Paid"}),e.jsx(U,{className:"h-6 w-6 text-green-600"})]}),e.jsx(m,{children:e.jsx("div",{className:"text-2xl font-bold text-green-600",children:p||0})})]}),e.jsxs(c,{children:[e.jsxs(d,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(o,{className:"text-sm font-medium",children:"Pending"}),e.jsx(B,{className:"h-6 w-6 text-yellow-500"})]}),e.jsx(m,{children:e.jsx("div",{className:"text-2xl font-bold text-yellow-500",children:k||0})})]}),e.jsxs(c,{children:[e.jsxs(d,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(o,{className:"text-sm font-medium",children:"Unpaid"}),e.jsx(T,{className:"h-6 w-6 text-red-600"})]}),e.jsx(m,{children:e.jsx("div",{className:"text-2xl font-bold text-red-600",children:F||0})})]}),e.jsxs(c,{className:"col-span-1 sm:col-span-2 lg:col-span-4",children:[e.jsxs(d,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(o,{className:"text-sm font-medium",children:"Total Revenue"}),e.jsx(R,{className:"h-6 w-6 text-primary"})]}),e.jsx(m,{children:e.jsxs("div",{className:"space-y-1 w-full",children:[e.jsxs("div",{className:"text-lg font-bold",children:[h==="MYR"?"RM":h," ",D((r==null?void 0:r[h||"MYR"])||0,h||"MYR")]}),r&&Object.keys(r).length>1&&e.jsx("div",{className:"text-xs text-muted-foreground space-y-1",children:Object.entries(r).filter(([a])=>a!==h).map(([a,j])=>e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{children:[a,":"]}),e.jsx("span",{children:D(j,a)})]},a))})]})})]})]}),e.jsxs(c,{children:[e.jsxs(d,{className:"flex flex-row items-center justify-between",children:[e.jsx(o,{children:"Payments"}),e.jsx(x,{href:route("club.payments.create"),children:e.jsx(A,{children:"Add Payment"})})]}),e.jsxs(m,{children:[e.jsx("div",{className:"mb-6 p-4 border rounded-lg bg-muted/50",children:e.jsxs("div",{className:"flex items-end gap-4 flex-wrap",children:[e.jsxs("div",{className:"flex flex-col w-[160px]",children:[e.jsx(M,{className:"text-sm mb-1",children:"Year"}),e.jsxs(y,{value:b,onValueChange:a=>{Y(a),a==="All"&&v("")},children:[e.jsx(N,{children:e.jsx(w,{placeholder:"Year"})}),e.jsx(S,{children:re.map(a=>e.jsx(i,{value:a,children:a},a))})]})]}),e.jsxs("div",{className:"flex flex-col w-[160px]",children:[e.jsx(M,{className:"text-sm mb-1",children:"Month"}),e.jsxs(y,{value:g,onValueChange:a=>v(a==="all"?"":a),children:[e.jsx(N,{children:e.jsx(w,{placeholder:"Month"})}),e.jsxs(S,{children:[e.jsx(i,{value:"all",children:"All"}),ne.map(a=>e.jsx(i,{value:a.value,children:a.label},a.value))]})]})]}),e.jsxs("div",{className:"flex flex-col w-[160px]",children:[e.jsx(M,{className:"text-sm mb-1",children:"Status"}),e.jsxs(y,{value:f,onValueChange:a=>P(a==="all"?"":a),children:[e.jsx(N,{children:e.jsx(w,{placeholder:"All Statuses"})}),e.jsxs(S,{children:[e.jsx(i,{value:"all",children:"All"}),e.jsx(i,{value:"paid",children:"Paid"}),e.jsx(i,{value:"unpaid",children:"Unpaid"})]})]})]}),e.jsx("div",{className:"flex items-end",children:e.jsx(A,{variant:"secondary",onClick:J,children:"Reset Filters"})})]})}),e.jsx(X,{data:s,columns:le})]})]})]})]})}export{Ee as default};
