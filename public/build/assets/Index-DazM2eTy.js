import{r as x,W as w,j as e,Y as C,b as n,y as j}from"./app-ByP4EyMF.js";import{s as o}from"./index-sFwGSaal.js";import{B as l}from"./button-xRIIPuWW.js";import{A as b,D as y,a as v,b as N,c as p}from"./authenticated-layout-Qq67eihM.js";import{D}from"./DataTable-Dw3B_R9W.js";import{B as S}from"./badge-Dh2Aq8W_.js";import{L as u}from"./label-DlfdlFhI.js";import{C as z,a as P,b as E,c as _}from"./card-CKPA4ccG.js";import{C as I}from"./country-dropdown-Dw1yaK_W.js";import{D as K,a as T,b as A,c as F,d as U,e as L}from"./dialog-By_CRj9h.js";import{I as g}from"./input-DHU4GFng.js";import{U as B}from"./users-BmXZoUBI.js";import{E as M}from"./ellipsis-C7xeqP8s.js";import{E as k}from"./eye-BKf0uv2I.js";import{S as q}from"./square-pen-CQC0BOid.js";import{K as H}from"./key-BPJsrajE.js";import{T as O}from"./trash-2-BVfeJSpJ.js";import"./separator-DivMgUP8.js";import"./index-DmN_BMdc.js";import"./sun-w0LeklHu.js";import"./log-out-DV0RpnIg.js";import"./table-9EkxEIEw.js";import"./popover-BP-YhOe2.js";import"./index-UrMmZlMe.js";import"./globe-D58x0wZ6.js";import"./chevron-down-oDmv8qA3.js";const R=d=>[{header:"#",cell:({row:s})=>s.index+1},{header:"Logo",cell:({row:s})=>s.original.logo?e.jsx("img",{src:s.original.logo,alt:"Club Logo",className:"w-10 h-10 object-cover rounded"}):"-"},{header:"User Name",cell:({row:s})=>{var t;return((t=s.original.user)==null?void 0:t.name)??"-"}},{header:"Email",cell:({row:s})=>{var t;return((t=s.original.user)==null?void 0:t.email)??"-"}},{header:"City",accessorKey:"city"},{header:"Country",accessorKey:"country"},{header:"Phone",accessorKey:"phone"},{header:"Tax No.",accessorKey:"tax_number"},{header:"Invoice Prefix",accessorKey:"invoice_prefix"},{header:"Status",cell:({row:s})=>e.jsx(S,{variant:s.original.status?"default":"destructive",children:s.original.status?"Active":"Inactive"})},{header:"Students",cell:({row:s})=>{var i;const t=((i=s.original.students)==null?void 0:i.length)||0,c=s.original.id;return e.jsxs(n,{href:o("organization.clubs.students.index",c),className:"flex items-center gap-2 hover:text-primary transition-colors cursor-pointer",children:[e.jsx(B,{className:"h-4 w-4 text-muted-foreground/50"}),e.jsx("span",{className:"text-muted-foreground",children:t})]})}},{header:"Actions",cell:({row:s})=>e.jsxs(y,{children:[e.jsx(v,{asChild:!0,children:e.jsx(l,{variant:"ghost",size:"icon",className:"h-8 w-8",children:e.jsx(M,{className:"h-4 w-4"})})}),e.jsxs(N,{align:"end",children:[e.jsx(p,{asChild:!0,children:e.jsxs(n,{href:o("organization.profile.show-club",s.original.id),children:[e.jsx(k,{className:"w-4 h-4 mr-2"})," View Profile"]})}),e.jsx(p,{asChild:!0,children:e.jsxs(n,{href:o("organization.clubs.edit",s.original.id),children:[e.jsx(q,{className:"w-4 h-4 mr-2"})," Edit"]})}),d&&e.jsxs(p,{onClick:()=>d(s.original),children:[e.jsx(H,{className:"w-4 h-4 mr-2"})," Change Password"]}),e.jsx(p,{asChild:!0,children:e.jsxs(n,{href:o("organization.clubs.destroy",s.original.id),method:"delete",as:"button",children:[e.jsx(O,{className:"w-4 h-4 mr-2"})," Delete"]})})]})]})}];function ge({clubs:d,filters:s}){const[t,c]=x.useState(s.country||""),[i,m]=x.useState(null),r=w({password:"",password_confirmation:""}),f=()=>{c(""),j.get(o("organization.clubs.index"),{},{preserveScroll:!0,preserveState:!0})};return e.jsxs(b,{header:"Clubs",children:[e.jsx(C,{title:"Organizations"}),e.jsx("div",{className:"container mx-auto py-10",children:e.jsxs(z,{children:[e.jsxs(P,{className:"flex flex-row items-center justify-between",children:[e.jsx(E,{children:"Clubs"}),e.jsx(n,{href:o("organization.clubs.create"),children:e.jsx(l,{children:"Add Club"})})]}),e.jsxs(_,{children:[e.jsx("div",{className:"mb-6 p-4 border rounded-lg bg-muted/50",children:e.jsxs("div",{className:"flex items-end gap-4 flex-wrap",children:[e.jsxs("div",{className:"flex flex-col w-[200px]",children:[e.jsx(u,{className:"text-sm mb-1",children:"Country"}),e.jsx(I,{placeholder:"All Countries",defaultValue:t||"",onChange:a=>{const h=(a==null?void 0:a.alpha3)||"";c(h),j.get(o("organization.clubs.index"),{country:typeof h=="string"?h:null},{preserveScroll:!0,preserveState:!0,replace:!0})},slim:!1})]}),e.jsx("div",{className:"flex items-end",children:e.jsx(l,{variant:"secondary",onClick:f,children:"Reset Filters"})})]})}),e.jsx(D,{columns:R(a=>m(a)),data:d})]})]})}),i&&e.jsx(K,{open:!!i,onOpenChange:a=>{a||(m(null),r.reset())},children:e.jsxs(T,{children:[e.jsxs(A,{children:[e.jsx(F,{children:"Change Password"}),e.jsxs(U,{children:["Update password for ",i.name]})]}),e.jsxs("form",{onSubmit:a=>{a.preventDefault(),r.patch(o("organization.clubs.updatePassword",i.id),{onSuccess:()=>{m(null),r.reset()}})},className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs(u,{htmlFor:"password",children:["New Password"," ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(g,{id:"password",type:"password",placeholder:"Enter new password",value:r.data.password,onChange:a=>r.setData("password",a.target.value),required:!0}),r.errors.password&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:r.errors.password})]}),e.jsxs("div",{children:[e.jsxs(u,{htmlFor:"password_confirmation",children:["Confirm Password"," ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(g,{id:"password_confirmation",type:"password",placeholder:"Confirm new password",value:r.data.password_confirmation,onChange:a=>r.setData("password_confirmation",a.target.value),required:!0}),r.errors.password_confirmation&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:r.errors.password_confirmation})]}),e.jsxs(L,{children:[e.jsx(l,{type:"button",variant:"outline",onClick:()=>{m(null),r.reset()},children:"Cancel"}),e.jsx(l,{type:"submit",disabled:r.processing,children:r.processing?"Updating...":"Update Password"})]})]})]})})]})}export{ge as default};
