import{r as x,W as w,j as e,Y as C,b as m,y as j}from"./app-C2xXveN-.js";import{s as i}from"./index-sFwGSaal.js";import{B as n}from"./button-CpLBrkPM.js";import{A as b,D as y,a as v,b as N,c as u}from"./authenticated-layout-BjG0-HbX.js";import{D}from"./DataTable-B7X2CYu4.js";import{B as S}from"./badge-CZbiwBxD.js";import{L as h}from"./label-s6w04Ko4.js";import{C as _,a as z,b as P,c as E}from"./card-DbE4vXCG.js";import{C as I}from"./country-dropdown-BcGIJNT5.js";import{D as K,a as T,b as A,c as F,d as U,e as L}from"./dialog-ByGTnqFk.js";import{I as g}from"./input-uKThI7IY.js";import{U as B}from"./users-BBtCh4Aq.js";import{E as M}from"./ellipsis-ObQ0B4yH.js";import{S as k}from"./square-pen-C1mtrOLi.js";import{K as q}from"./key-C8Ywy1ls.js";import{T as H}from"./trash-2-DlbeyM8X.js";import"./separator-Be3qWvhY.js";import"./index-BCtSHVQ3.js";import"./sun-wqgmDwy9.js";import"./log-out-BUfAgkVI.js";import"./table-DT4u8R7z.js";import"./popover-EqWAvmPT.js";import"./index-C9JcK9ps.js";import"./globe-DAY5NmWv.js";import"./chevron-down-cEcyA7ib.js";const O=l=>[{header:"#",cell:({row:s})=>s.index+1},{header:"Logo",cell:({row:s})=>s.original.logo?e.jsx("img",{src:s.original.logo,alt:"Club Logo",className:"w-10 h-10 object-cover rounded"}):"-"},{header:"User Name",cell:({row:s})=>{var t;return((t=s.original.user)==null?void 0:t.name)??"-"}},{header:"Email",cell:({row:s})=>{var t;return((t=s.original.user)==null?void 0:t.email)??"-"}},{header:"City",accessorKey:"city"},{header:"Country",accessorKey:"country"},{header:"Phone",accessorKey:"phone"},{header:"Tax No.",accessorKey:"tax_number"},{header:"Invoice Prefix",accessorKey:"invoice_prefix"},{header:"Status",cell:({row:s})=>e.jsx(S,{variant:s.original.status?"default":"destructive",children:s.original.status?"Active":"Inactive"})},{header:"Students",cell:({row:s})=>{var o;const t=((o=s.original.students)==null?void 0:o.length)||0,d=s.original.id;return e.jsxs(m,{href:i("organization.students.index",{club_id:d}),className:"flex items-center gap-2 hover:text-primary transition-colors cursor-pointer",children:[e.jsx(B,{className:"h-4 w-4 text-muted-foreground/50"}),e.jsx("span",{className:"text-muted-foreground",children:t})]})}},{header:"Actions",cell:({row:s})=>e.jsxs(y,{children:[e.jsx(v,{asChild:!0,children:e.jsx(n,{variant:"ghost",size:"icon",className:"h-8 w-8",children:e.jsx(M,{className:"h-4 w-4"})})}),e.jsxs(N,{align:"end",children:[e.jsx(u,{asChild:!0,children:e.jsxs(m,{href:i("organization.clubs.edit",s.original.id),children:[e.jsx(k,{className:"w-4 h-4 mr-2"})," Edit"]})}),l&&e.jsxs(u,{onClick:()=>l(s.original),children:[e.jsx(q,{className:"w-4 h-4 mr-2"})," Change Password"]}),e.jsx(u,{asChild:!0,children:e.jsxs(m,{href:i("organization.clubs.destroy",s.original.id),method:"delete",as:"button",children:[e.jsx(H,{className:"w-4 h-4 mr-2"})," Delete"]})})]})]})}];function xe({clubs:l,filters:s}){const[t,d]=x.useState(s.country||""),[o,c]=x.useState(null),r=w({password:"",password_confirmation:""}),f=()=>{d(""),j.get(i("organization.clubs.index"),{},{preserveScroll:!0,preserveState:!0})};return e.jsxs(b,{header:"Clubs",children:[e.jsx(C,{title:"Organizations"}),e.jsx("div",{className:"container mx-auto py-10",children:e.jsxs(_,{children:[e.jsxs(z,{className:"flex flex-row items-center justify-between",children:[e.jsx(P,{children:"Clubs"}),e.jsx(m,{href:i("organization.clubs.create"),children:e.jsx(n,{children:"Add Club"})})]}),e.jsxs(E,{children:[e.jsx("div",{className:"mb-6 p-4 border rounded-lg bg-muted/50",children:e.jsxs("div",{className:"flex items-end gap-4 flex-wrap",children:[e.jsxs("div",{className:"flex flex-col w-[200px]",children:[e.jsx(h,{className:"text-sm mb-1",children:"Country"}),e.jsx(I,{placeholder:"All Countries",defaultValue:t||"",onChange:a=>{const p=(a==null?void 0:a.alpha3)||"";d(p),j.get(i("organization.clubs.index"),{country:typeof p=="string"?p:null},{preserveScroll:!0,preserveState:!0,replace:!0})},slim:!1})]}),e.jsx("div",{className:"flex items-end",children:e.jsx(n,{variant:"secondary",onClick:f,children:"Reset Filters"})})]})}),e.jsx(D,{columns:O(a=>c(a)),data:l})]})]})}),o&&e.jsx(K,{open:!!o,onOpenChange:a=>{a||(c(null),r.reset())},children:e.jsxs(T,{children:[e.jsxs(A,{children:[e.jsx(F,{children:"Change Password"}),e.jsxs(U,{children:["Update password for ",o.name]})]}),e.jsxs("form",{onSubmit:a=>{a.preventDefault(),r.patch(i("organization.clubs.updatePassword",o.id),{onSuccess:()=>{c(null),r.reset()}})},className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs(h,{htmlFor:"password",children:["New Password"," ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(g,{id:"password",type:"password",placeholder:"Enter new password",value:r.data.password,onChange:a=>r.setData("password",a.target.value),required:!0}),r.errors.password&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:r.errors.password})]}),e.jsxs("div",{children:[e.jsxs(h,{htmlFor:"password_confirmation",children:["Confirm Password"," ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(g,{id:"password_confirmation",type:"password",placeholder:"Confirm new password",value:r.data.password_confirmation,onChange:a=>r.setData("password_confirmation",a.target.value),required:!0}),r.errors.password_confirmation&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:r.errors.password_confirmation})]}),e.jsxs(L,{children:[e.jsx(n,{type:"button",variant:"outline",onClick:()=>{c(null),r.reset()},children:"Cancel"}),e.jsx(n,{type:"submit",disabled:r.processing,children:r.processing?"Updating...":"Update Password"})]})]})]})})]})}export{xe as default};
