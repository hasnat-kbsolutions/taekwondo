import{q as P,r as j,j as e,Y as w,b as p,y as u}from"./app-B2yls_G8.js";import{A as E}from"./authenticated-layout-Br6CeGKj.js";import{B as d}from"./button-qaeFqUDr.js";import{C as N,a as g,b,c as y}from"./card-8jx6ta5m.js";import{S as C,a as f,b as v,c as S,e as n}from"./select-CfnHzBCU.js";import{L as z}from"./label-iIedXhA5.js";import"./input-843JHEZG.js";import"./separator-B284bFje.js";import"./index-3l-FFMRW.js";import"./sun-CkXFa_BK.js";import"./users-CA7Ef4of.js";import"./log-out-rFFBYm8k.js";import"./index-Bs-g6ei6.js";import"./index-B1tUJGE2.js";import"./chevron-down-BiH_uZpu.js";function Q(){const{plans:c=[],organizations:A=[],clubs:o=[],filters:a={}}=P().props,[s,h]=j.useState(a!=null&&a.organization_id?String(a.organization_id):"all"),[i,t]=j.useState(a!=null&&a.club_id?String(a.club_id):"all"),_=s&&s!=="all"?o.filter(l=>l.organization_id===Number(s)):o,F=()=>{u.get(route("admin.plans.index"),{organization_id:s&&s!=="all"?s:null,club_id:i&&i!=="all"?i:null})},O=()=>{h("all"),t("all"),u.get(route("admin.plans.index"))};return e.jsxs(E,{header:"Plans",children:[e.jsx(w,{title:"Plans"}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Plans"}),e.jsx(p,{href:route("admin.plans.create"),children:e.jsx(d,{children:"Create Plan"})})]}),e.jsxs(N,{children:[e.jsx(g,{children:e.jsx(b,{children:"Filters"})}),e.jsx(y,{children:e.jsxs("div",{className:"grid grid-cols-3 gap-4 items-end",children:[e.jsxs("div",{children:[e.jsx(z,{children:"Organization"}),e.jsxs(C,{value:s,onValueChange:l=>{h(l),t("all")},children:[e.jsx(f,{children:e.jsx(v,{placeholder:"All Organizations"})}),e.jsxs(S,{children:[e.jsx(n,{value:"all",children:"All Organizations"}),A.map(l=>e.jsx(n,{value:String(l.id),children:l.name},l.id))]})]})]}),e.jsxs("div",{children:[e.jsx(z,{children:"Club"}),e.jsxs(C,{value:i,onValueChange:t,disabled:!s||s==="all",children:[e.jsx(f,{children:e.jsx(v,{placeholder:"All Clubs"})}),e.jsxs(S,{children:[e.jsx(n,{value:"all",children:"All Clubs"}),_.map(l=>{var r;return e.jsxs(n,{value:String(l.id),children:[l.name," (",(r=l.organization)==null?void 0:r.name,")"]},l.id)})]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(d,{onClick:F,children:"Filter"}),e.jsx(d,{variant:"outline",onClick:O,children:"Clear"})]})]})})]}),e.jsxs(N,{children:[e.jsx(g,{children:e.jsx(b,{children:"All Plans"})}),e.jsx(y,{children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-left border-b",children:[e.jsx("th",{className:"py-2 pr-4",children:"Name"}),e.jsx("th",{className:"py-2 pr-4",children:"Organization"}),e.jsx("th",{className:"py-2 pr-4",children:"Club"}),e.jsx("th",{className:"py-2 pr-4",children:"Amount"}),e.jsx("th",{className:"py-2 pr-4",children:"Currency"}),e.jsx("th",{className:"py-2 pr-4",children:"Active"}),e.jsx("th",{className:"py-2 pr-4",children:"Actions"})]})}),e.jsxs("tbody",{children:[c.map(l=>{var r,x,m;return e.jsxs("tr",{className:"border-b last:border-b-0",children:[e.jsx("td",{className:"py-2 pr-4",children:l.name}),e.jsx("td",{className:"py-2 pr-4",children:((x=(r=l.planable)==null?void 0:r.organization)==null?void 0:x.name)||"-"}),e.jsx("td",{className:"py-2 pr-4",children:((m=l.planable)==null?void 0:m.name)||"-"}),e.jsx("td",{className:"py-2 pr-4",children:l.base_amount}),e.jsx("td",{className:"py-2 pr-4",children:l.currency_code}),e.jsx("td",{className:"py-2 pr-4",children:l.is_active?"Yes":"No"}),e.jsx("td",{className:"py-2 pr-4",children:e.jsx(p,{href:route("admin.plans.edit",l.id),className:"text-primary underline",children:"Edit"})})]},l.id)}),c.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"py-4 text-muted-foreground",children:"No plans found."})})]})]})})})]})]})]})}export{Q as default};
