import{r as x,j as e,Y as b,b as g,y as m}from"./app-ByP4EyMF.js";import{s as i}from"./index-sFwGSaal.js";import{D as z}from"./DataTable-Dw3B_R9W.js";import{B as o}from"./button-xRIIPuWW.js";import{C as A,a as w,b as E,c as T}from"./card-CKPA4ccG.js";import{A as B}from"./authenticated-layout-Qq67eihM.js";import{L as h}from"./label-DlfdlFhI.js";import{S as D,a as K,b as R,c as V,e as p}from"./select-DYOzuw-F.js";import{C as v}from"./country-dropdown-Dw1yaK_W.js";import{B as _}from"./badge-Dh2Aq8W_.js";import{R as I}from"./RatingStars-DZWBoLLx.js";import{E as L}from"./eye-BKf0uv2I.js";import{S as P}from"./square-pen-CQC0BOid.js";import{T as F}from"./trash-2-BVfeJSpJ.js";import"./table-9EkxEIEw.js";import"./input-DHU4GFng.js";import"./separator-DivMgUP8.js";import"./index-DmN_BMdc.js";import"./sun-w0LeklHu.js";import"./users-BmXZoUBI.js";import"./log-out-DV0RpnIg.js";import"./index-BMO2_zHf.js";import"./index-UrMmZlMe.js";import"./index-C39nNiIL.js";import"./chevron-down-oDmv8qA3.js";import"./dialog-By_CRj9h.js";import"./popover-BP-YhOe2.js";import"./globe-D58x0wZ6.js";const k=c=>[{header:"#",cell:({row:s})=>s.index+1},{id:"profile_image",header:"Photo",cell:({row:s})=>{const a=s.original.profile_image;if(a){const d=a.startsWith("http")?a:`/storage/${a}`;return e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:d,alt:"Profile",className:"w-10 h-10 rounded-full object-cover",onError:n=>{var l;n.currentTarget.style.display="none",(l=n.currentTarget.nextElementSibling)==null||l.classList.remove("hidden")}}),e.jsx("span",{className:"text-gray-400 italic text-xs hidden absolute inset-0 flex items-center justify-center",children:"No image"})]})}return e.jsx("span",{className:"text-gray-400 italic",children:"No image"})}},{accessorKey:"code",header:"Code"},{accessorKey:"name",header:"Name"},{accessorKey:"surname",header:"Surname"},{accessorKey:"dob",header:"DOB"},{id:"rating",header:"Rating",cell:({row:s})=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(I,{rating:typeof s.original.average_rating=="number"?Math.round(s.original.average_rating):0,readonly:!0,size:"sm"}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:["(",s.original.total_ratings,")"]})]})},{accessorKey:"status",header:"Status",cell:({row:s})=>e.jsx(_,{variant:s.original.status?"default":"destructive",children:s.original.status?"Active":"Inactive"})},{id:"actions",header:"Actions",cell:({row:s})=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(g,{href:i("organization.profile.show-student",s.original.id),children:e.jsx(o,{variant:"ghost",size:"sm",title:"View Profile",children:e.jsx(L,{className:"w-4 h-4 text-blue-600"})})}),e.jsx(g,{href:i("organization.students.edit",s.original.id),children:e.jsx(o,{variant:"ghost",size:"sm",title:"Edit",children:e.jsx(P,{className:"w-4 h-4 text-green-600"})})}),e.jsx(o,{variant:"ghost",size:"sm",title:"Delete",onClick:()=>{c&&confirm("Are you sure you want to delete this student?")&&c(s.original)},children:e.jsx(F,{className:"w-4 h-4 text-red-600"})})]})}];function pe({students:c,nationalities:N=[],countries:s=[],filters:a}){const[d,n]=x.useState(a.nationality||""),[l,j]=x.useState(a.country||""),[f,y]=x.useState(a.status||""),u=t=>{m.get(i("organization.students.index"),{nationality:t.nationality??(d||null),country:t.country??(l||null),status:t.status??(f||null)},{preserveScroll:!0,preserveState:!0,replace:!0})},S=()=>{n(""),j(""),y(""),m.get(i("organization.students.index"),{},{preserveScroll:!0,preserveState:!1,replace:!0})},C=t=>{m.delete(i("organization.students.destroy",t.id),{onSuccess:()=>{m.visit(i("organization.students.index"))}})};return e.jsxs(B,{header:"Students",children:[e.jsx(b,{title:"Students"}),e.jsx("div",{className:"container mx-auto py-10",children:e.jsxs(A,{children:[e.jsxs(w,{className:"flex flex-row items-center justify-between",children:[e.jsx(E,{children:"Students"}),e.jsx(g,{href:i("organization.students.create"),children:e.jsx(o,{children:"Add Student"})})]}),e.jsxs(T,{children:[e.jsx("div",{className:"mb-6 p-4 border rounded-lg bg-muted/50",children:e.jsxs("div",{className:"flex items-end gap-4 flex-wrap",children:[e.jsxs("div",{className:"w-[200px]",children:[e.jsx(h,{className:"text-sm mb-1",children:"Nationality"}),e.jsx(v,{placeholder:"All Nationalities",defaultValue:d||"",onChange:t=>{const r=(t==null?void 0:t.alpha3)||"";n(r),u({nationality:r})},slim:!1})]}),e.jsxs("div",{className:"w-[200px]",children:[e.jsx(h,{className:"text-sm mb-1",children:"Country"}),e.jsx(v,{placeholder:"All Countries",defaultValue:l||"",onChange:t=>{const r=(t==null?void 0:t.alpha3)||"";j(r),u({country:r})}})]}),e.jsxs("div",{className:"flex flex-col w-[200px]",children:[e.jsx(h,{className:"text-sm mb-1",children:"Status"}),e.jsxs(D,{value:f,onValueChange:t=>{const r=t==="all"?"":t;y(r),u({status:r})},children:[e.jsx(K,{children:e.jsx(R,{placeholder:"All Statuses"})}),e.jsxs(V,{children:[e.jsx(p,{value:"all",children:"All"}),e.jsx(p,{value:"active",children:"Active"}),e.jsx(p,{value:"inactive",children:"Inactive"})]})]})]}),e.jsx("div",{className:"flex items-end",children:e.jsx(o,{variant:"secondary",onClick:S,children:"Reset Filters"})})]})}),e.jsx(z,{columns:k(C),data:c})]})]})})]})}export{k as columns,pe as default};
