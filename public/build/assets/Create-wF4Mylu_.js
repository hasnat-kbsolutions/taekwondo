import{W as g,r as o,j as e,Y as N}from"./app-BwTXSz7i.js";import{A as v,t as m}from"./authenticated-layout-DXIZPje9.js";import{B as x}from"./button-BCDa-7Qv.js";import{L as h}from"./label-C6qedFZr.js";import{C,a as S,b as y,c as w}from"./card-OxrEwD4R.js";import{S as A,a as P,b as D,c as F,d as T,e as k}from"./select-B073Gnsp.js";import{P as E,a as L,C as R,b as _,c as $}from"./popover-ZExop_0M.js";import{f as B}from"./format-7_oTgTIh.js";import"./input-BTbbPB6x.js";import"./index-CPCL5TU8.js";import"./index-qGe5pddD.js";import"./Combination-Ds_XDTaj.js";function U({clubs:p}){const{data:t,setData:l,post:u,processing:j}=g({date:"",attendances:{}}),[d,I]=o.useState([]),[c,b]=o.useState({club_id:""}),i=(a,s,r)=>{l("attendances",{...t.attendances,[a]:{...t.attendances[a],[s]:r}})},f=a=>{a.preventDefault(),u(route("branch.attendances.store"),{onSuccess:()=>{m.success("Attendance submitted successfully!")},onError:s=>{m.error("Failed to submit attendance."),console.error(s)}})};return e.jsxs(v,{header:"Record Attendance",children:[e.jsx(N,{title:"Record Attendance"}),e.jsx("div",{className:"container mx-auto py-10",children:e.jsxs(C,{children:[e.jsx(S,{children:e.jsx(y,{children:"New Attendance"})}),e.jsx(w,{children:e.jsxs("form",{onSubmit:f,className:"flex flex-wrap",children:[e.jsxs("div",{className:"w-[50%] px-2",children:[e.jsx(h,{htmlFor:"date",children:"Date"}),e.jsxs(E,{children:[e.jsx(L,{asChild:!0,children:e.jsxs(x,{variant:"outline","data-empty":!t.date,className:"data-[empty=true]:text-muted-foreground w-full justify-start text-left font-normal",children:[e.jsx(R,{className:"mr-2 h-4 w-4"}),t.date?B(new Date(t.date),"PPP"):e.jsx("span",{children:"Pick a date"})]})}),e.jsx(_,{className:"w-auto p-0",children:e.jsx($,{mode:"single",selected:t.date?new Date(t.date):void 0,onSelect:a=>l("date",a?a.toISOString().split("T")[0]:""),initialFocus:!0})})]})]}),e.jsxs("div",{className:"w-[50%] px-2 mt-4",children:[e.jsx(h,{htmlFor:"club",children:"Club"}),e.jsxs(A,{value:c.club_id,onValueChange:a=>b({...c,club_id:a}),children:[e.jsx(P,{className:"w-full p-2 border rounded-lg",children:e.jsx(D,{placeholder:"Select Club"})}),e.jsx(F,{children:e.jsx(T,{children:p.map(a=>e.jsx(k,{value:String(a.id),children:a.name},a.id))})})]})]}),d.length>0&&e.jsx("div",{className:"w-full mt-4 overflow-x-auto",children:e.jsxs("table",{className:"w-full table-auto border border-gray-300",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left px-4 py-2 border-b",children:"Name"}),e.jsx("th",{className:"text-left px-4 py-2 border-b",children:"Attendance"})]})}),e.jsx("tbody",{children:d.map(a=>{var s,r;return e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-2 border-b",children:a.name}),e.jsx("td",{className:"px-4 py-2 border-b",children:e.jsxs("div",{className:"flex gap-6",children:[e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"radio",name:`attendance-${a.id}`,value:"present",checked:((s=t.attendances[a.id])==null?void 0:s.status)==="present",onChange:n=>i(a.id,"status",n.target.value)}),e.jsx("span",{children:"Present"})]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"radio",name:`attendance-${a.id}`,value:"absent",checked:((r=t.attendances[a.id])==null?void 0:r.status)==="absent",onChange:n=>i(a.id,"status",n.target.value)}),e.jsx("span",{children:"Absent"})]})]})})]},a.id)})})]})}),e.jsx("div",{className:"w-[100%] px-2 mt-4",children:e.jsx(x,{type:"submit",disabled:j,children:"Submit Attendance"})})]})})]})})]})}export{U as default};
