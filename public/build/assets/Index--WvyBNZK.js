import{r as h,j as e,Y as A,b as m,y as C}from"./app-D1SDBIop.js";import{A as D,X as E,D as T,a as I,b as M,c as u}from"./authenticated-layout-CCz5eQ_q.js";import{B as x}from"./button-7Hd0cb1s.js";import{C as K,a as O,b as V,c as k}from"./card-SIQLewJN.js";import{D as B}from"./DataTable-CTlwiT1d.js";import{S as b,a as w,b as z,c as S,e as n}from"./select-DuabGzMV.js";import{I as P}from"./input-B3m-7Gcr.js";import{L as g}from"./label-Mi81xqvw.js";import{F as $}from"./file-text-BEFVim-G.js";import{E as q}from"./ellipsis-DuWf100E.js";import{S as H}from"./square-pen-Dy-mR3_4.js";import{T as R}from"./trash-2-DHIUmDlX.js";import{E as X}from"./eye-DIUvHSTv.js";import"./separator-CTLkRMH0.js";import"./index-D1s9PUES.js";import"./sun-Dezua4s8.js";import"./users-BytQ2UPK.js";import"./log-out-BkyLan4n.js";import"./table-lA51mLPw.js";import"./index-DOKFqae7.js";import"./index-CncvHzeb.js";import"./chevron-down-khwMYqqQ.js";const ge=({certifications:j,organizations:l,clubs:s,filters:o})=>{const[a,t]=h.useState({organization_id:o.organization_id||"all",club_id:o.club_id||"all",search:o.search||""}),v=h.useMemo(()=>!a.organization_id||a.organization_id==="all"?s:s.filter(r=>r.organization_id.toString()===a.organization_id),[s,a.organization_id]),p=h.useMemo(()=>j.filter(r=>{var _,f;const i=!a.search||r.student_name.toLowerCase().includes(a.search.toLowerCase())||r.club_name.toLowerCase().includes(a.search.toLowerCase())||r.organization_name.toLowerCase().includes(a.search.toLowerCase()),N=!a.organization_id||a.organization_id==="all"||r.organization_name===((_=l.find(d=>d.id.toString()===a.organization_id))==null?void 0:_.name),L=!a.club_id||a.club_id==="all"||r.club_name===((f=s.find(d=>d.id.toString()===a.club_id))==null?void 0:f.name);return i&&N&&L}),[j,a,l,s]),c=r=>{const i={organization_id:r.organization_id==="all"?"":r.organization_id,club_id:r.club_id==="all"?"":r.club_id,search:r.search};C.get(route("admin.certifications.index"),i,{preserveState:!0,preserveScroll:!0})},F=()=>{t({organization_id:"all",club_id:"all",search:""}),C.get(route("admin.certifications.index"),{},{preserveState:!0,preserveScroll:!0})},y=[{header:"#",cell:({row:r})=>r.index+1},{header:"Student",accessorKey:"student_name"},{header:"Club",accessorKey:"club_name"},{header:"Organization",accessorKey:"organization_name"},{header:"File",cell:({row:r})=>e.jsxs("a",{href:`/storage/${r.original.file}`,target:"_blank",rel:"noopener noreferrer",className:"text-gray-400 hover:text-white flex items-center transition-colors",children:[e.jsx($,{className:"w-4 h-4 mr-1"}),"View"]})},{header:"Issued At",accessorKey:"issued_at"},{header:"Notes",accessorKey:"notes"},{header:"Actions",cell:({row:r})=>e.jsxs(T,{children:[e.jsx(I,{asChild:!0,children:e.jsx(x,{variant:"ghost",size:"icon",className:"h-8 w-8",children:e.jsx(q,{className:"h-4 w-4"})})}),e.jsxs(M,{align:"end",children:[e.jsx(u,{asChild:!0,children:e.jsxs(m,{href:route("admin.certifications.edit",r.original.id),children:[e.jsx(H,{className:"w-4 h-4 mr-2"})," Edit"]})}),e.jsx(u,{asChild:!0,children:e.jsxs(m,{href:route("admin.certifications.destroy",r.original.id),method:"delete",as:"button",children:[e.jsx(R,{className:"w-4 h-4 mr-2"})," Delete"]})}),e.jsx(u,{asChild:!0,children:e.jsxs("a",{href:`/storage/${r.original.file}`,target:"_blank",rel:"noopener noreferrer",children:[e.jsx(X,{className:"w-4 h-4 mr-2"})," View Certification File"]})})]})]})}];return e.jsxs(D,{header:"Certifications",children:[e.jsx(A,{title:"Certifications"}),e.jsx("div",{className:"container mx-auto py-10",children:e.jsxs(K,{children:[e.jsxs(O,{className:"flex flex-row items-center justify-between",children:[e.jsxs(V,{children:["Certifications (",p.length,")"]}),e.jsx(m,{href:route("admin.certifications.create"),children:e.jsx(x,{children:"Add Certification"})})]}),e.jsxs(k,{children:[e.jsx("div",{className:"mb-6 p-4 border rounded-lg bg-muted/50",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx(g,{htmlFor:"search",children:"Search"}),e.jsx(P,{id:"search",placeholder:"Search students, clubs, organizations...",value:a.search,onChange:r=>{const i={...a,search:r.target.value};t(i),c(i)}})]}),e.jsxs("div",{children:[e.jsx(g,{htmlFor:"organization",children:"Organization"}),e.jsxs(b,{value:a.organization_id||"all",onValueChange:r=>{const i={...a,organization_id:r==="all"?"":r,club_id:""};t(i),c(i)},children:[e.jsx(w,{children:e.jsx(z,{placeholder:"All Organizations"})}),e.jsxs(S,{children:[e.jsx(n,{value:"all",children:"All Organizations"}),l.map(r=>e.jsx(n,{value:r.id.toString(),children:r.name},r.id))]})]})]}),e.jsxs("div",{children:[e.jsx(g,{htmlFor:"club",children:"Club"}),e.jsxs(b,{value:a.club_id||"all",onValueChange:r=>{const i={...a,club_id:r==="all"?"":r};t(i),c(i)},children:[e.jsx(w,{children:e.jsx(z,{placeholder:"All Clubs"})}),e.jsxs(S,{children:[e.jsx(n,{value:"all",children:"All Clubs"}),v.map(r=>e.jsx(n,{value:r.id.toString(),children:r.name},r.id))]})]})]}),e.jsx("div",{className:"flex items-end gap-2",children:e.jsxs(x,{variant:"secondary",onClick:F,className:"w-full",children:[e.jsx(E,{className:"w-4 h-4 mr-2"}),"Clear Filters"]})})]})}),e.jsx(B,{data:p,columns:y})]})]})})]})};export{ge as default};
