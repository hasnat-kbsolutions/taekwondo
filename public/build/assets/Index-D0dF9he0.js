import{j as e,r as d,Y as E,b as _,y as u}from"./app-z5-DDlZl.js";import{D as I}from"./DataTable-CfZwFWpi.js";import{B as x}from"./button-LWPzmO8W.js";import{C as B,a as K,b as M,c as R}from"./card-BtibboR8.js";import{A as V,D as L,a as F,b as k,c as S}from"./authenticated-layout-DG3NwruG.js";import{L as m}from"./label-BgM8C8xc.js";import{S as C,a as b,b as A,c as w,e as n}from"./select-eIK-EYoQ.js";import{C as D}from"./country-dropdown-BbiT7Vel.js";import{B as P}from"./badge-ISNvvs_F.js";import{R as U}from"./RatingStars-CyOoK0zO.js";import{E as H}from"./ellipsis-rsmmwxtu.js";import{T as O}from"./trash-2-D6Hb8D5c.js";import"./table-DuLDIJ7-.js";import"./input-CwgJrOeH.js";import"./separator-BKpiOkSc.js";import"./index-C1jkJPUl.js";import"./sun-1OY4TRTr.js";import"./users-Do5M1CKm.js";import"./log-out-CDN_bDFY.js";import"./index-RtcTYlrH.js";import"./index-CleUAN4N.js";import"./chevron-down-CV1sNpCW.js";import"./dialog-Cj05QGM6.js";import"./popover-B5Udndmq.js";import"./globe-Bl4Bj7Ex.js";const W=o=>[{header:"#",cell:({row:s})=>s.index+1},{id:"profile_image",header:"Photo",cell:({row:s})=>{const i=s.original.profile_image;if(i){const h=i.startsWith("http")?i:`/storage/${i}`;return e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:h,alt:"Profile",className:"w-10 h-10 rounded-full object-cover",onError:r=>{var l;r.currentTarget.style.display="none",(l=r.currentTarget.nextElementSibling)==null||l.classList.remove("hidden")}}),e.jsx("span",{className:"text-gray-400 italic text-xs hidden absolute inset-0 flex items-center justify-center",children:"No image"})]})}return e.jsx("span",{className:"text-gray-400 italic",children:"No image"})}},{accessorKey:"code",header:"Code"},{accessorKey:"name",header:"Name"},{accessorKey:"surname",header:"Surname"},{accessorKey:"dob",header:"DOB"},{id:"rating",header:"Rating",cell:({row:s})=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(U,{rating:typeof s.original.average_rating=="number"?Math.round(s.original.average_rating):0,readonly:!0,size:"sm"}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:["(",s.original.total_ratings,")"]})]})},{accessorKey:"status",header:"Status",cell:({row:s})=>e.jsx(P,{variant:s.original.status?"default":"destructive",children:s.original.status?"Active":"Inactive"})},{id:"actions",header:"Actions",cell:({row:s})=>e.jsxs(L,{children:[e.jsx(F,{asChild:!0,children:e.jsx(x,{variant:"ghost",size:"sm",children:e.jsx(H,{className:"w-4 h-4"})})}),e.jsxs(k,{align:"end",children:[e.jsx(S,{asChild:!0,children:e.jsx(_,{href:route("organization.students.edit",s.original.id),children:"Edit"})}),e.jsxs(S,{onClick:()=>{o&&confirm("Are you sure you want to delete this student?")&&o(s.original)},className:"text-red-600",children:[e.jsx(O,{className:"w-4 h-4 mr-2"}),"Delete"]})]})]})}];function ge({students:o,clubs:s=[],nationalities:i=[],countries:h=[],filters:r}){const[l,p]=d.useState(r.club_id||""),[j,g]=d.useState(r.nationality||""),[f,y]=d.useState(r.country||""),[v,N]=d.useState(r.status||""),c=t=>{u.get(route("organization.students.index"),{club_id:t.club_id??(l||null),nationality:t.nationality??(j||null),country:t.country??(f||null),status:t.status??(v||null)},{preserveScroll:!0,preserveState:!0,replace:!0})},z=()=>{p(""),g(""),y(""),N(""),u.get(route("organization.students.index"),{},{preserveScroll:!0,preserveState:!1,replace:!0})},T=t=>{u.delete(route("organization.students.destroy",t.id),{onSuccess:()=>{u.visit(route("organization.students.index"))}})};return e.jsxs(V,{header:"Students",children:[e.jsx(E,{title:"Students"}),e.jsx("div",{className:"container mx-auto py-10",children:e.jsxs(B,{children:[e.jsxs(K,{className:"flex flex-row items-center justify-between",children:[e.jsx(M,{children:"Students"}),!l&&e.jsx(_,{href:route("organization.students.create"),children:e.jsx(x,{children:"Add Student"})})]}),e.jsxs(R,{children:[e.jsx("div",{className:"mb-6 p-4 border rounded-lg bg-muted/50",children:e.jsxs("div",{className:"flex items-end gap-4 flex-wrap",children:[e.jsxs("div",{className:"flex flex-col w-[200px]",children:[e.jsx(m,{className:"text-sm mb-1",children:"Club"}),e.jsxs(C,{value:l,onValueChange:t=>{const a=t==="all"?"":t;p(a),c({club_id:a})},children:[e.jsx(b,{children:e.jsx(A,{placeholder:"All Clubs"})}),e.jsxs(w,{children:[e.jsx(n,{value:"all",children:"All"}),s.map(t=>e.jsx(n,{value:t.id.toString(),children:t.name},t.id))]})]})]}),e.jsxs("div",{className:"w-[200px]",children:[e.jsx(m,{className:"text-sm mb-1",children:"Nationality"}),e.jsx(D,{placeholder:"All Nationalities",defaultValue:j||"",onChange:t=>{const a=(t==null?void 0:t.alpha3)||"";g(a),c({nationality:a})},slim:!1})]}),e.jsxs("div",{className:"w-[200px]",children:[e.jsx(m,{className:"text-sm mb-1",children:"Country"}),e.jsx(D,{placeholder:"All Countries",defaultValue:f||"",onChange:t=>{const a=(t==null?void 0:t.alpha3)||"";y(a),c({country:a})}})]}),e.jsxs("div",{className:"flex flex-col w-[200px]",children:[e.jsx(m,{className:"text-sm mb-1",children:"Status"}),e.jsxs(C,{value:v,onValueChange:t=>{const a=t==="all"?"":t;N(a),c({status:a})},children:[e.jsx(b,{children:e.jsx(A,{placeholder:"All Statuses"})}),e.jsxs(w,{children:[e.jsx(n,{value:"all",children:"All"}),e.jsx(n,{value:"active",children:"Active"}),e.jsx(n,{value:"inactive",children:"Inactive"})]})]})]}),e.jsx("div",{className:"flex items-end",children:e.jsx(x,{variant:"secondary",onClick:z,children:"Reset Filters"})})]})}),e.jsx(I,{columns:W(T),data:o})]})]})})]})}export{W as columns,ge as default};
