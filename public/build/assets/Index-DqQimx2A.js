import{r as m,j as e,Y as U,b as f,y as g}from"./app-C2xXveN-.js";import{A as G,D as J,a as K,b as O,c as _}from"./authenticated-layout-BjG0-HbX.js";import{B as r}from"./button-CpLBrkPM.js";import{C as i,a as n,b as d,c}from"./card-DbE4vXCG.js";import{B as Q}from"./badge-CZbiwBxD.js";import{T as W,a as X,b as F,c as l,d as Z,e as t}from"./table-DT4u8R7z.js";import{S as b,a as S,b as v,c as N,e as a}from"./select-_dWkLhpx.js";import{L as h}from"./label-s6w04Ko4.js";import{P as R}from"./plus-CsokuCdo.js";import{E as $}from"./ellipsis-ObQ0B4yH.js";import{S as ee}from"./square-pen-C1mtrOLi.js";import{T as se}from"./trash-2-DlbeyM8X.js";import"./input-uKThI7IY.js";import"./separator-Be3qWvhY.js";import"./index-BCtSHVQ3.js";import"./sun-wqgmDwy9.js";import"./users-BBtCh4Aq.js";import"./log-out-BUfAgkVI.js";import"./index-C9JcK9ps.js";import"./index-D9Tde0Le.js";import"./chevron-down-cEcyA7ib.js";function ye({studentFees:y,students:B=[],feeTypes:k=[],filters:o,totalFees:E,pendingFees:Y,partialFees:L,paidFees:V}){const[j,w]=m.useState(o.student_id||"all"),[u,C]=m.useState(o.fee_type_id||"all"),[p,T]=m.useState(o.status||"all"),[M,A]=m.useState(o.month||""),H=s=>{confirm("Are you sure you want to delete this student fee?")&&g.delete(route("admin.student-fees.destroy",s))},I=()=>{g.get(route("admin.student-fees.index"),{student_id:j!=="all"?j:null,fee_type_id:u!=="all"?u:null,status:p!=="all"?p:null,month:M||null},{preserveScroll:!0,preserveState:!0})},q=()=>{w("all"),C("all"),T("all"),A(""),g.get(route("admin.student-fees.index"),{},{preserveScroll:!0,preserveState:!1})},z=s=>{const x={pending:"secondary",partial:"default",paid:"default"};return e.jsx(Q,{variant:x[s],children:s.charAt(0).toUpperCase()+s.slice(1)})};return e.jsxs(G,{header:"Student Fees",children:[e.jsx(U,{title:"Student Fees"}),e.jsxs("div",{className:"container mx-auto py-10 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs(i,{children:[e.jsx(n,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:e.jsx(d,{className:"text-sm font-medium",children:"Total Fees"})}),e.jsx(c,{children:e.jsx("div",{className:"text-2xl font-bold",children:E||0})})]}),e.jsxs(i,{children:[e.jsx(n,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:e.jsx(d,{className:"text-sm font-medium",children:"Pending"})}),e.jsx(c,{children:e.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:Y||0})})]}),e.jsxs(i,{children:[e.jsx(n,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:e.jsx(d,{className:"text-sm font-medium",children:"Partial"})}),e.jsx(c,{children:e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:L||0})})]}),e.jsxs(i,{children:[e.jsx(n,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:e.jsx(d,{className:"text-sm font-medium",children:"Paid"})}),e.jsx(c,{children:e.jsx("div",{className:"text-2xl font-bold text-green-600",children:V||0})})]})]}),e.jsxs(i,{children:[e.jsxs(n,{className:"flex flex-row items-center justify-between",children:[e.jsx(d,{children:"Student Fees"}),e.jsx(f,{href:route("admin.student-fees.create"),children:e.jsxs(r,{children:[e.jsx(R,{className:"w-4 h-4 mr-2"}),"Add Student Fee"]})})]}),e.jsxs(c,{children:[e.jsxs("div",{className:"mb-6 p-4 border rounded-lg bg-muted/50 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx(h,{className:"text-sm mb-1",children:"Student"}),e.jsxs(b,{value:j,onValueChange:w,children:[e.jsx(S,{children:e.jsx(v,{placeholder:"All Students"})}),e.jsxs(N,{children:[e.jsx(a,{value:"all",children:"All"}),B.map(s=>e.jsxs(a,{value:String(s.id),children:[s.name," ",s.surname||""]},s.id))]})]})]}),e.jsxs("div",{children:[e.jsx(h,{className:"text-sm mb-1",children:"Fee Type"}),e.jsxs(b,{value:u,onValueChange:C,children:[e.jsx(S,{children:e.jsx(v,{placeholder:"All Fee Types"})}),e.jsxs(N,{children:[e.jsx(a,{value:"all",children:"All"}),k.map(s=>e.jsx(a,{value:String(s.id),children:s.name},s.id))]})]})]}),e.jsxs("div",{children:[e.jsx(h,{className:"text-sm mb-1",children:"Status"}),e.jsxs(b,{value:p,onValueChange:T,children:[e.jsx(S,{children:e.jsx(v,{placeholder:"All Statuses"})}),e.jsxs(N,{children:[e.jsx(a,{value:"all",children:"All"}),e.jsx(a,{value:"pending",children:"Pending"}),e.jsx(a,{value:"partial",children:"Partial"}),e.jsx(a,{value:"paid",children:"Paid"})]})]})]}),e.jsxs("div",{children:[e.jsx(h,{className:"text-sm mb-1",children:"Month (YYYY-MM)"}),e.jsx("input",{type:"month",value:M,onChange:s=>A(s.target.value),className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(r,{onClick:I,children:"Filter"}),e.jsx(r,{variant:"outline",onClick:q,children:"Reset"})]})]}),y.length>0?e.jsxs(W,{children:[e.jsx(X,{children:e.jsxs(F,{children:[e.jsx(l,{children:"Student"}),e.jsx(l,{children:"Fee Type"}),e.jsx(l,{children:"Month"}),e.jsx(l,{children:"Amount"}),e.jsx(l,{children:"Discount"}),e.jsx(l,{children:"Fine"}),e.jsx(l,{children:"Paid"}),e.jsx(l,{children:"Status"}),e.jsx(l,{children:"Due Date"}),e.jsx(l,{className:"text-right",children:"Actions"})]})}),e.jsx(Z,{children:y.map(s=>{var x,D,P;return e.jsxs(F,{children:[e.jsxs(t,{className:"font-medium",children:[(x=s.student)==null?void 0:x.name," ",((D=s.student)==null?void 0:D.surname)||""]}),e.jsx(t,{children:(P=s.fee_type)==null?void 0:P.name}),e.jsx(t,{children:s.month}),e.jsxs(t,{children:["RM"," ",parseFloat(s.amount.toString()).toFixed(2)]}),e.jsxs(t,{children:["RM"," ",parseFloat(s.discount.toString()).toFixed(2)]}),e.jsxs(t,{children:["RM"," ",parseFloat(s.fine.toString()).toFixed(2)]}),e.jsxs(t,{children:["RM"," ",parseFloat(s.paid_amount.toString()).toFixed(2)]}),e.jsx(t,{children:z(s.status)}),e.jsx(t,{children:s.due_date?new Date(s.due_date).toLocaleDateString():"-"}),e.jsx(t,{className:"text-right",children:e.jsxs(J,{children:[e.jsx(K,{asChild:!0,children:e.jsx(r,{variant:"ghost",size:"icon",className:"h-8 w-8",children:e.jsx($,{className:"h-4 w-4"})})}),e.jsxs(O,{align:"end",children:[e.jsx(_,{asChild:!0,children:e.jsxs(f,{href:route("admin.student-fees.edit",s.id),children:[e.jsx(ee,{className:"w-4 h-4 mr-2"}),"Edit"]})}),e.jsxs(_,{onClick:()=>H(s.id),className:"text-red-600",children:[e.jsx(se,{className:"w-4 h-4 mr-2"}),"Delete"]})]})]})})]},s.id)})})]}):e.jsxs("div",{className:"text-center py-10",children:[e.jsx("p",{className:"text-muted-foreground",children:"No student fees found."}),e.jsx(f,{href:route("admin.student-fees.create"),children:e.jsxs(r,{className:"mt-4",children:[e.jsx(R,{className:"w-4 h-4 mr-2"}),"Create Student Fee"]})})]})]})]})]})]})}export{ye as default};
