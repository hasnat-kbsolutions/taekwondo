import{j as e,r as d,Y as K,b as g,y as D}from"./app-v-MKZwHK.js";import{D as F}from"./DataTable-DHEsa1KD.js";import{B as p}from"./button-y2xYF5vs.js";import{C as L,a as W,b as k,c as B}from"./card-Bue6HVht.js";import{A as M,D as R,a as $,b as U,c as h}from"./authenticated-layout-B2ZYBOu0.js";import{L as n}from"./label-C5sGq_pi.js";import{S as w,a as C,b as I,c as A,e as c}from"./select-LjE5uhi2.js";import{C as E}from"./country-dropdown-C5dXovmi.js";import{B as G}from"./badge-CmqDq2dd.js";import{R as P}from"./RatingStars-CmC7DOGv.js";import{D as H,a as O,b as q,c as Y,d as J}from"./dialog-CgX1i5vf.js";import{F as T}from"./file-text--6yfePJP.js";import{E as Q}from"./ellipsis-BFGdkXOv.js";import{E as X}from"./eye-CsYedDQK.js";import{S as Z}from"./square-pen-CoojvQP8.js";import{T as ee}from"./trash-2-BCvy34BF.js";import"./table-s978S__J.js";import"./input-DM5ElhjT.js";import"./separator-DeFpeziM.js";import"./index-CLEmplpx.js";import"./createLucideIcon-aeo75YUw.js";import"./building-2-Bma4Oo2b.js";import"./users-Be_mREES.js";import"./log-out-DFR9R_Ks.js";import"./sun-DA2HSJIJ.js";import"./index-afWeK-hQ.js";import"./index-R1Ab9tXC.js";import"./chevron-down-B8hI96OS.js";import"./popover-Q4Aa8K8j.js";import"./globe-B5CYCGgO.js";const te=x=>[{header:"#",cell:({row:s})=>s.index+1},{id:"profile_image",header:"Photo",cell:({row:s})=>{const i=s.original.profile_image;if(i){const m=i.startsWith("http")?i:`/storage/${i}`;return e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:m,alt:"Profile",className:"w-10 h-10 rounded-full object-cover",onError:l=>{var o;l.currentTarget.style.display="none",(o=l.currentTarget.nextElementSibling)==null||o.classList.remove("hidden")}}),e.jsx("span",{className:"text-gray-400 italic text-xs hidden absolute inset-0 flex items-center justify-center",children:"No image"})]})}return e.jsx("span",{className:"text-gray-400 italic",children:"No image"})}},{accessorKey:"code",header:"Code"},{accessorKey:"name",header:"Name"},{accessorKey:"surname",header:"Surname"},{accessorKey:"dob",header:"DOB"},{accessorKey:"id_passport",header:"ID/Passport"},{id:"identification_document",header:"Documents",cell:({row:s})=>{const i=s.original.identification_document;if(i){const m=i.startsWith("http")?i:`/storage/${i}`;return e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(T,{className:"w-4 h-4 text-blue-500"}),e.jsx("a",{href:m,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 text-xs underline",children:"View Doc"})]})}return e.jsx("span",{className:"text-gray-400 italic text-xs",children:"No doc"})}},{accessorKey:"email",header:"Email"},{accessorKey:"phone",header:"Phone"},{id:"rating",header:"Rating",cell:({row:s})=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(P,{rating:typeof s.original.average_rating=="number"?Math.round(s.original.average_rating):0,readonly:!0,size:"sm"}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:["(",s.original.total_ratings,")"]})]})},{accessorKey:"status",header:"Status",cell:({row:s})=>e.jsx(G,{variant:s.original.status?"default":"destructive",children:s.original.status?"Active":"Inactive"})},{id:"actions",header:"Actions",cell:({row:s})=>{const i=s.original;return e.jsxs(R,{children:[e.jsx($,{asChild:!0,children:e.jsx(p,{variant:"ghost",size:"icon",className:"h-8 w-8",children:e.jsx(Q,{className:"h-4 w-4"})})}),e.jsxs(U,{align:"end",children:[e.jsxs(h,{onClick:()=>x(i),children:[e.jsx(X,{className:"w-4 h-4 mr-2"})," View"]}),e.jsx(h,{asChild:!0,children:e.jsxs(g,{href:route("organization.students.edit",i.id),children:[e.jsx(Z,{className:"w-4 h-4 mr-2"})," Edit"]})}),e.jsx(h,{asChild:!0,children:e.jsxs(g,{href:route("organization.students.destroy",i.id),method:"delete",as:"button",children:[e.jsx(ee,{className:"w-4 h-4 mr-2"})," Delete"]})})]})]})}}];function Te({students:x,clubs:s=[],nationalities:i=[],countries:m=[],filters:l}){const[o,f]=d.useState(l.club_id||""),[j,b]=d.useState(l.nationality||""),[v,N]=d.useState(l.country||""),[y,S]=d.useState(l.status||""),[t,_]=d.useState(null),V=a=>{_(a)},u=a=>{D.get(route("organization.students.index"),{club_id:a.club_id??(o||null),nationality:a.nationality??(j||null),country:a.country??(v||null),status:a.status??(y||null)},{preserveScroll:!0,preserveState:!0,replace:!0})},z=()=>{f(""),b(""),N(""),S(""),D.get(route("organization.students.index"),{},{preserveScroll:!0,preserveState:!1,replace:!0})};return e.jsxs(M,{header:"Students",children:[e.jsx(K,{title:"Students"}),e.jsx("div",{className:"container mx-auto py-10",children:e.jsxs(L,{children:[e.jsxs(W,{className:"flex flex-row items-center justify-between",children:[e.jsx(k,{children:"Students"}),e.jsx(g,{href:route("organization.students.create"),children:e.jsx(p,{children:"Add Student"})})]}),e.jsxs(B,{children:[e.jsx("div",{className:"mb-6 p-4 border rounded-lg bg-muted/50",children:e.jsxs("div",{className:"flex items-end gap-4 flex-wrap",children:[e.jsxs("div",{className:"flex flex-col w-[200px]",children:[e.jsx(n,{className:"text-sm mb-1",children:"Club"}),e.jsxs(w,{value:o,onValueChange:a=>{const r=a==="all"?"":a;f(r),u({club_id:r})},children:[e.jsx(C,{children:e.jsx(I,{placeholder:"All Clubs"})}),e.jsxs(A,{children:[e.jsx(c,{value:"all",children:"All"}),s.map(a=>e.jsx(c,{value:a.id.toString(),children:a.name},a.id))]})]})]}),e.jsxs("div",{className:"w-[200px]",children:[e.jsx(n,{className:"text-sm mb-1",children:"Nationality"}),e.jsx(E,{placeholder:"All Nationalities",defaultValue:j||"",onChange:a=>{const r=(a==null?void 0:a.alpha3)||"";b(r),u({nationality:r})},slim:!1})]}),e.jsxs("div",{className:"w-[200px]",children:[e.jsx(n,{className:"text-sm mb-1",children:"Country"}),e.jsx(E,{placeholder:"All Countries",defaultValue:v||"",onChange:a=>{const r=(a==null?void 0:a.alpha3)||"";N(r),u({country:r})}})]}),e.jsxs("div",{className:"flex flex-col w-[200px]",children:[e.jsx(n,{className:"text-sm mb-1",children:"Status"}),e.jsxs(w,{value:y,onValueChange:a=>{const r=a==="all"?"":a;S(r),u({status:r})},children:[e.jsx(C,{children:e.jsx(I,{placeholder:"All Statuses"})}),e.jsxs(A,{children:[e.jsx(c,{value:"all",children:"All"}),e.jsx(c,{value:"active",children:"Active"}),e.jsx(c,{value:"inactive",children:"Inactive"})]})]})]}),e.jsx("div",{className:"flex items-end",children:e.jsx(p,{variant:"secondary",onClick:z,children:"Reset Filters"})})]})}),e.jsx(F,{columns:te(V),data:x})]})]})}),e.jsx(H,{open:!!t,onOpenChange:()=>_(null),children:e.jsxs(O,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(q,{children:[e.jsx(Y,{children:"Student Details"}),e.jsx(J,{children:"View detailed information about the student."})]}),t&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex justify-center",children:e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[t.profile_image?e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:t.profile_image.startsWith("http")?t.profile_image:`/storage/${t.profile_image}`,alt:"Profile",className:"w-32 h-32 rounded-full object-cover border-2 border-gray-200 shadow-lg",onError:a=>{var r;a.currentTarget.style.display="none",(r=a.currentTarget.nextElementSibling)==null||r.classList.remove("hidden")}}),e.jsx("div",{className:"w-32 h-32 hidden flex items-center justify-center rounded-full bg-gray-100 text-gray-400 text-sm italic border-2 border-gray-200",children:"No Image"})]}):e.jsx("div",{className:"w-32 h-32 flex items-center justify-center rounded-full bg-gray-100 text-gray-400 text-sm italic border-2 border-gray-200",children:"No Image"}),e.jsxs("div",{className:"text-center",children:[e.jsxs("h3",{className:"font-semibold text-lg",children:[t.name," ",t.surname]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:t.code})]})]})}),e.jsx("div",{className:"grid grid-cols-2 gap-4",children:[{label:"UID",value:t.uid},{label:"Email",value:t.email},{label:"Phone",value:t.phone},{label:"Grade",value:t.grade},{label:"Gender",value:t.gender},{label:"Nationality",value:t.nationality},{label:"Date of Birth",value:t.dob?new Date(t.dob).toLocaleDateString():"Not specified"},{label:"Date of Death",value:t.dod?new Date(t.dod).toLocaleDateString():"Not specified"},{label:"ID/Passport",value:t.id_passport},{label:"Identification Document",value:t.identification_document?e.jsx("a",{href:t.identification_document.startsWith("http")?t.identification_document:`/storage/${t.identification_document}`,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 underline",children:"View Document"}):"No document uploaded"},{label:"Website",value:t.website||"Not specified"},{label:"Street",value:t.street||"Not specified"},{label:"Postal Code",value:t.postal_code||"Not specified"},{label:"City",value:t.city||"Not specified"},{label:"Country",value:t.country||"Not specified"},{label:"Status",value:t.status?"Active":"Inactive"},{label:"Rating",value:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(P,{rating:typeof t.average_rating=="number"?Math.round(t.average_rating):0,readonly:!0,size:"sm"}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[typeof t.average_rating=="number"?t.average_rating.toFixed(1):"0.0"," ","(",t.total_ratings," ","ratings)"]})]})}].map((a,r)=>e.jsxs("div",{className:"space-y-1",children:[e.jsx(n,{className:"text-sm font-medium text-muted-foreground",children:a.label}),e.jsx("div",{className:"text-sm",children:a.value})]},r))}),e.jsxs("div",{className:"border-t pt-6",children:[e.jsx("h4",{className:"font-semibold mb-4",children:"Attachments"}),e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{className:"text-sm font-medium text-muted-foreground",children:"Profile Image"}),e.jsx("div",{className:"bg-gray-50 rounded-lg p-4 border-2 border-dashed border-gray-200 min-h-[200px] flex items-center justify-center",children:t.profile_image?e.jsx("img",{src:t.profile_image.startsWith("http")?t.profile_image:`/storage/${t.profile_image}`,alt:"Profile",className:"max-w-full max-h-48 object-contain rounded"}):e.jsx("span",{className:"text-gray-400 italic",children:"No profile image"})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{className:"text-sm font-medium text-muted-foreground",children:"Identification Document"}),e.jsx("div",{className:"bg-gray-50 rounded-lg p-4 border-2 border-dashed border-gray-200 min-h-[200px] flex items-center justify-center",children:t.identification_document?e.jsxs("div",{className:"text-center",children:[e.jsx(T,{className:"w-12 h-12 text-blue-500 mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-gray-600",children:"PDF Document Available"}),e.jsx("a",{href:t.identification_document.startsWith("http")?t.identification_document:`/storage/${t.identification_document}`,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 text-sm underline mt-1 inline-block",children:"View Document"})]}):e.jsx("span",{className:"text-gray-400 italic",children:"No identification document"})})]})]})]})]})]})})]})}export{te as columns,Te as default};
