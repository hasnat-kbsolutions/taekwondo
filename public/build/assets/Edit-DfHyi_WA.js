import{W as k,j as e,Y as w}from"./app-2gn4RfSZ.js";import{B as j}from"./button-BIncYwTu.js";import{S as l,a as c,b as o,c as m,e as i}from"./select-DucK0tRK.js";import{I as f}from"./input-Dj8_zug_.js";import{C as M}from"./react-icons.esm-C4tuFPjP.js";import{P as B,a as I,b as V}from"./popover-DstOSzBn.js";import{C as D}from"./calendar-DpAs36v-.js";import{L as r}from"./label-DHZZwbSO.js";import{C as E,a as A,b as L,c as T}from"./card-aDrCg9A8.js";import{C as $}from"./checkbox-Bod00Rte.js";import{A as F}from"./authenticated-layout-Cg-1muXU.js";import{f as v}from"./format-LUeNQFBy.js";import"./index-CBzvCrkR.js";import"./index-BFcKiWpC.js";import"./index-Bkygkmel.js";import"./chevron-down-ytmlgpZO.js";import"./createLucideIcon-DybH0MdA.js";import"./separator-B-OjaV0S.js";import"./building-2-DNx1rPF9.js";import"./users-CkuQDTLu.js";import"./log-out-C5WUean8.js";import"./sun-CBb6fQqu.js";function le({payment:n,students:_,bank_information:x,currencies:g}){var u;const{data:a,setData:d,put:N,processing:y,errors:t}=k({student_id:n.student_id||"",notes:n.notes||"",amount:n.amount||"",status:n.status||"unpaid",method:n.method||"cash",pay_at:n.pay_at||"",payment_month:n.payment_month.length===2?n.payment_month:n.payment_month.split("-")[1]||"",currency_code:n.currency_code||"MYR",bank_information:((u=n.bank_information)==null?void 0:u.map(s=>s.id))||[]}),C=s=>{s.preventDefault(),N(route("club.payments.update",n.id))},S=(s,h)=>{const p=a.bank_information,b=h?[...p,s]:p.filter(P=>P!==s);d("bank_information",b)};return e.jsxs(F,{header:"Edit Payment",children:[e.jsx(w,{title:"Edit Payment"}),e.jsx("div",{className:"container mx-auto py-10",children:e.jsxs(E,{children:[e.jsx(A,{children:e.jsx(L,{children:"Edit Payment"})}),e.jsx(T,{children:e.jsxs("form",{onSubmit:C,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(r,{children:"Student"}),e.jsxs(l,{value:String(a.student_id),onValueChange:s=>d("student_id",parseInt(s)),children:[e.jsx(c,{children:e.jsx(o,{placeholder:"Select Student"})}),e.jsx(m,{children:_.map(s=>e.jsx(i,{value:String(s.id),children:s.name},s.id))})]}),t.student_id&&e.jsx("p",{className:"text-red-500 text-sm",children:t.student_id})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Amount"}),e.jsx(f,{type:"number",value:a.amount,onChange:s=>d("amount",s.target.value)}),t.amount&&e.jsx("p",{className:"text-red-500 text-sm",children:t.amount})]}),e.jsxs("div",{children:[e.jsxs(r,{children:["Currency",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs(l,{value:a.currency_code,onValueChange:s=>d("currency_code",s),children:[e.jsx(c,{className:"w-full",children:e.jsx(o,{placeholder:"Select Currency"})}),e.jsx(m,{children:g.map(s=>e.jsxs(i,{value:s.code,children:[s.code," -"," ",s.symbol," ",s.name]},s.code))})]}),t.currency_code&&e.jsx("p",{className:"text-red-500 text-sm",children:t.currency_code})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Status"}),e.jsxs(l,{value:a.status,onValueChange:s=>d("status",s),children:[e.jsx(c,{children:e.jsx(o,{placeholder:"Select Status"})}),e.jsxs(m,{children:[e.jsx(i,{value:"paid",children:"Paid"}),e.jsx(i,{value:"unpaid",children:"Unpaid"})]})]}),t.status&&e.jsx("p",{className:"text-red-500 text-sm",children:t.status})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Method"}),e.jsxs(l,{value:a.method,onValueChange:s=>d("method",s),children:[e.jsx(c,{children:e.jsx(o,{placeholder:"Select Method"})}),e.jsxs(m,{children:[e.jsx(i,{value:"cash",children:"Cash"}),e.jsx(i,{value:"stripe",children:"Stripe"})]})]}),t.method&&e.jsx("p",{className:"text-red-500 text-sm",children:t.method})]}),e.jsxs("div",{children:[e.jsxs(r,{children:["Month",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs(l,{value:a.payment_month,onValueChange:s=>d("payment_month",s),children:[e.jsx(c,{className:"w-full",children:e.jsx(o,{placeholder:"Select Month"})}),e.jsx(m,{children:["01","02","03","04","05","06","07","08","09","10","11","12"].map(s=>e.jsx(i,{value:s,children:new Date(0,parseInt(s)-1).toLocaleString("default",{month:"long"})},s))})]}),t.payment_month&&e.jsx("p",{className:"text-red-500 text-sm",children:t.payment_month})]}),e.jsxs("div",{children:[e.jsxs(r,{children:["Pay At",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs(B,{children:[e.jsx(I,{asChild:!0,children:e.jsxs(j,{variant:"outline",className:"w-full justify-start text-left font-normal "+(!a.pay_at&&"text-muted-foreground"),children:[e.jsx(M,{className:"mr-2 h-4 w-4"}),a.pay_at?v(new Date(a.pay_at),"PPP"):"Pick a date"]})}),e.jsx(V,{className:"w-auto p-0",children:e.jsx(D,{mode:"single",selected:a.pay_at?new Date(a.pay_at):void 0,onSelect:s=>d("pay_at",s?v(s,"yyyy-MM-dd"):""),initialFocus:!0})})]}),t.pay_at&&e.jsx("p",{className:"text-red-500 text-sm",children:t.pay_at})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx(r,{children:"Notes"}),e.jsx(f,{type:"text",value:a.notes,onChange:s=>d("notes",s.target.value)}),t.notes&&e.jsx("p",{className:"text-red-500 text-sm",children:t.notes})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(r,{className:"text-base font-semibold",children:"Bank Information (Select banks to show on invoice)"}),x&&x.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:x.map(s=>e.jsxs("div",{className:"flex items-center space-x-2 p-3 border rounded-lg",children:[e.jsx($,{id:`bank-${s.id}`,checked:a.bank_information.includes(s.id),onCheckedChange:h=>S(s.id,h)}),e.jsxs("div",{className:"flex-1",children:[e.jsx(r,{htmlFor:`bank-${s.id}`,className:"text-sm font-medium cursor-pointer",children:s.bank_name}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[s.account_name," -"," ",s.account_number,s.currency&&` (${s.currency})`]})]})]},s.id))}):e.jsxs("div",{className:"p-4 border border-dashed rounded-lg text-center text-muted-foreground",children:[e.jsx("p",{children:"No bank information available."}),e.jsx("p",{className:"text-sm",children:"Please add bank information first."})]}),t.bank_information&&e.jsx("p",{className:"text-red-500 text-sm",children:t.bank_information})]}),e.jsx("div",{children:e.jsx(j,{type:"submit",disabled:y,children:"Update"})})]})})]})})]})}export{le as default};
