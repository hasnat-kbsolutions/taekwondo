import{r as d,j as e,Y as V,b as i,y as R}from"./app-Cczs6-pu.js";import{B as A}from"./button-CggtxzJ5.js";import{B as $}from"./badge-99wfyIl3.js";import{A as H,B as K,D as O,a as U,b as W,c as o}from"./authenticated-layout-DEeh39OK.js";import{S as y,a as N,b as S,c as w,e as n}from"./select-B9LWK5kt.js";import{D as q}from"./DataTable-B0H1oPcH.js";import{C as m,a as x,b as h,c as u}from"./card-vYZ9cLYq.js";import{L as M}from"./label-CZZW3Csb.js";import{W as _}from"./wallet-BNV4qstJ.js";import{H as z}from"./hourglass-B4K1tHUQ.js";import{E as X}from"./ellipsis-jKDB3kJQ.js";import{S as B}from"./square-pen-Djf7khjf.js";import{C as G}from"./circle-check-big-Ca29_4yh.js";import{C as Q}from"./circle-x-BJzb24vi.js";import{T as Z}from"./trash-2-EyXto2kw.js";import{F as ee}from"./file-text-B9lCz7L7.js";import"./input-DsdL8FF4.js";import"./separator-DyVKSp-u.js";import"./index-Cb-X0E5O.js";import"./createLucideIcon-UMabuQnl.js";import"./building-2-C5wJhXXz.js";import"./users-Ds4nSVQ5.js";import"./log-out-BsjkLR5-.js";import"./sun-BlgYwToS.js";import"./index-mUeHlh6V.js";import"./index-BxnyZUfo.js";import"./chevron-down-POU4J2A8.js";import"./table-CEaOauNm.js";const P=(a,l="MYR")=>{const t=Number(a)||0;return l==="JPY"?t.toLocaleString():t.toFixed(2)},se=[{header:"#",cell:({row:a})=>a.index+1},{header:"Student",cell:({row:a})=>{var l;return((l=a.original.student)==null?void 0:l.name)||"-"}},{header:"Amount",cell:({row:a})=>{var p;const l=((p=a.original.currency)==null?void 0:p.symbol)||"RM",t=a.original.currency_code||"MYR";return`${l} ${P(a.original.amount,t)}`}},{header:"Status",cell:({row:a})=>e.jsx($,{variant:a.original.status==="paid"||a.original.status==="success"?"default":"destructive",children:a.original.status})},{header:"Method",accessorKey:"method"},{header:"Payment Month",accessorKey:"payment_month"},{header:"Pay At",accessorKey:"pay_at"},{header:"Actions",cell:({row:a})=>e.jsxs(O,{children:[e.jsx(U,{asChild:!0,children:e.jsx(A,{variant:"ghost",size:"icon",className:"h-8 w-8",children:e.jsx(X,{className:"h-4 w-4"})})}),e.jsxs(W,{align:"end",children:[e.jsx(o,{asChild:!0,children:e.jsxs(i,{href:route("club.payments.edit",a.original.id),children:[e.jsx(B,{className:"w-4 h-4 mr-2"})," Edit"]})}),a.original.status==="unpaid"&&e.jsx(o,{asChild:!0,children:e.jsxs(i,{href:route("club.payments.updateStatus",a.original.id),method:"patch",data:{status:"paid"},as:"button",children:[e.jsx(G,{className:"w-4 h-4 mr-2"})," Mark as Paid"]})}),(a.original.status==="paid"||a.original.status==="success")&&e.jsx(o,{asChild:!0,children:e.jsxs(i,{href:route("club.payments.updateStatus",a.original.id),method:"patch",data:{status:"unpaid"},as:"button",children:[e.jsx(Q,{className:"w-4 h-4 mr-2"})," Mark as Unpaid"]})}),e.jsx(o,{asChild:!0,children:e.jsxs(i,{href:route("club.payments.destroy",a.original.id),method:"delete",as:"button",children:[e.jsx(Z,{className:"w-4 h-4 mr-2"})," Delete"]})}),e.jsx(o,{asChild:!0,children:e.jsxs(i,{href:route("club.payments.invoice",{payment:a.original.id}),children:[e.jsx(ee,{className:"w-4 h-4 mr-2"})," Invoice"]})})]})]})}],ae=new Date().getFullYear(),le=["All",...Array.from({length:5},(a,l)=>(ae-l).toString())],te=[{label:"January",value:"01"},{label:"February",value:"02"},{label:"March",value:"03"},{label:"April",value:"04"},{label:"May",value:"05"},{label:"June",value:"06"},{label:"July",value:"07"},{label:"August",value:"08"},{label:"September",value:"09"},{label:"October",value:"10"},{label:"November",value:"11"},{label:"December",value:"12"}];function Te({payments:a,filters:l,totalPayments:t,paidPayments:p,pendingPayments:T,amountsByCurrency:r,defaultCurrencyCode:c}){var D;const[f,Y]=d.useState(l.status||""),[b,C]=d.useState(l.payment_month?l.payment_month.length===4?l.payment_month:l.payment_month.split("-")[0]:"All"),[g,v]=d.useState(((D=l.payment_month)==null?void 0:D.split("-")[1])||""),F=({year:s,month:j,status:I})=>{const J=s==="All"?"":j?`${s}-${j}`:s;R.get(route("club.payments.index"),{status:I||null,payment_month:J||null},{preserveScroll:!0,preserveState:!0,replace:!0})},[k,E]=d.useState(!0);d.useEffect(()=>{if(k){E(!1);return}F({year:b,month:g,status:f})},[b,g,f]);const L=()=>{Y(""),C("All"),v(""),R.get(route("club.payments.index"),{},{preserveScroll:!0,preserveState:!1,replace:!0})};return e.jsxs(H,{header:"Payments",children:[e.jsx(V,{title:"Payments"}),e.jsxs("div",{className:"container mx-auto py-10 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs(m,{children:[e.jsxs(x,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(h,{className:"text-sm font-medium",children:"Total Payments"}),e.jsx(_,{className:"h-6 w-6 text-primary"})]}),e.jsx(u,{children:e.jsx("div",{className:"text-2xl font-bold",children:t||0})})]}),e.jsxs(m,{children:[e.jsxs(x,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(h,{className:"text-sm font-medium",children:"Paid"}),e.jsx(K,{className:"h-6 w-6 text-green-600"})]}),e.jsx(u,{children:e.jsx("div",{className:"text-2xl font-bold text-green-600",children:p||0})})]}),e.jsxs(m,{children:[e.jsxs(x,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(h,{className:"text-sm font-medium",children:"Pending"}),e.jsx(z,{className:"h-6 w-6 text-yellow-500"})]}),e.jsx(u,{children:e.jsx("div",{className:"text-2xl font-bold text-yellow-500",children:T||0})})]}),e.jsxs(m,{className:"col-span-1 sm:col-span-2 lg:col-span-4",children:[e.jsxs(x,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(h,{className:"text-sm font-medium",children:"Total Revenue"}),e.jsx(_,{className:"h-6 w-6 text-primary"})]}),e.jsx(u,{children:e.jsxs("div",{className:"space-y-1 w-full",children:[e.jsxs("div",{className:"text-lg font-bold",children:[c==="MYR"?"RM":c," ",P((r==null?void 0:r[c||"MYR"])||0,c||"MYR")]}),r&&Object.keys(r).length>1&&e.jsx("div",{className:"text-xs text-muted-foreground space-y-1",children:Object.entries(r).filter(([s])=>s!==c).map(([s,j])=>e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{children:[s,":"]}),e.jsx("span",{children:P(j,s)})]},s))})]})})]})]}),e.jsxs(m,{children:[e.jsxs(x,{className:"flex flex-row items-center justify-between",children:[e.jsx(h,{children:"Payments"}),e.jsx(i,{href:route("club.payments.create"),children:e.jsx(A,{children:"Add Payment"})})]}),e.jsxs(u,{children:[e.jsx("div",{className:"mb-6 p-4 border rounded-lg bg-muted/50",children:e.jsxs("div",{className:"flex items-end gap-4 flex-wrap",children:[e.jsxs("div",{className:"flex flex-col w-[160px]",children:[e.jsx(M,{className:"text-sm mb-1",children:"Year"}),e.jsxs(y,{value:b,onValueChange:s=>{C(s),s==="All"&&v("")},children:[e.jsx(N,{children:e.jsx(S,{placeholder:"Year"})}),e.jsx(w,{children:le.map(s=>e.jsx(n,{value:s,children:s},s))})]})]}),e.jsxs("div",{className:"flex flex-col w-[160px]",children:[e.jsx(M,{className:"text-sm mb-1",children:"Month"}),e.jsxs(y,{value:g,onValueChange:s=>v(s==="all"?"":s),children:[e.jsx(N,{children:e.jsx(S,{placeholder:"Month"})}),e.jsxs(w,{children:[e.jsx(n,{value:"all",children:"All"}),te.map(s=>e.jsx(n,{value:s.value,children:s.label},s.value))]})]})]}),e.jsxs("div",{className:"flex flex-col w-[160px]",children:[e.jsx(M,{className:"text-sm mb-1",children:"Status"}),e.jsxs(y,{value:f,onValueChange:s=>Y(s==="all"?"":s),children:[e.jsx(N,{children:e.jsx(S,{placeholder:"All Statuses"})}),e.jsxs(w,{children:[e.jsx(n,{value:"all",children:"All"}),e.jsx(n,{value:"paid",children:"Paid"}),e.jsx(n,{value:"unpaid",children:"Unpaid"})]})]})]}),e.jsx("div",{className:"flex items-end",children:e.jsx(A,{variant:"secondary",onClick:L,children:"Reset Filters"})})]})}),e.jsx(q,{data:a,columns:se})]})]})]})]})}export{Te as default};
