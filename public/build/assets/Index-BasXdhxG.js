import{j as e,r as g,W as C,Y as S,b as x}from"./app-DBRw60mW.js";import{D as P}from"./DataTable-cM-63wD8.js";import{B as m}from"./button-CkokPQBz.js";import{C as E,a as I,b as T,c as K}from"./card-BAqK9Kn4.js";import{A,D as F,a as U,b as k,c}from"./authenticated-layout-Buw5OMYf.js";import{B as L}from"./badge-xOpzEdOp.js";import{R as w}from"./RatingStars-DEm61W4n.js";import{D as f,a as j,b,c as N,d as v,e as W}from"./dialog-fxLDN9uU.js";import{L as l}from"./label-Blrkhk2Y.js";import{I as y}from"./input-DcSmYTg3.js";import{F as _}from"./file-text-Dt_IKPKu.js";import{E as B}from"./ellipsis-DE9ij12f.js";import{E as M}from"./eye-D6Q92HKC.js";import{S as V}from"./square-pen-aqLLyxdr.js";import{K as $}from"./key-BxXp7JkD.js";import{T as z}from"./trash-2-oANDZc-C.js";import"./table-BNy7_Zht.js";import"./separator-CIAl2tQx.js";import"./index-BqAiaS9p.js";import"./createLucideIcon-CLPWTvP9.js";import"./building-2-Ddz3kk6u.js";import"./users-k6bcTYwt.js";import"./log-out-D-sjizYU.js";import"./sun-DSHb19AU.js";const R=(u,s)=>[{header:"#",cell:({row:t})=>t.index+1},{id:"profile_image",header:"Photo",cell:({row:t})=>{const a=t.original.profile_image;if(a){const n=a.startsWith("http")?a:`/storage/${a}`;return e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:n,alt:"Profile",className:"w-10 h-10 rounded-full object-cover",onError:r=>{var o;r.currentTarget.style.display="none",(o=r.currentTarget.nextElementSibling)==null||o.classList.remove("hidden")}}),e.jsx("span",{className:"text-gray-400 italic text-xs hidden absolute inset-0 flex items-center justify-center",children:"No image"})]})}return e.jsx("span",{className:"text-gray-400 italic",children:"No image"})}},{accessorKey:"code",header:"Code"},{accessorKey:"name",header:"Name"},{accessorKey:"surname",header:"Surname"},{accessorKey:"dob",header:"DOB"},{accessorKey:"id_passport",header:"ID/Passport"},{id:"identification_document",header:"Documents",cell:({row:t})=>{const a=t.original.identification_document;if(a){const n=a.startsWith("http")?a:`/storage/${a}`;return e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(_,{className:"w-4 h-4 text-blue-500"}),e.jsx("a",{href:n,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 text-xs underline",children:"View Doc"})]})}return e.jsx("span",{className:"text-gray-400 italic text-xs",children:"No doc"})}},{accessorKey:"email",header:"Email"},{accessorKey:"phone",header:"Phone"},{id:"rating",header:"Rating",cell:({row:t})=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(w,{rating:typeof t.original.average_rating=="number"?Math.round(t.original.average_rating):0,readonly:!0,size:"sm"}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:["(",t.original.total_ratings,")"]})]})},{accessorKey:"status",header:"Status",cell:({row:t})=>e.jsx(L,{variant:t.original.status?"default":"destructive",children:t.original.status?"Active":"Inactive"})},{id:"actions",header:"Actions",cell:({row:t})=>{const a=t.original;return e.jsxs(F,{children:[e.jsx(U,{asChild:!0,children:e.jsx(m,{variant:"ghost",size:"icon",className:"h-8 w-8",children:e.jsx(B,{className:"h-4 w-4"})})}),e.jsxs(k,{align:"end",children:[e.jsxs(c,{onClick:()=>u(a),children:[e.jsx(M,{className:"w-4 h-4 mr-2"})," View"]}),e.jsx(c,{asChild:!0,children:e.jsxs(x,{href:route("club.students.edit",a.id),children:[e.jsx(V,{className:"w-4 h-4 mr-2"})," Edit"]})}),s&&e.jsxs(c,{onClick:()=>s(a),children:[e.jsx($,{className:"w-4 h-4 mr-2"})," Change Password"]}),e.jsx(c,{asChild:!0,children:e.jsxs(x,{href:route("club.students.destroy",a.id),method:"delete",as:"button",children:[e.jsx(z,{className:"w-4 h-4 mr-2"})," Delete"]})})]})]})}}];function pe({students:u}){var h,p;const[s,t]=g.useState(null),[a,n]=g.useState(null),r=C({password:"",password_confirmation:""}),o=i=>{t(i)},D=()=>{t(null)};return e.jsxs(A,{header:"Students",children:[e.jsx(S,{title:"Students"}),e.jsxs("div",{className:"container mx-auto py-10",children:[e.jsxs(E,{children:[e.jsxs(I,{className:"flex flex-row items-center justify-between",children:[e.jsx(T,{children:"Students"}),e.jsx(x,{href:route("club.students.create"),children:e.jsx(m,{children:"Add Student"})})]}),e.jsx(K,{children:e.jsx(P,{columns:R(o,i=>n(i)),data:u})})]}),e.jsx(f,{open:!!s,onOpenChange:D,children:e.jsxs(j,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(b,{children:[e.jsx(N,{children:"Student Details"}),e.jsx(v,{children:"View detailed information about the student."})]}),s&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex justify-center",children:e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[s.profile_image?e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:s.profile_image.startsWith("http")?s.profile_image:`/storage/${s.profile_image}`,alt:"Profile",className:"w-32 h-32 rounded-full object-cover border-2 border-gray-200 shadow-lg",onError:i=>{var d;i.currentTarget.style.display="none",(d=i.currentTarget.nextElementSibling)==null||d.classList.remove("hidden")}}),e.jsx("div",{className:"w-32 h-32 hidden flex items-center justify-center rounded-full bg-gray-100 text-gray-400 text-sm italic border-2 border-gray-200",children:"No Image"})]}):e.jsx("div",{className:"w-32 h-32 flex items-center justify-center rounded-full bg-gray-100 text-gray-400 text-sm italic border-2 border-gray-200",children:"No Image"}),e.jsxs("div",{className:"text-center",children:[e.jsxs("h3",{className:"font-semibold text-lg",children:[s.name," ",s.surname]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.code})]})]})}),e.jsx("div",{className:"grid grid-cols-2 gap-4",children:[{label:"UID",value:s.uid},{label:"Email",value:s.email},{label:"Phone",value:s.phone},{label:"Grade",value:s.grade},{label:"Gender",value:s.gender},{label:"Nationality",value:s.nationality},{label:"Date of Birth",value:s.dob?new Date(s.dob).toLocaleDateString():"Not specified"},{label:"Date of Death",value:s.dod?new Date(s.dod).toLocaleDateString():"Not specified"},{label:"ID/Passport",value:s.id_passport},{label:"Identification Document",value:s.identification_document?e.jsx("a",{href:s.identification_document.startsWith("http")?s.identification_document:`/storage/${s.identification_document}`,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 underline",children:"View Document"}):"No document uploaded"},{label:"City",value:s.city||"Not specified"},{label:"Street",value:s.street||"Not specified"},{label:"Postal Code",value:s.postal_code||"Not specified"},{label:"Country",value:s.country||"Not specified"},{label:"Organization",value:((h=s.organization)==null?void 0:h.name)||"Not specified"},{label:"Club",value:((p=s.club)==null?void 0:p.name)||"Not specified"},{label:"Status",value:s.status?"Active":"Inactive"},{label:"Rating",value:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(w,{rating:typeof s.average_rating=="number"?Math.round(s.average_rating):0,readonly:!0,size:"sm"}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[typeof s.average_rating=="number"?s.average_rating.toFixed(1):"0.0"," ","(",s.total_ratings," ","ratings)"]})]})}].map((i,d)=>e.jsxs("div",{className:"space-y-1",children:[e.jsx(l,{className:"text-sm font-medium text-muted-foreground",children:i.label}),e.jsx("div",{className:"text-sm",children:i.value})]},d))}),e.jsxs("div",{className:"border-t pt-6",children:[e.jsx("h4",{className:"font-semibold mb-4",children:"Attachments"}),e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{className:"text-sm font-medium text-muted-foreground",children:"Profile Image"}),e.jsx("div",{className:"bg-gray-50 rounded-lg p-4 border-2 border-dashed border-gray-200 min-h-[200px] flex items-center justify-center",children:s.profile_image?e.jsx("img",{src:s.profile_image.startsWith("http")?s.profile_image:`/storage/${s.profile_image}`,alt:"Profile",className:"max-w-full max-h-48 object-contain rounded"}):e.jsx("span",{className:"text-gray-400 italic",children:"No profile image"})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{className:"text-sm font-medium text-muted-foreground",children:"Identification Document"}),e.jsx("div",{className:"bg-gray-50 rounded-lg p-4 border-2 border-dashed border-gray-200 min-h-[200px] flex items-center justify-center",children:s.identification_document?e.jsxs("div",{className:"text-center",children:[e.jsx(_,{className:"w-12 h-12 text-blue-500 mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-gray-600",children:"PDF Document Available"}),e.jsx("a",{href:s.identification_document.startsWith("http")?s.identification_document:`/storage/${s.identification_document}`,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 text-sm underline mt-1 inline-block",children:"View Document"})]}):e.jsx("span",{className:"text-gray-400 italic",children:"No identification document"})})]})]})]})]})]})}),a&&e.jsx(f,{open:!!a,onOpenChange:i=>{i||(n(null),r.reset())},children:e.jsxs(j,{children:[e.jsxs(b,{children:[e.jsx(N,{children:"Change Password"}),e.jsxs(v,{children:["Update password for"," ",a.name," ",a.surname]})]}),e.jsxs("form",{onSubmit:i=>{i.preventDefault(),r.patch(route("club.students.updatePassword",a.id),{onSuccess:()=>{n(null),r.reset()}})},className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs(l,{htmlFor:"password",children:["New Password"," ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(y,{id:"password",type:"password",placeholder:"Enter new password",value:r.data.password,onChange:i=>r.setData("password",i.target.value),required:!0}),r.errors.password&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:r.errors.password})]}),e.jsxs("div",{children:[e.jsxs(l,{htmlFor:"password_confirmation",children:["Confirm Password"," ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(y,{id:"password_confirmation",type:"password",placeholder:"Confirm new password",value:r.data.password_confirmation,onChange:i=>r.setData("password_confirmation",i.target.value),required:!0}),r.errors.password_confirmation&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:r.errors.password_confirmation})]}),e.jsxs(W,{children:[e.jsx(m,{type:"button",variant:"outline",onClick:()=>{n(null),r.reset()},children:"Cancel"}),e.jsx(m,{type:"submit",disabled:r.processing,children:r.processing?"Updating...":"Update Password"})]})]})]})})]})]})}export{R as columns,pe as default};
