import{r as h,j as e,Y as I,b as m,y as C}from"./app-BR5-CEIF.js";import{A as M,X as K,D as O,a as V,b as k,c as u}from"./authenticated-layout-40O3gxwF.js";import{B as x}from"./button-Cca4UGjE.js";import{C as b,a as w,b as z,c as S}from"./card-ruYL3A7M.js";import{D as B}from"./DataTable-Cuut-RDv.js";import{S as F,a as v,b as N,c as y,e as n}from"./select-1qlA7r9H.js";import{I as P}from"./input-9fZl11cf.js";import{L as j}from"./label-BDgUDZin.js";import{F as $}from"./filter-HF0s-rNC.js";import{F as q}from"./file-text-JJcF4wQV.js";import{E as H}from"./ellipsis-BVQm6Kqu.js";import{S as R}from"./square-pen-PkR93ycs.js";import{T as X}from"./trash-2-tnw0Vdgk.js";import{E as Y}from"./eye-ClErgVlF.js";import"./separator-CyMiBi14.js";import"./index-C-3bd_PS.js";import"./sun-dpwYLMUn.js";import"./users-01x0WH6Z.js";import"./log-out-BAV1vg21.js";import"./table-CceDNIfo.js";import"./index-BGVnSqQZ.js";import"./index-BJCw8Nab.js";import"./chevron-down-DNVP3pWD.js";const pe=({certifications:g,organizations:l,clubs:s,filters:o})=>{const[a,t]=h.useState({organization_id:o.organization_id||"all",club_id:o.club_id||"all",search:o.search||""}),L=h.useMemo(()=>!a.organization_id||a.organization_id==="all"?s:s.filter(r=>r.organization_id.toString()===a.organization_id),[s,a.organization_id]),p=h.useMemo(()=>g.filter(r=>{var f,_;const i=!a.search||r.student_name.toLowerCase().includes(a.search.toLowerCase())||r.club_name.toLowerCase().includes(a.search.toLowerCase())||r.organization_name.toLowerCase().includes(a.search.toLowerCase()),E=!a.organization_id||a.organization_id==="all"||r.organization_name===((f=l.find(d=>d.id.toString()===a.organization_id))==null?void 0:f.name),T=!a.club_id||a.club_id==="all"||r.club_name===((_=s.find(d=>d.id.toString()===a.club_id))==null?void 0:_.name);return i&&E&&T}),[g,a,l,s]),c=r=>{const i={organization_id:r.organization_id==="all"?"":r.organization_id,club_id:r.club_id==="all"?"":r.club_id,search:r.search};C.get(route("admin.certifications.index"),i,{preserveState:!0,preserveScroll:!0})},A=()=>{t({organization_id:"all",club_id:"all",search:""}),C.get(route("admin.certifications.index"),{},{preserveState:!0,preserveScroll:!0})},D=[{header:"#",cell:({row:r})=>r.index+1},{header:"Student",accessorKey:"student_name"},{header:"Club",accessorKey:"club_name"},{header:"Organization",accessorKey:"organization_name"},{header:"File",cell:({row:r})=>e.jsxs("a",{href:`/storage/${r.original.file}`,target:"_blank",rel:"noopener noreferrer",className:"text-gray-400 hover:text-white flex items-center transition-colors",children:[e.jsx(q,{className:"w-4 h-4 mr-1"}),"View"]})},{header:"Issued At",accessorKey:"issued_at"},{header:"Notes",accessorKey:"notes"},{header:"Actions",cell:({row:r})=>e.jsxs(O,{children:[e.jsx(V,{asChild:!0,children:e.jsx(x,{variant:"ghost",size:"icon",className:"h-8 w-8",children:e.jsx(H,{className:"h-4 w-4"})})}),e.jsxs(k,{align:"end",children:[e.jsx(u,{asChild:!0,children:e.jsxs(m,{href:route("admin.certifications.edit",r.original.id),children:[e.jsx(R,{className:"w-4 h-4 mr-2"})," Edit"]})}),e.jsx(u,{asChild:!0,children:e.jsxs(m,{href:route("admin.certifications.destroy",r.original.id),method:"delete",as:"button",children:[e.jsx(X,{className:"w-4 h-4 mr-2"})," Delete"]})}),e.jsx(u,{asChild:!0,children:e.jsxs("a",{href:`/storage/${r.original.file}`,target:"_blank",rel:"noopener noreferrer",children:[e.jsx(Y,{className:"w-4 h-4 mr-2"})," View Certification File"]})})]})]})}];return e.jsxs(M,{header:"Certifications",children:[e.jsx(I,{title:"Certifications"}),e.jsxs("div",{className:"container mx-auto py-10 space-y-6",children:[e.jsxs(b,{children:[e.jsx(w,{children:e.jsxs(z,{className:"flex items-center gap-2",children:[e.jsx($,{className:"w-5 h-5"}),"Filters"]})}),e.jsx(S,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx(j,{htmlFor:"search",children:"Search"}),e.jsx(P,{id:"search",placeholder:"Search students, clubs, organizations...",value:a.search,onChange:r=>{const i={...a,search:r.target.value};t(i),c(i)}})]}),e.jsxs("div",{children:[e.jsx(j,{htmlFor:"organization",children:"Organization"}),e.jsxs(F,{value:a.organization_id||"all",onValueChange:r=>{const i={...a,organization_id:r==="all"?"":r,club_id:""};t(i),c(i)},children:[e.jsx(v,{children:e.jsx(N,{placeholder:"All Organizations"})}),e.jsxs(y,{children:[e.jsx(n,{value:"all",children:"All Organizations"}),l.map(r=>e.jsx(n,{value:r.id.toString(),children:r.name},r.id))]})]})]}),e.jsxs("div",{children:[e.jsx(j,{htmlFor:"club",children:"Club"}),e.jsxs(F,{value:a.club_id||"all",onValueChange:r=>{const i={...a,club_id:r==="all"?"":r};t(i),c(i)},children:[e.jsx(v,{children:e.jsx(N,{placeholder:"All Clubs"})}),e.jsxs(y,{children:[e.jsx(n,{value:"all",children:"All Clubs"}),L.map(r=>e.jsx(n,{value:r.id.toString(),children:r.name},r.id))]})]})]}),e.jsx("div",{className:"flex items-end gap-2",children:e.jsxs(x,{variant:"outline",onClick:A,className:"w-full",children:[e.jsx(K,{className:"w-4 h-4 mr-2"}),"Clear Filters"]})})]})})]}),e.jsxs(b,{children:[e.jsxs(w,{className:"flex flex-row items-center justify-between",children:[e.jsxs(z,{children:["Certifications (",p.length,")"]}),e.jsx(m,{href:route("admin.certifications.create"),children:e.jsx(x,{children:"Add Certification"})})]}),e.jsx(S,{children:e.jsx(B,{data:p,columns:D})})]})]})]})};export{pe as default};
