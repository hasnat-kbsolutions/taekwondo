import{m as c,W as J,j as e,Y,y as p}from"./app-CEAkk4i6.js";import{B as D}from"./button-BIDWBxDs.js";import{L as n}from"./label-CNuVDIRz.js";import{I as F}from"./input-BLFkIEB7.js";import{T as q}from"./textarea-pWMQjTO_.js";import{S as I,a as P,b as U,c as R,e as d}from"./select-rXOhB-aK.js";import{D as K,T as O}from"./time-picker-CHZdAMvM.js";import{A as Q,X as V}from"./authenticated-layout-CuUc6cJH.js";import{C as g,a as j,b as v,d as b,c as f}from"./card-CWrPsA_S.js";import{A as Z}from"./arrow-left-PevCnRcZ.js";import{U as ee}from"./upload-DJ11f2fB.js";import{F as A}from"./file-text-LigygiHu.js";import"./index-CPm-OftT.js";import"./index-D0YihXUr.js";import"./index-BZ-LQonx.js";import"./index-GNkbtKOe.js";import"./chevron-down-ByOlhStK.js";import"./sun-Cb4-sj-T.js";import"./calendar-B_X8dyyb.js";import"./popover-Gu38JwDQ.js";import"./format-LUeNQFBy.js";import"./separator-BTVOhe19.js";import"./users-DTjBt5Wt.js";import"./log-out-CYh5mh1o.js";function ke({event:i}){const[L,B]=c.useState(i.event_date?new Date(i.event_date):void 0),[w,N]=c.useState(i.image?`/storage/${i.image}`:null),[S,_]=c.useState(i.document?i.document.split("/").pop()||"Document":null),[u,te]=c.useState(i.image||null),[m,se]=c.useState(i.document||null),[T,y]=c.useState(!1),[h,C]=c.useState(!1),[ie]=c.useState(i.start_time||""),[re]=c.useState(i.end_time||""),{data:t,setData:r,processing:k,errors:a}=J({title:i.title||"",description:i.description||"",event_type:i.event_type||"training",event_date:i.event_date||"",start_time:i.start_time||"",end_time:i.end_time||"",venue:i.venue||"",status:i.status||"upcoming",is_public:i.is_public!==void 0?i.is_public:!0,image:null,document:null,remove_image:!1,remove_document:!1}),M=s=>{B(s),s&&r("event_date",s.toISOString().split("T")[0])},$=s=>{var o;const l=(o=s.target.files)==null?void 0:o[0];if(l){r("image",l),y(!0),r("remove_image",!1);const x=new FileReader;x.onloadend=()=>{N(x.result)},x.readAsDataURL(l)}},E=()=>{r("image",null),r("remove_image",!0),N(null),y(!0)},X=()=>{N(u?`/storage/${u}`:null),r("image",null),r("remove_image",!1),y(!1)},G=s=>{var o;const l=(o=s.target.files)==null?void 0:o[0];l&&(r("document",l),_(l.name),C(!0),r("remove_document",!1))},W=()=>{r("document",null),r("remove_document",!0),_(null),C(!0)},z=()=>{_(m?m.split("/").pop()||"Document":null),r("document",null),r("remove_document",!1),C(!1)},H=s=>{s.preventDefault();const l=t.start_time&&t.start_time.trim()?t.start_time.trim():"",o=t.end_time&&t.end_time.trim()?t.end_time.trim():"",x={title:t.title,description:t.description,event_type:t.event_type,event_date:t.event_date,start_time:l,end_time:o,venue:t.venue,status:t.status,is_public:t.is_public,image:t.image,document:t.document,remove_image:t.remove_image,remove_document:t.remove_document};p.put(route("club.events.update",i.id),x,{onSuccess:()=>{p.visit(route("club.events.index"))}})};return e.jsxs(Q,{children:[e.jsx(Y,{title:"Edit Event"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(D,{variant:"outline",size:"icon",onClick:()=>p.visit(route("club.events.index")),children:e.jsx(Z,{className:"w-4 h-4"})}),e.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:"Edit Event"})]}),e.jsxs("form",{onSubmit:H,className:"space-y-6",children:[e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxs(g,{children:[e.jsxs(j,{children:[e.jsx(v,{children:"Basic Information"}),e.jsx(b,{children:"Update the basic details of your event"})]}),e.jsxs(f,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"title",children:"Title *"}),e.jsx(F,{id:"title",value:t.title,onChange:s=>r("title",s.target.value),placeholder:"e.g., Summer Training Camp"}),a.title&&e.jsx("p",{className:"text-sm text-red-600",children:a.title})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"description",children:"Description"}),e.jsx(q,{id:"description",value:t.description,onChange:s=>r("description",s.target.value),placeholder:"Event description...",rows:4}),a.description&&e.jsx("p",{className:"text-sm text-red-600",children:a.description})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"event_type",children:"Event Type *"}),e.jsxs(I,{value:t.event_type,onValueChange:s=>r("event_type",s),children:[e.jsx(P,{children:e.jsx(U,{})}),e.jsxs(R,{children:[e.jsx(d,{value:"training",children:"Training"}),e.jsx(d,{value:"competition",children:"Competition"}),e.jsx(d,{value:"seminar",children:"Seminar"}),e.jsx(d,{value:"meeting",children:"Meeting"}),e.jsx(d,{value:"other",children:"Other"})]})]}),a.event_type&&e.jsx("p",{className:"text-sm text-red-600",children:a.event_type})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"status",children:"Status *"}),e.jsxs(I,{value:t.status,onValueChange:s=>r("status",s),children:[e.jsx(P,{children:e.jsx(U,{})}),e.jsxs(R,{children:[e.jsx(d,{value:"upcoming",children:"Upcoming"}),e.jsx(d,{value:"ongoing",children:"Ongoing"}),e.jsx(d,{value:"completed",children:"Completed"})]})]}),a.status&&e.jsx("p",{className:"text-sm text-red-600",children:a.status})]})]})]}),e.jsxs(g,{children:[e.jsxs(j,{children:[e.jsx(v,{children:"Date & Time"}),e.jsx(b,{children:"Update event schedule"})]}),e.jsxs(f,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"event_date",children:"Date *"}),e.jsx(K,{date:L,onSelect:M,placeholder:"Select event date"}),a.event_date&&e.jsx("p",{className:"text-sm text-red-600",children:a.event_date})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"start_time",children:"Start Time"}),e.jsx(O,{value:t.start_time,onChange:s=>r("start_time",s),placeholder:"Select start time"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"end_time",children:"End Time"}),e.jsx(O,{value:t.end_time,onChange:s=>r("end_time",s),placeholder:"Select end time"})]})]}),a.start_time&&e.jsx("p",{className:"text-sm text-red-600",children:a.start_time}),a.end_time&&e.jsx("p",{className:"text-sm text-red-600",children:a.end_time})]})]})]}),e.jsxs(g,{children:[e.jsxs(j,{children:[e.jsx(v,{children:"Location"}),e.jsx(b,{children:"Where will the event take place?"})]}),e.jsxs(f,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"venue",children:"Venue"}),e.jsx(F,{id:"venue",value:t.venue,onChange:s=>r("venue",s.target.value),placeholder:"e.g., Main Dojang"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{id:"is_public",type:"checkbox",checked:t.is_public,onChange:s=>r("is_public",s.target.checked),className:"h-4 w-4 rounded border-gray-300 text-primary focus:ring-primary"}),e.jsx(n,{htmlFor:"is_public",className:"!m-0 cursor-pointer",children:"Public Event"})]})]})]}),e.jsxs(g,{children:[e.jsxs(j,{children:[e.jsx(v,{children:"Attachments"}),e.jsx(b,{children:"Update event image and documents"})]}),e.jsxs(f,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(n,{children:"Event Image"}),u&&T&&e.jsx("button",{type:"button",onClick:X,className:"text-xs text-blue-600 hover:text-blue-700 underline",children:"Restore original"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx("div",{className:"space-y-2",children:e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center cursor-pointer hover:border-primary hover:bg-primary/5 transition",children:[e.jsx("input",{type:"file",id:"image",accept:"image/*",onChange:$,className:"hidden"}),e.jsxs("label",{htmlFor:"image",className:"flex flex-col items-center gap-2 cursor-pointer",children:[e.jsx(ee,{className:"w-8 h-8 text-muted-foreground"}),e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"font-medium",children:"Click to upload"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"JPG, PNG up to 2MB"})]})]})]})}),e.jsx("div",{className:"space-y-2",children:w?e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:w,alt:"Preview",className:"w-full h-40 object-cover rounded-lg border"}),e.jsx("div",{className:"absolute top-2 right-2 flex gap-1",children:e.jsx("button",{type:"button",onClick:E,className:"bg-red-500 text-white p-1 rounded-full hover:bg-red-600",title:"Remove image",children:e.jsx(V,{className:"w-4 h-4"})})}),T&&e.jsx("div",{className:"absolute bottom-2 left-2 bg-yellow-500 text-white px-2 py-1 rounded text-xs font-medium",children:"Modified"})]}):u&&!t.remove_image?e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:`/storage/${u}`,alt:"Current",className:"w-full h-40 object-cover rounded-lg border-2 border-green-300 bg-green-50"}),e.jsx("div",{className:"absolute bottom-2 left-2 bg-green-600 text-white px-2 py-1 rounded text-xs font-medium",children:"Current"}),e.jsx("button",{type:"button",onClick:E,className:"absolute top-2 right-2 bg-red-500 text-white p-1 rounded-full hover:bg-red-600",title:"Remove image",children:e.jsx(V,{className:"w-4 h-4"})})]}):e.jsx("div",{className:"w-full h-40 bg-gray-100 rounded-lg border-2 border-dashed border-gray-300 flex items-center justify-center text-gray-400",children:"No image selected"})})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(n,{children:"Event Document (PDF, DOC, DOCX)"}),m&&h&&e.jsx("button",{type:"button",onClick:z,className:"text-xs text-blue-600 hover:text-blue-700 underline",children:"Restore original"})]}),m&&!t.remove_document&&!h&&e.jsx("div",{className:"bg-green-50 border-2 border-green-300 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(A,{className:"w-6 h-6 text-green-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Current Document"}),e.jsx("p",{className:"text-xs text-gray-600",children:m.split("/").pop()})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("a",{href:`/storage/${m}`,target:"_blank",rel:"noopener noreferrer",className:"text-xs bg-green-600 text-white px-3 py-1 rounded hover:bg-green-700",children:"View"}),e.jsx("button",{type:"button",onClick:W,className:"text-xs bg-red-500 text-white px-3 py-1 rounded hover:bg-red-600",children:"Remove"})]})]})}),e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center cursor-pointer hover:border-primary hover:bg-primary/5 transition",children:[e.jsx("input",{type:"file",id:"document",accept:".pdf,.doc,.docx",onChange:G,className:"hidden"}),e.jsxs("label",{htmlFor:"document",className:"flex flex-col items-center gap-2 cursor-pointer",children:[e.jsx(A,{className:"w-8 h-8 text-muted-foreground"}),e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"font-medium",children:h&&S?`Selected: ${S}`:"Click to upload document"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"PDF, DOC, DOCX up to 5MB"})]})]})]}),h&&t.remove_document&&e.jsx("div",{className:"bg-red-50 border border-red-300 rounded p-3",children:e.jsx("p",{className:"text-sm text-red-700 font-medium",children:"Document will be removed when you save"})})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-4",children:[e.jsx(D,{type:"button",variant:"outline",onClick:()=>p.visit(route("club.events.index")),children:"Cancel"}),e.jsx(D,{type:"submit",disabled:k,children:k?"Updating...":"Update Event"})]})]})]})]})}export{ke as default};
