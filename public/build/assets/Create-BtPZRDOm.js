import{W as f,r,a as b,j as e,Y as C}from"./app-C0OkqBOu.js";import{A as N}from"./authenticated-layout-7awJFZhC.js";import{B as w}from"./button-nlVKbzBo.js";import{C as y,a as S,b as _,c as A}from"./card-C2KJ-dDl.js";import{I as o}from"./input-DTrwpQSI.js";import"./index-uc-Wsadv.js";function I({companies:x,organizations:h,clubs:u}){const{data:n,setData:l,post:m,processing:p}=f({date:"",attendances:{}}),[i,j]=r.useState([]),[a,d]=r.useState({company_id:"",organization_id:"",club_id:""});r.useEffect(()=>{a.company_id&&a.organization_id&&a.club_id&&b.get(route("students.filter"),{params:a}).then(t=>j(t.data))},[a]);const c=(t,s,g)=>{l("attendances",{...n.attendances,[t]:{...n.attendances[t],[s]:g}})},v=t=>{t.preventDefault(),m(route("attendances.store"))};return e.jsxs(N,{header:"Record Attendance",children:[e.jsx(C,{title:"Record Attendance"}),e.jsx("div",{className:"container mx-auto py-10",children:e.jsxs(y,{children:[e.jsx(S,{children:e.jsx(_,{children:"New Attendance"})}),e.jsx(A,{children:e.jsxs("form",{onSubmit:v,className:"flex flex-wrap",children:[e.jsx("div",{className:"w-[50%] px-2",children:e.jsx(o,{type:"date",value:n.date,onChange:t=>l("date",t.target.value)})}),e.jsx("div",{className:"w-[50%] px-2",children:e.jsxs("select",{onChange:t=>d({...a,company_id:t.target.value}),className:"w-full p-2 border rounded-lg",children:[e.jsx("option",{value:"",children:"Select Company"}),x.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]})}),e.jsx("div",{className:"w-[50%] px-2 mt-4",children:e.jsxs("select",{onChange:t=>d({...a,organization_id:t.target.value}),className:"w-full p-2 border rounded-lg",children:[e.jsx("option",{value:"",children:"Select Organization"}),h.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]})}),e.jsx("div",{className:"w-[50%] px-2 mt-4",children:e.jsxs("select",{onChange:t=>d({...a,club_id:t.target.value}),className:"w-full p-2 border rounded-lg",children:[e.jsx("option",{value:"",children:"Select Club"}),u.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]})}),i.length>0&&e.jsxs("table",{className:"w-full border mt-4",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Name"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"Remarks"})]})}),e.jsx("tbody",{children:i.map(t=>e.jsxs("tr",{children:[e.jsx("td",{children:t.name}),e.jsx("td",{children:e.jsxs("select",{onChange:s=>c(t.id,"status",s.target.value),children:[e.jsx("option",{value:"present",children:"Present"}),e.jsx("option",{value:"absent",children:"Absent"}),e.jsx("option",{value:"late",children:"Late"}),e.jsx("option",{value:"excused",children:"Excused"})]})}),e.jsx("td",{children:e.jsx(o,{type:"text",onChange:s=>c(t.id,"remarks",s.target.value),placeholder:"Remarks"})})]},t.id))})]}),e.jsx("div",{className:"w-[50%] px-2 mt-4",children:e.jsx(w,{type:"submit",disabled:p,children:"Submit Attendance"})})]})})]})})]})}export{I as default};
