import{W as b,r as j,j as e,Y as G}from"./app-Bk__NUyR.js";import{A as D}from"./authenticated-layout-YlO6j7OP.js";import{I as i}from"./input-B9cDc4UL.js";import{P as I}from"./phone-input-CORY7ITa.js";import{C as v}from"./country-dropdown-D88X5GAL.js";import{L as t}from"./label-BhyDlvqu.js";import{B as P}from"./button-smLTRYM9.js";import{S as d,a as c,b as o,c as u,e as s,d as g,f}from"./select-BB-HpjLV.js";import"./separator-VAPR6h-8.js";import"./index-BwyuI8_P.js";import"./sun-Cwk4OBxP.js";import"./users-Bes5WrE6.js";import"./log-out-C7YU2t2a.js";import"./popover-BneLehoE.js";import"./index-BGqZ_pcS.js";import"./dialog-vWMWuL3X.js";import"./globe-Ck9lzMGW.js";import"./chevron-down-CshEc7SL.js";import"./index-7iZjociB.js";function K({clubs:N,organizations:w,plans:m,currencies:_}){const{data:l,setData:n,post:y,processing:S,errors:p}=b({club_id:"",organization_id:"",name:"",email:"",password:"",phone:"",surname:"",nationality:"",dob:"",dod:"",grade:"",gender:"",id_passport:"",profile_image:null,identification_document:null,city:"",postal_code:"",street:"",country:"",status:!0,plan_id:"",interval:"monthly",interval_count:null,discount_type:"",discount_value:null,currency_code:""}),x=j.useMemo(()=>m.filter(a=>String(a.planable_id)===String(l.club_id)),[m,l.club_id]);j.useEffect(()=>{if(!l.club_id){l.plan_id!==""&&n("plan_id","");return}!x.some(h=>String(h.id)===l.plan_id)&&l.plan_id!==""&&n("plan_id","")},[l.club_id,x,l.plan_id,n]);const C=a=>{a.preventDefault(),y(route("admin.students.store"),{forceFormData:!0})},r=a=>p[a]&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:p[a]});return e.jsxs(D,{header:"Add Student",children:[e.jsx(G,{title:"Add Student"}),e.jsx("div",{className:"container mx-auto py-10",children:e.jsxs("form",{onSubmit:C,className:"flex flex-wrap",children:[e.jsxs("div",{className:"w-[33.33%] px-2 mt-3",children:[e.jsxs(t,{children:["Select Club ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs(d,{value:l.club_id,onValueChange:a=>n("club_id",a),children:[e.jsx(c,{className:"w-full",children:e.jsx(o,{placeholder:"Select Club"})}),e.jsx(u,{children:N.map(a=>e.jsx(s,{value:String(a.id),children:a.name},a.id))})]}),r("club_id")]}),e.jsxs("div",{className:"w-[33.33%] px-2 mt-3",children:[e.jsxs(t,{children:["Organization ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs(d,{value:l.organization_id,onValueChange:a=>n("organization_id",a),children:[e.jsx(c,{className:"w-full",children:e.jsx(o,{placeholder:"Select Organization"})}),e.jsx(u,{children:w.map(a=>e.jsx(s,{value:String(a.id),children:a.name},a.id))})]}),r("organization_id")]}),e.jsxs("div",{className:"w-[33.33%] px-2 mt-3",children:[e.jsxs(t,{children:["Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(i,{placeholder:"Name",value:l.name,onChange:a=>n("name",a.target.value)}),r("name")]}),e.jsxs("div",{className:"w-[33.33%] px-2 mt-3",children:[e.jsx(t,{children:"Surname"}),e.jsx(i,{placeholder:"Surname",value:l.surname,onChange:a=>n("surname",a.target.value)})]}),e.jsxs("div",{className:"w-[33.33%] px-2 mt-3",children:[e.jsxs(t,{children:["Email ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(i,{type:"email",placeholder:"Email",value:l.email,onChange:a=>n("email",a.target.value)}),r("email")]}),e.jsxs("div",{className:"w-[33.33%] px-2 mt-3",children:[e.jsxs(t,{children:["Password ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(i,{type:"password",placeholder:"Password",value:l.password,onChange:a=>n("password",a.target.value)}),r("password")]}),e.jsxs("div",{className:"w-[33.33%] px-2 mt-3",children:[e.jsxs(t,{children:["Phone ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(I,{defaultCountry:"MY",value:l.phone,onChange:a=>n("phone",a),className:"w-full"}),r("phone")]}),e.jsxs("div",{className:"w-[33.33%] px-2 mt-3",children:[e.jsxs(t,{children:["Nationality ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(v,{placeholder:"Select nationality",defaultValue:l.nationality,onChange:a=>n("nationality",a.alpha3),slim:!1}),r("nationality")]}),e.jsxs("div",{className:"w-[33.33%] px-2 mt-3",children:[e.jsxs(t,{children:["Date of Birth"," ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(i,{type:"date",value:l.dob,onChange:a=>n("dob",a.target.value)}),r("dob")]}),e.jsxs("div",{className:"w-[33.33%] px-2 mt-3",children:[e.jsx(t,{children:"Date of Deactivation"}),e.jsx(i,{type:"date",value:l.dod,onChange:a=>n("dod",a.target.value)}),r("dod")]}),e.jsxs("div",{className:"w-[33.33%] px-2 mt-3",children:[e.jsxs(t,{children:["Grade ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs(d,{value:l.grade||"",onValueChange:a=>n("grade",a),children:[e.jsx(c,{className:"w-full",children:e.jsx(o,{placeholder:"Select Grade"})}),e.jsxs(u,{children:[e.jsxs(g,{children:[e.jsx(f,{children:"Gup (Student Grades)"}),e.jsx(s,{value:"10th Gup - White",children:"10th Gup - White"}),e.jsx(s,{value:"9th Gup - White w/ Yellow Tag",children:"9th Gup - White w/ Yellow Tag"}),e.jsx(s,{value:"8th Gup - Yellow",children:"8th Gup - Yellow"}),e.jsx(s,{value:"7th Gup - Yellow w/ Green Tag",children:"7th Gup - Yellow w/ Green Tag"}),e.jsx(s,{value:"6th Gup - Green",children:"6th Gup - Green"}),e.jsx(s,{value:"5th Gup - Green w/ Blue Tag",children:"5th Gup - Green w/ Blue Tag"}),e.jsx(s,{value:"4th Gup - Blue",children:"4th Gup - Blue"}),e.jsx(s,{value:"3rd Gup - Blue w/ Red Tag",children:"3rd Gup - Blue w/ Red Tag"}),e.jsx(s,{value:"2nd Gup - Red",children:"2nd Gup - Red"}),e.jsx(s,{value:"1st Gup - Red w/ Black Tag",children:"1st Gup - Red w/ Black Tag"})]}),e.jsxs(g,{children:[e.jsx(f,{children:"Dan (Black Belt Ranks)"}),e.jsx(s,{value:"1st Dan - Black Belt",children:"1st Dan - Black Belt"}),e.jsx(s,{value:"2nd Dan - Assistant Instructor",children:"2nd Dan - Assistant Instructor"}),e.jsx(s,{value:"3rd Dan - Instructor",children:"3rd Dan - Instructor"}),e.jsx(s,{value:"4th Dan - International Instructor",children:"4th Dan - International Instructor"}),e.jsx(s,{value:"5th Dan - International Instructor",children:"5th Dan - International Instructor"}),e.jsx(s,{value:"6th Dan - Senior Instructor",children:"6th Dan - Senior Instructor"}),e.jsx(s,{value:"7th Dan - Master",children:"7th Dan - Master"}),e.jsx(s,{value:"8th Dan - Senior Master",children:"8th Dan - Senior Master"}),e.jsx(s,{value:"9th Dan - Grand Master",children:"9th Dan - Grand Master"})]})]})]}),r("grade")]}),e.jsxs("div",{className:"w-[33.33%] px-2 mt-3",children:[e.jsxs(t,{children:["Gender ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs(d,{value:l.gender,onValueChange:a=>n("gender",a),children:[e.jsx(c,{className:"w-full",children:e.jsx(o,{placeholder:"Select Gender"})}),e.jsxs(u,{children:[e.jsx(s,{value:"male",children:"Male"}),e.jsx(s,{value:"female",children:"Female"})]})]}),r("gender")]}),e.jsxs("div",{className:"w-[33.33%] px-2 mt-3",children:[e.jsxs(t,{children:["ID/Passport ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(i,{placeholder:"ID or Passport Number",value:l.id_passport,onChange:a=>n("id_passport",a.target.value)}),r("id_passport")]}),e.jsxs("div",{className:"w-[33.33%] px-2 mt-3",children:[e.jsx(t,{children:"City"}),e.jsx(i,{placeholder:"City",value:l.city,onChange:a=>n("city",a.target.value)}),r("city")]}),e.jsxs("div",{className:"w-[33.33%] px-2 mt-3",children:[e.jsx(t,{children:"Postal Code"}),e.jsx(i,{placeholder:"Postal Code",value:l.postal_code,onChange:a=>n("postal_code",a.target.value)}),r("postal_code")]}),e.jsxs("div",{className:"w-[33.33%] px-2 mt-3",children:[e.jsx(t,{children:"Street"}),e.jsx(i,{placeholder:"Street",value:l.street,onChange:a=>n("street",a.target.value)}),r("street")]}),e.jsxs("div",{className:"w-[33.33%] px-2 mt-3",children:[e.jsx(t,{children:"Country"}),e.jsx(v,{placeholder:"Select country",defaultValue:l.country,onChange:a=>n("country",a.alpha3),slim:!1}),r("country")]}),e.jsxs("div",{className:"w-[33.33%] px-2 mt-3",children:[e.jsx(t,{children:"Status"}),e.jsxs(d,{value:String(l.status),onValueChange:a=>n("status",a==="true"),children:[e.jsx(c,{children:e.jsx(o,{placeholder:"Select Status"})}),e.jsxs(u,{children:[e.jsx(s,{value:"true",children:"Active"}),e.jsx(s,{value:"false",children:"Inactive"})]})]}),r("status")]}),e.jsxs("div",{className:"w-full px-2 mt-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Plan Assignment"}),!l.club_id&&e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Select a club to view its available plans."})]}),e.jsxs("div",{className:"w-[33.33%] px-2 mt-3",children:[e.jsxs(t,{children:["Plan ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs(d,{value:l.plan_id,onValueChange:a=>n("plan_id",a),disabled:!l.club_id||x.length===0,children:[e.jsx(c,{className:"w-full",children:e.jsx(o,{placeholder:"Select Plan"})}),e.jsx(u,{children:x.length===0?e.jsx(s,{value:"no-plans",disabled:!0,children:l.club_id?"No active plans for this club":"Select a club first"}):x.map(a=>e.jsxs(s,{value:String(a.id),children:[a.name," - ",a.currency_code," ",a.base_amount]},a.id))})]}),r("plan_id")]}),e.jsxs("div",{className:"w-[33.33%] px-2 mt-3",children:[e.jsxs(t,{children:["Interval ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs(d,{value:l.interval,onValueChange:a=>n("interval",a),children:[e.jsx(c,{className:"w-full",children:e.jsx(o,{placeholder:"Select Interval"})}),e.jsxs(u,{children:[e.jsx(s,{value:"monthly",children:"Monthly"}),e.jsx(s,{value:"quarterly",children:"Quarterly"}),e.jsx(s,{value:"semester",children:"Semester"}),e.jsx(s,{value:"yearly",children:"Yearly"}),e.jsx(s,{value:"custom",children:"Custom"})]})]}),r("interval")]}),l.interval==="custom"&&e.jsxs("div",{className:"w-[33.33%] px-2 mt-3",children:[e.jsxs(t,{children:["Interval Count (Months)"," ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(i,{type:"number",min:"1",placeholder:"Enter number of months",value:l.interval_count??"",onChange:a=>n("interval_count",a.target.value?parseInt(a.target.value):null)}),r("interval_count")]}),e.jsxs("div",{className:"w-[33.33%] px-2 mt-3",children:[e.jsx(t,{children:"Discount Type"}),e.jsxs(d,{value:l.discount_type||"none",onValueChange:a=>n("discount_type",a==="none"?"":a),children:[e.jsx(c,{className:"w-full",children:e.jsx(o,{placeholder:"Select Discount Type (Optional)"})}),e.jsxs(u,{children:[e.jsx(s,{value:"none",children:"None"}),e.jsx(s,{value:"percent",children:"Percentage"}),e.jsx(s,{value:"fixed",children:"Fixed Amount"})]})]}),r("discount_type")]}),l.discount_type&&e.jsxs("div",{className:"w-[33.33%] px-2 mt-3",children:[e.jsxs(t,{children:["Discount Value"," ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(i,{type:"number",min:"0",step:"0.01",placeholder:l.discount_type==="percent"?"Enter percentage":"Enter amount",value:l.discount_value??"",onChange:a=>n("discount_value",a.target.value?parseFloat(a.target.value):null)}),r("discount_value")]}),e.jsxs("div",{className:"w-[33.33%] px-2 mt-3",children:[e.jsx(t,{children:"Currency"}),e.jsxs(d,{value:l.currency_code||"default",onValueChange:a=>n("currency_code",a==="default"?"":a),children:[e.jsx(c,{className:"w-full",children:e.jsx(o,{placeholder:"Select Currency (Optional)"})}),e.jsxs(u,{children:[e.jsx(s,{value:"default",children:"Use Plan Currency"}),_.map(a=>e.jsxs(s,{value:a.code,children:[a.code," - ",a.name]},a.code))]})]}),r("currency_code")]}),e.jsxs("div",{className:"w-full px-2 mt-3",children:[e.jsx(t,{children:"Upload Profile Image"}),e.jsx(i,{type:"file",onChange:a=>{var h;return n("profile_image",((h=a.target.files)==null?void 0:h[0])??null)}}),r("profile_image")]}),e.jsxs("div",{className:"w-full px-2 mt-3",children:[e.jsx(t,{children:"Upload Identification Document"}),e.jsx(i,{type:"file",onChange:a=>{var h;return n("identification_document",((h=a.target.files)==null?void 0:h[0])??null)}}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Please upload ID card and Passport together in a single PDF file (Maximum file size: 2 MB)."}),r("identification_document")]}),e.jsx("div",{className:"w-full px-2 mt-5",children:e.jsx(P,{type:"submit",disabled:S,children:"Submit"})})]})})]})}export{K as default};
