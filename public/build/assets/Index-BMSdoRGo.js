import{r as m,j as e,Y as C,b as N,y as c}from"./app-DonfvVoW.js";import{D as w}from"./DataTable-BGYkqDIB.js";import{B as p}from"./button-DYztBhfk.js";import{C as A,a as D,b as _,c as z}from"./card-vZUl9tqe.js";import{A as T,D as E,a as I,b as B,c as y}from"./authenticated-layout-CqmZS_hs.js";import{L as x}from"./label-DmJFbOHp.js";import{S as K,a as M,b as R,c as L,e as h}from"./select-BXXggIaW.js";import{C as v}from"./country-dropdown-BJ3g_fZ8.js";import{B as V}from"./badge-BmjD_Eqd.js";import{R as F}from"./RatingStars-eRi8WeRB.js";import{E as k}from"./ellipsis-w3KMgwPR.js";import{T as P}from"./trash-2-BaT29uat.js";import"./table-D9rBWwAT.js";import"./input-Dy_qbc52.js";import"./separator-Bj2Sa2yG.js";import"./index--YW_Mk4_.js";import"./sun-DZbQ5v7_.js";import"./users-puwp-WAo.js";import"./log-out-C0NbFVe-.js";import"./index-Bhx3pFlk.js";import"./index-CzXEmqM7.js";import"./chevron-down-BuTNFib9.js";import"./dialog-DrzO8twQ.js";import"./popover-DTvDaQfx.js";import"./globe-CqvwpGoe.js";const U=(l,g=!1)=>{const d=[{header:"#",cell:({row:t})=>t.index+1},{id:"profile_image",header:"Photo",cell:({row:t})=>{const r=t.original.profile_image;if(r){const o=r.startsWith("http")?r:`/storage/${r}`;return e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:o,alt:"Profile",className:"w-10 h-10 rounded-full object-cover",onError:i=>{var n;i.currentTarget.style.display="none",(n=i.currentTarget.nextElementSibling)==null||n.classList.remove("hidden")}}),e.jsx("span",{className:"text-gray-400 italic text-xs hidden absolute inset-0 flex items-center justify-center",children:"No image"})]})}return e.jsx("span",{className:"text-gray-400 italic",children:"No image"})}},{accessorKey:"code",header:"Code"},{accessorKey:"name",header:"Name"},{accessorKey:"surname",header:"Surname"},{accessorKey:"dob",header:"DOB"},{id:"rating",header:"Rating",cell:({row:t})=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(F,{rating:typeof t.original.average_rating=="number"?Math.round(t.original.average_rating):0,readonly:!0,size:"sm"}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:["(",t.original.total_ratings,")"]})]})},{accessorKey:"status",header:"Status",cell:({row:t})=>e.jsx(V,{variant:t.original.status?"default":"destructive",children:t.original.status?"Active":"Inactive"})}];return g||d.push({id:"actions",header:"Actions",cell:({row:t})=>e.jsxs(E,{children:[e.jsx(I,{asChild:!0,children:e.jsx(p,{variant:"ghost",size:"sm",children:e.jsx(k,{className:"w-4 h-4"})})}),e.jsxs(B,{align:"end",children:[e.jsx(y,{asChild:!0,children:e.jsx(N,{href:route("organization.students.edit",t.original.id),children:"Edit"})}),e.jsxs(y,{onClick:()=>{l&&confirm("Are you sure you want to delete this student?")&&l(t.original)},className:"text-red-600",children:[e.jsx(P,{className:"w-4 h-4 mr-2"}),"Delete"]})]})]})}),d};function he({students:l,nationalities:g=[],countries:d=[],filters:t}){const[r,o]=m.useState(t.nationality||""),[i,n]=m.useState(t.country||""),[j,f]=m.useState(t.status||""),u=s=>{c.get(route("organization.students.index"),{nationality:s.nationality??(r||null),country:s.country??(i||null),status:s.status??(j||null)},{preserveScroll:!0,preserveState:!0,replace:!0})},b=()=>{o(""),n(""),f(""),c.get(route("organization.students.index"),{},{preserveScroll:!0,preserveState:!1,replace:!0})},S=s=>{c.delete(route("organization.students.destroy",s.id),{onSuccess:()=>{c.visit(route("organization.students.index"))}})};return e.jsxs(T,{header:"Students",children:[e.jsx(C,{title:"Students"}),e.jsx("div",{className:"container mx-auto py-10",children:e.jsxs(A,{children:[e.jsxs(D,{className:"flex flex-row items-center justify-between",children:[e.jsxs(_,{children:["Students ",t.club_id&&`- Club ID: ${t.club_id}`]}),!t.club_id&&e.jsx(N,{href:route("organization.students.create"),children:e.jsx(p,{children:"Add Student"})})]}),e.jsxs(z,{children:[!t.club_id&&e.jsx("div",{className:"mb-6 p-4 border rounded-lg bg-muted/50",children:e.jsxs("div",{className:"flex items-end gap-4 flex-wrap",children:[e.jsxs("div",{className:"w-[200px]",children:[e.jsx(x,{className:"text-sm mb-1",children:"Nationality"}),e.jsx(v,{placeholder:"All Nationalities",defaultValue:r||"",onChange:s=>{const a=(s==null?void 0:s.alpha3)||"";o(a),u({nationality:a})},slim:!1})]}),e.jsxs("div",{className:"w-[200px]",children:[e.jsx(x,{className:"text-sm mb-1",children:"Country"}),e.jsx(v,{placeholder:"All Countries",defaultValue:i||"",onChange:s=>{const a=(s==null?void 0:s.alpha3)||"";n(a),u({country:a})}})]}),e.jsxs("div",{className:"flex flex-col w-[200px]",children:[e.jsx(x,{className:"text-sm mb-1",children:"Status"}),e.jsxs(K,{value:j,onValueChange:s=>{const a=s==="all"?"":s;f(a),u({status:a})},children:[e.jsx(M,{children:e.jsx(R,{placeholder:"All Statuses"})}),e.jsxs(L,{children:[e.jsx(h,{value:"all",children:"All"}),e.jsx(h,{value:"active",children:"Active"}),e.jsx(h,{value:"inactive",children:"Inactive"})]})]})]}),e.jsx("div",{className:"flex items-end",children:e.jsx(p,{variant:"secondary",onClick:b,children:"Reset Filters"})})]})}),e.jsx(w,{columns:U(S,!!t.club_id),data:l})]})]})})]})}export{U as columns,he as default};
