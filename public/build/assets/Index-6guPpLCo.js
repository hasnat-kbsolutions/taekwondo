import{j as e,r as N,W,Y,b as w,y as P}from"./app-CHxsABbU.js";import{s as o}from"./index-sFwGSaal.js";import{B as j}from"./button-CVVcaTnG.js";import{A as G,D as Z,a as $,b as J,c as y}from"./authenticated-layout-BpjSoaF9.js";import{D as Q}from"./DataTable-CkQCuIhe.js";import{B as _}from"./badge-C1Xnlai7.js";import{L as m}from"./label-CCOtPfjK.js";import{S as X,a as ee,b as se,c as re,e as U}from"./select-D09diZvD.js";import{C as ae}from"./country-dropdown-B1NRZsFL.js";import{D as k,a as L,b as M,c as R,d as B,e as te}from"./dialog-BC-xRP0f.js";import{I as V}from"./input-CbcG-BTm.js";import{C as x,a as u,b as h,c as p}from"./card-C5nEaoSG.js";import{W as le}from"./wallet-DeYrR61G.js";import{U as ie}from"./users-BD-bUwfe.js";import{G as ne}from"./graduation-cap-Bn8iA_ho.js";import{c as oe}from"./createLucideIcon-BOF96pXa.js";import{A as ce}from"./arrow-right-lNoNbCnR.js";import{E as de}from"./ellipsis-ChGKUR5a.js";import{E as me}from"./eye-KjP6m6XA.js";import{S as xe}from"./square-pen-aE7EwmXR.js";import{K as ue}from"./key-sy_o-7Kv.js";import{T as he}from"./trash-2-D8bTICyX.js";import"./separator-DNOPl6qu.js";import"./index-CN-1e5st.js";import"./building-2-Ik-crbZS.js";import"./log-out-DhNmSrES.js";import"./calendar-BaxiiAEL.js";import"./sun-BGtUC1J2.js";import"./table-DlA2-qFm.js";import"./index-Dh0DyDEf.js";import"./index-B5rDxbdp.js";import"./chevron-down-DVqaVJfg.js";import"./popover-qCWsMXEn.js";import"./globe-Btly0sO5.js";/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pe=oe("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]),je=(f,g)=>[{header:"#",cell:({row:a})=>a.index+1},{header:"Logo",cell:({row:a})=>a.original.logo?e.jsx("img",{src:a.original.logo,alt:"Club Logo",className:"w-10 h-10 object-cover rounded"}):"-"},{header:"Club Name",cell:({row:a})=>{var t;return((t=a.original.user)==null?void 0:t.name)??"-"}},{header:"Organization",cell:({row:a})=>{var t;return((t=a.original.organization)==null?void 0:t.name)??"-"}},{header:"Location",cell:({row:a})=>e.jsx("div",{className:"text-sm",children:a.original.city&&a.original.country?e.jsxs(e.Fragment,{children:[e.jsx("div",{children:a.original.city}),e.jsx("div",{className:"text-muted-foreground",children:a.original.country})]}):a.original.city||a.original.country||"-"})},{header:"Status",cell:({row:a})=>e.jsx(_,{variant:a.original.status?"default":"destructive",children:a.original.status?"Active":"Inactive"})},{header:"Default Currency",accessorKey:"default_currency",cell:({row:a})=>{const t=a.original.default_currency;return t?e.jsx(_,{variant:"outline",className:"font-mono",children:t}):e.jsx("span",{className:"text-gray-400",children:"Not set"})}},{header:"Actions",cell:({row:a})=>e.jsxs(Z,{children:[e.jsx($,{asChild:!0,children:e.jsx(j,{variant:"ghost",size:"icon",className:"h-8 w-8",children:e.jsx(de,{className:"h-4 w-4"})})}),e.jsxs(J,{align:"end",children:[e.jsxs(y,{onClick:()=>f(a.original),children:[e.jsx(me,{className:"w-4 h-4 mr-2"})," View"]}),e.jsx(y,{asChild:!0,children:e.jsxs(w,{href:o("admin.clubs.edit",a.original.id),children:[e.jsx(xe,{className:"w-4 h-4 mr-2"})," Edit"]})}),g&&e.jsxs(y,{onClick:()=>g(a.original),children:[e.jsx(ue,{className:"w-4 h-4 mr-2"})," Change Password"]}),e.jsx(y,{asChild:!0,children:e.jsxs(w,{href:o("admin.clubs.destroy",a.original.id),method:"delete",as:"button",children:[e.jsx(he,{className:"w-4 h-4 mr-2"})," Delete"]})})]})]})}];function Je({clubs:f,organizations:g=[],filters:a}){var O,E;const t=Array.isArray(f)?f:[],D=s=>(Number(s)||0).toFixed(2),c={};let d="MYR";t.forEach(s=>{var i,n;(i=s.payment_stats)!=null&&i.amounts_by_currency&&Object.entries(s.payment_stats.amounts_by_currency).forEach(([F,K])=>{c[F]=(c[F]||0)+K}),(n=s.payment_stats)!=null&&n.default_currency_code&&(d=s.payment_stats.default_currency_code)});const H=[{label:"Total Revenue",count:e.jsxs("div",{className:"space-y-1 w-full",children:[e.jsxs("div",{className:"text-lg font-bold",children:[d==="MYR"?"RM":d," ",D(c[d]||0)]}),Object.keys(c).length>1&&e.jsx("div",{className:"text-xs text-muted-foreground space-y-1",children:Object.entries(c).filter(([s])=>s!==d).map(([s,i])=>e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{children:[s,":"]}),e.jsx("span",{children:D(i)})]},s))})]}),icon:e.jsx(le,{className:"h-6 w-6 text-primary"}),url:o("admin.payments.index")},{label:"Total Students",count:Number(t.reduce((s,i)=>{var n;return s+Number(((n=i.students)==null?void 0:n.length)||0)},0)),icon:e.jsx(ie,{className:"h-6 w-6 text-blue-600"}),url:o("admin.students.index")},{label:"Total Instructors",count:Number(t.reduce((s,i)=>{var n;return s+Number(((n=i.instructors)==null?void 0:n.length)||0)},0)),icon:e.jsx(ne,{className:"h-6 w-6 text-green-600"}),url:o("admin.instructors.index")},{label:"Total Supporters",count:Number(t.reduce((s,i)=>{var n;return s+Number(((n=i.supporters)==null?void 0:n.length)||0)},0)),icon:e.jsx(pe,{className:"h-6 w-6 text-purple-600"}),url:o("admin.supporters.index")}],[C,A]=N.useState(a.organization_id||""),[S,I]=N.useState(a.country||""),z=(s={})=>{P.get(o("admin.clubs.index"),{...s,organization_id:C||null,country:S||null},{preserveScroll:!0,preserveState:!0,replace:!0})},q=()=>{A(""),I(""),P.get(o("admin.clubs.index"),{},{preserveScroll:!0,preserveState:!0})},[r,T]=N.useState(null),[b,v]=N.useState(null),l=W({password:"",password_confirmation:""});return e.jsxs(G,{header:"Clubs",children:[e.jsx(Y,{title:"Organizations"}),e.jsxs("div",{className:"container mx-auto py-10",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold mb-4 text-muted-foreground",children:"Overview Statistics"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 mb-6",children:H.map(s=>e.jsx(w,{href:s.url,className:`block group ${s.label==="Total Revenue"?"col-span-1 sm:col-span-2 lg:col-span-3 xl:col-span-4":""}`,children:e.jsxs(x,{className:"hover:shadow-lg transition-all duration-200 cursor-pointer hover:bg-accent/50 border-2 hover:border-primary/20",children:[e.jsxs(u,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(h,{className:"text-sm font-medium group-hover:text-primary transition-colors",children:s.label}),e.jsxs("div",{className:"flex items-center gap-2",children:[s.icon,e.jsx(ce,{className:"h-4 w-4 text-muted-foreground group-hover:text-primary group-hover:translate-x-1 transition-all duration-200"})]})]}),e.jsx(p,{children:e.jsx("div",{className:"text-2xl font-bold group-hover:text-primary transition-colors",children:s.count})})]})},s.label))})]}),e.jsxs(x,{children:[e.jsxs(u,{className:"flex flex-row items-center justify-between",children:[e.jsx(h,{children:"Clubs"}),e.jsx(w,{href:o("admin.clubs.create"),children:e.jsx(j,{children:"Add Club"})})]}),e.jsxs(p,{children:[e.jsx("div",{className:"mb-6 p-4 border rounded-lg bg-muted/50",children:e.jsxs("div",{className:"flex items-end gap-4 flex-wrap",children:[e.jsxs("div",{className:"flex flex-col w-[200px]",children:[e.jsx(m,{className:"text-sm mb-1",children:"Organizations"}),e.jsxs(X,{value:C||"",onValueChange:s=>{A(s),z({country:S})},children:[e.jsx(ee,{children:e.jsx(se,{placeholder:"All Organizations"})}),e.jsxs(re,{children:[e.jsx(U,{value:"all",children:"All"}),g.map(s=>e.jsx(U,{value:s.id.toString(),children:s.name},s.id))]})]})]}),e.jsxs("div",{className:"flex flex-col w-[200px]",children:[e.jsx(m,{className:"text-sm mb-1",children:"Country"}),e.jsx(ae,{placeholder:"All Countries",defaultValue:S||"",onChange:s=>{const i=(s==null?void 0:s.alpha3)||"";I(i),z({organization_id:C})},slim:!1})]}),e.jsx("div",{className:"flex items-end",children:e.jsx(j,{variant:"secondary",onClick:q,children:"Reset Filters"})})]})}),e.jsx(Q,{columns:je(s=>T(s),s=>v(s)),data:t})]})]}),r&&e.jsx(k,{open:!!r,onOpenChange:s=>{s||T(null)},children:e.jsxs(L,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(M,{children:[e.jsx(R,{children:"Club Details"}),e.jsx(B,{children:"View detailed information about the club."})]}),r&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex justify-center",children:e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx("div",{className:"w-32 h-32 flex items-center justify-center rounded-full bg-primary/10 text-primary text-4xl font-bold border-2 border-primary/20 shadow-lg",children:r.logo?e.jsx("img",{src:r.logo,alt:"Club Logo",className:"w-32 h-32 rounded-full object-cover"}):r.name.charAt(0).toUpperCase()}),e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"font-semibold text-xl",children:r.name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Club ID: ",r.id]})]})]})}),e.jsx("div",{className:"grid grid-cols-2 gap-4",children:[{label:"Email",value:((O=r.user)==null?void 0:O.email)||"Not specified"},{label:"Phone",value:r.phone||"Not specified"},{label:"City",value:r.city||"Not specified"},{label:"Country",value:r.country||"Not specified"},{label:"Tax Number",value:r.tax_number||"Not specified"},{label:"Invoice Prefix",value:r.invoice_prefix||"Not specified"},{label:"Organization",value:((E=r.organization)==null?void 0:E.name)||"Not specified"},{label:"Status",value:e.jsx(_,{variant:r.status?"default":"destructive",children:r.status?"Active":"Inactive"})}].map((s,i)=>e.jsxs("div",{className:"flex flex-col space-y-1",children:[e.jsx(m,{className:"text-sm font-medium text-muted-foreground",children:s.label}),e.jsx("div",{className:"text-sm",children:s.value})]},i))}),r.students&&r.students.length>0&&e.jsxs(x,{children:[e.jsx(u,{children:e.jsxs(h,{children:["Students (",r.students.length,")"]})}),e.jsx(p,{children:e.jsx("div",{className:"space-y-2",children:r.students.map(s=>e.jsx("div",{className:"flex items-center justify-between p-2 border rounded-lg",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-primary/10 rounded-full flex items-center justify-center text-primary font-semibold",children:s.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:s.name}),s.email&&e.jsx("p",{className:"text-sm text-muted-foreground",children:s.email})]})]})},s.id))})})]}),r.instructors&&r.instructors.length>0&&e.jsxs(x,{children:[e.jsx(u,{children:e.jsxs(h,{children:["Instructors (",r.instructors.length,")"]})}),e.jsx(p,{children:e.jsx("div",{className:"space-y-2",children:r.instructors.map(s=>e.jsx("div",{className:"flex items-center justify-between p-2 border rounded-lg",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-primary/10 rounded-full flex items-center justify-center text-primary font-semibold",children:s.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:s.name}),s.email&&e.jsx("p",{className:"text-sm text-muted-foreground",children:s.email})]})]})},s.id))})})]}),r.supporters&&r.supporters.length>0&&e.jsxs(x,{children:[e.jsx(u,{children:e.jsxs(h,{children:["Supporters (",r.supporters.length,")"]})}),e.jsx(p,{children:e.jsx("div",{className:"space-y-2",children:r.supporters.map(s=>e.jsx("div",{className:"flex items-center justify-between p-2 border rounded-lg",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-primary/10 rounded-full flex items-center justify-center text-primary font-semibold",children:s.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:s.name}),s.email&&e.jsx("p",{className:"text-sm text-muted-foreground",children:s.email})]})]})},s.id))})})]})]})]})}),b&&e.jsx(k,{open:!!b,onOpenChange:s=>{s||(v(null),l.reset())},children:e.jsxs(L,{children:[e.jsxs(M,{children:[e.jsx(R,{children:"Change Password"}),e.jsxs(B,{children:["Update password for"," ",b.name]})]}),e.jsxs("form",{onSubmit:s=>{s.preventDefault(),l.patch(o("admin.clubs.updatePassword",b.id),{onSuccess:()=>{v(null),l.reset()}})},className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs(m,{htmlFor:"password",children:["New Password"," ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(V,{id:"password",type:"password",placeholder:"Enter new password",value:l.data.password,onChange:s=>l.setData("password",s.target.value),required:!0}),l.errors.password&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:l.errors.password})]}),e.jsxs("div",{children:[e.jsxs(m,{htmlFor:"password_confirmation",children:["Confirm Password"," ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(V,{id:"password_confirmation",type:"password",placeholder:"Confirm new password",value:l.data.password_confirmation,onChange:s=>l.setData("password_confirmation",s.target.value),required:!0}),l.errors.password_confirmation&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:l.errors.password_confirmation})]}),e.jsxs(te,{children:[e.jsx(j,{type:"button",variant:"outline",onClick:()=>{v(null),l.reset()},children:"Cancel"}),e.jsx(j,{type:"submit",disabled:l.processing,children:l.processing?"Updating...":"Update Password"})]})]})]})})]})]})}export{Je as default};
