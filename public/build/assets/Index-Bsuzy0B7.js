import{r,j as e,Y as I,b as n,y as A}from"./app-C9plaevp.js";import{B as f}from"./button-C1BJUHSP.js";import{B as L}from"./badge-DODT6762.js";import{A as B,D as K,a as T,b as V,c as u}from"./authenticated-layout-DP7ZBxis.js";import{S as h,a as m,b as x,c as p,e as l}from"./select-CLsyOCY0.js";import{D as J}from"./DataTable-DBQPNBmL.js";import{C as N,a as w,b as M,c as D}from"./card-BGsvxEZM.js";import{L as j}from"./label-C24tmB1e.js";import{E as $}from"./ellipsis-3c2ceUVd.js";import"./input-BE_Le7UK.js";import"./separator-BKFerzHS.js";import"./index-aFKWu_qK.js";import"./index-BjgcLafY.js";import"./index-zV113YDh.js";import"./chevron-down-qXVyCODI.js";import"./table-CgrdWPzq.js";const k=[{header:"#",cell:({row:s})=>s.index+1},{header:"Student",cell:({row:s})=>{var t;return((t=s.original.student)==null?void 0:t.name)||"-"}},{header:"Amount",accessorKey:"amount"},{header:"Status",cell:({row:s})=>e.jsx(L,{variant:s.original.status==="paid"||s.original.status==="success"?"default":"destructive",children:s.original.status})},{header:"Method",accessorKey:"method"},{header:"Payment Month",accessorKey:"payment_month"},{header:"Pay At",accessorKey:"pay_at"},{header:"Actions",cell:({row:s})=>e.jsxs(K,{children:[e.jsx(T,{asChild:!0,children:e.jsx(f,{variant:"ghost",size:"icon",className:"h-8 w-8",children:e.jsx($,{className:"h-4 w-4"})})}),e.jsxs(V,{align:"end",children:[e.jsx(u,{asChild:!0,children:e.jsx(n,{href:route("organization.payments.edit",s.original.id),children:"Edit"})}),e.jsx(u,{asChild:!0,children:e.jsx(n,{href:route("organization.payments.destroy",s.original.id),method:"delete",as:"button",children:"Delete"})}),e.jsx(u,{asChild:!0,children:e.jsx(n,{href:route("organization.payments.invoice",{payment:s.original.id}),children:"Invoice"})})]})]})}],v=new Date().getFullYear(),R=["All",...Array.from({length:5},(s,t)=>(v-t).toString())],H=[{label:"January",value:"01"},{label:"February",value:"02"},{label:"March",value:"03"},{label:"April",value:"04"},{label:"May",value:"05"},{label:"June",value:"06"},{label:"July",value:"07"},{label:"August",value:"08"},{label:"September",value:"09"},{label:"October",value:"10"},{label:"November",value:"11"},{label:"December",value:"12"}];function ce({payments:s,filters:t}){var b,S;const[i,y]=r.useState(t.status||""),[c,g]=r.useState(((b=t.payment_month)==null?void 0:b.split("-")[0])||v.toString()),[o,d]=r.useState(((S=t.payment_month)==null?void 0:S.split("-")[1])||""),P=({year:a,month:C,status:F})=>{const _=a==="All"?"":C?`${a}-${C}`:`${a}-01`;A.get(route("organization.payments.index"),{status:F||null,payment_month:_||null},{preserveScroll:!0,preserveState:!0,replace:!0})},[z,Y]=r.useState(!0);r.useEffect(()=>{if(z){Y(!1);return}P({year:c,month:o,status:i})},[c,o,i]);const E=()=>{y(""),g(v.toString()),d(""),A.get(route("organization.payments.index"),{},{preserveScroll:!0,preserveState:!1,replace:!0})};return e.jsxs(B,{header:"Payments",children:[e.jsx(I,{title:"Payments"}),e.jsxs("div",{className:"container mx-auto py-10 space-y-6",children:[e.jsxs(N,{children:[e.jsx(w,{className:"flex flex-row items-center justify-between",children:e.jsx(M,{children:"Filters"})}),e.jsx(D,{children:e.jsxs("div",{className:"flex items-end gap-4 flex-wrap",children:[e.jsxs("div",{className:"flex flex-col w-[160px]",children:[e.jsx(j,{className:"text-sm mb-1",children:"Year"}),e.jsxs(h,{value:c,onValueChange:a=>{g(a),a==="All"&&d("")},children:[e.jsx(m,{children:e.jsx(x,{placeholder:"Year"})}),e.jsx(p,{children:R.map(a=>e.jsx(l,{value:a,children:a},a))})]})]}),e.jsxs("div",{className:"flex flex-col w-[160px]",children:[e.jsx(j,{className:"text-sm mb-1",children:"Month"}),e.jsxs(h,{value:o,onValueChange:a=>d(a==="all"?"":a),children:[e.jsx(m,{children:e.jsx(x,{placeholder:"Month"})}),e.jsxs(p,{children:[e.jsx(l,{value:"all",children:"All"}),H.map(a=>e.jsx(l,{value:a.value,children:a.label},a.value))]})]})]}),e.jsxs("div",{className:"flex flex-col w-[160px]",children:[e.jsx(j,{className:"text-sm mb-1",children:"Status"}),e.jsxs(h,{value:i,onValueChange:a=>y(a==="all"?"":a),children:[e.jsx(m,{children:e.jsx(x,{placeholder:"All Statuses"})}),e.jsxs(p,{children:[e.jsx(l,{value:"all",children:"All"}),e.jsx(l,{value:"paid",children:"Paid"}),e.jsx(l,{value:"unpaid",children:"Unpaid"})]})]})]}),e.jsx("div",{className:"flex items-end",children:e.jsx(f,{className:"flex flex-wrap items-center gap-2 md:flex-row bg-primary text-black",onClick:E,children:"Reset Filters"})})]})})]}),e.jsxs(N,{children:[e.jsxs(w,{className:"flex flex-row items-center justify-between",children:[e.jsx(M,{children:"Payments"}),e.jsx(n,{href:route("organization.payments.create"),children:e.jsx(f,{children:"Add Payment"})})]}),e.jsx(D,{children:e.jsx(J,{data:s,columns:k})})]})]})]})}export{ce as default};
