import{r as S,j as e,Y,y as f}from"./app-v-MKZwHK.js";import{A as P,B as R}from"./authenticated-layout-B2ZYBOu0.js";import{B as A}from"./button-y2xYF5vs.js";import{C as l,a as r,b as i,c as n}from"./card-Bue6HVht.js";import{L as D}from"./label-C5sGq_pi.js";import{S as F,a as T,b as _,c as L,e as k}from"./select-LjE5uhi2.js";import{D as H}from"./DataTable-DHEsa1KD.js";import{D as g}from"./dollar-sign-Bx0aZWCN.js";import{H as $}from"./hourglass-B4q6CjQp.js";import{f as E}from"./format-LUeNQFBy.js";import"./input-DM5ElhjT.js";import"./separator-DeFpeziM.js";import"./index-CLEmplpx.js";import"./createLucideIcon-aeo75YUw.js";import"./building-2-Bma4Oo2b.js";import"./users-Be_mREES.js";import"./log-out-DFR9R_Ks.js";import"./sun-DA2HSJIJ.js";import"./index-afWeK-hQ.js";import"./index-R1Ab9tXC.js";import"./chevron-down-B8hI96OS.js";import"./table-s978S__J.js";const x=new Date().getFullYear(),I=Array.from({length:31},(m,c)=>x-15+c),h=(m,c="MYR")=>{const d=Number(m)||0;return c==="JPY"?d.toLocaleString():d.toFixed(2)};function ce({year:m,payments:c,totalPayments:d,paidPayments:y,pendingPayments:u,amountsByCurrency:t,defaultCurrencyCode:o}){const[N,j]=S.useState(m||x),b=s=>{const a=parseInt(s);j(a),f.get(route("student.payments.index"),{year:a})},w=()=>{j(x),f.get(route("student.payments.index"),{year:x})},v=[{header:"#",cell:({row:s})=>s.index+1},{header:"Amount",cell:({row:s})=>{var p;const a=((p=s.original.currency)==null?void 0:p.symbol)||"RM",M=s.original.currency_code||"MYR";return`${a} ${h(s.original.amount,M)}`}},{header:"Method",accessorKey:"method"},{header:"Status",cell:({row:s})=>e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${s.original.status==="paid"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:s.original.status})},{header:"Payment Month",accessorKey:"payment_month"},{header:"Pay At",cell:({row:s})=>s.original.pay_at?E(new Date(s.original.pay_at),"MMM dd, yyyy"):"-"},{header:"Notes",cell:({row:s})=>s.original.notes||"-"}];return e.jsxs(P,{header:"My Payments",children:[e.jsx(Y,{title:"My Payments"}),e.jsxs("div",{className:"container mx-auto py-10 space-y-6",children:[e.jsxs(l,{children:[e.jsx(r,{children:e.jsx(i,{children:"Filters"})}),e.jsx(n,{children:e.jsxs("div",{className:"flex items-end gap-4 flex-wrap",children:[e.jsxs("div",{className:"flex flex-col w-[180px]",children:[e.jsx(D,{className:"text-sm mb-1",children:"Year"}),e.jsxs(F,{onValueChange:b,value:N.toString(),children:[e.jsx(T,{children:e.jsx(_,{placeholder:"Select a year"})}),e.jsx(L,{children:I.map(s=>e.jsx(k,{value:s.toString(),children:s},s))})]})]}),e.jsx("div",{className:"flex items-end",children:e.jsx(A,{onClick:w,children:"Reset Filters"})})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs(l,{children:[e.jsxs(r,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(i,{className:"text-sm font-medium",children:"Total Payments"}),e.jsx(g,{className:"h-6 w-6 text-primary"})]}),e.jsx(n,{children:e.jsx("div",{className:"text-2xl font-bold",children:d||0})})]}),e.jsxs(l,{children:[e.jsxs(r,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(i,{className:"text-sm font-medium",children:"Paid"}),e.jsx(R,{className:"h-6 w-6 text-green-600"})]}),e.jsx(n,{children:e.jsx("div",{className:"text-2xl font-bold text-green-600",children:y||0})})]}),e.jsxs(l,{children:[e.jsxs(r,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(i,{className:"text-sm font-medium",children:"Pending"}),e.jsx($,{className:"h-6 w-6 text-yellow-500"})]}),e.jsx(n,{children:e.jsx("div",{className:"text-2xl font-bold text-yellow-500",children:u||0})})]}),e.jsxs(l,{className:"col-span-1 sm:col-span-2 lg:col-span-4",children:[e.jsxs(r,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(i,{className:"text-sm font-medium",children:"Total Revenue"}),e.jsx(g,{className:"h-6 w-6 text-primary"})]}),e.jsx(n,{children:e.jsxs("div",{className:"space-y-1 w-full",children:[e.jsxs("div",{className:"text-lg font-bold",children:[o==="MYR"?"RM":o," ",h((t==null?void 0:t[o||"MYR"])||0,o||"MYR")]}),t&&Object.keys(t).length>1&&e.jsx("div",{className:"text-xs text-muted-foreground space-y-1",children:Object.entries(t).filter(([s])=>s!==o).map(([s,a])=>e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{children:[s,":"]}),e.jsx("span",{children:h(a,s)})]},s))})]})})]})]}),e.jsxs(l,{children:[e.jsx(r,{children:e.jsx(i,{children:"My Payments"})}),e.jsx(n,{children:e.jsx(H,{data:c,columns:v})})]})]})]})}export{ce as default};
