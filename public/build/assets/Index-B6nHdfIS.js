import{r as i,j as e,Y as O,b,y as R}from"./app-BOiaKrnq.js";import{B as C}from"./button-D8YHfysu.js";import{B as H}from"./badge-CGO4XOmO.js";import{A as K,B as $,D as q,a as U,b as G,c as M}from"./authenticated-layout-DN-QAHOE.js";import{S as p,a as j,b as g,c as v,e as n}from"./select-BgqjcFjh.js";import{D as Q}from"./DataTable-C7Y4JBaD.js";import{C as o,a as c,b as d,c as m}from"./card-D2K8gMSj.js";import{L as f}from"./label-DnRgMY3U.js";import{D as z}from"./dollar-sign-DLcLKrU4.js";import{H as W}from"./hourglass-ZJSSJ_5C.js";import{E as X}from"./ellipsis-BluzSH6V.js";import{S as Z}from"./square-pen-Dm1aUC8M.js";import{T as ee}from"./trash-2-zkKMwqEB.js";import{F as se}from"./file-text-Cja5Td5X.js";import"./input-CvH_BJnq.js";import"./separator-wF5N-nG0.js";import"./index-Us7THKc4.js";import"./sun-0h1ZuuTt.js";import"./users-DkIv6nVO.js";import"./log-out-DvMYnxvU.js";import"./index-C6yEH-YU.js";import"./index-C3o37o0H.js";import"./chevron-down-C3yehkxA.js";import"./table-DNQQVKZT.js";const re=[{header:"#",cell:({row:r})=>r.index+1},{header:"Student",cell:({row:r})=>{var t;return((t=r.original.student)==null?void 0:t.name)||"-"}},{header:"Amount",cell:({row:r})=>{var h;const t=r.original,l=t.amount,a=t.currency_code,y=((h=t.currency)==null?void 0:h.symbol)||a,x=D(l,a);return e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"font-medium",children:[a==="MYR"?"RM ":y,x]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:a})]})}},{header:"Status",cell:({row:r})=>e.jsx(H,{variant:r.original.status==="paid"||r.original.status==="success"?"default":"destructive",children:r.original.status})},{header:"Method",accessorKey:"method"},{header:"Payment Month",accessorKey:"payment_month"},{header:"Pay At",accessorKey:"pay_at"},{header:"Actions",cell:({row:r})=>e.jsxs(q,{children:[e.jsx(U,{asChild:!0,children:e.jsx(C,{variant:"ghost",size:"icon",className:"h-8 w-8",children:e.jsx(X,{className:"h-4 w-4"})})}),e.jsxs(G,{align:"end",children:[e.jsx(M,{asChild:!0,children:e.jsxs(b,{href:route("organization.payments.edit",r.original.id),children:[e.jsx(Z,{className:"w-4 h-4 mr-2"})," Edit"]})}),e.jsx(M,{asChild:!0,children:e.jsxs(b,{href:route("organization.payments.destroy",r.original.id),method:"delete",as:"button",children:[e.jsx(ee,{className:"w-4 h-4 mr-2"})," Delete"]})}),e.jsx(M,{asChild:!0,children:e.jsxs(b,{href:route("organization.payments.invoice",{payment:r.original.id}),children:[e.jsx(se,{className:"w-4 h-4 mr-2"})," Invoice"]})})]})]})}],P=new Date().getFullYear(),te=["All",...Array.from({length:5},(r,t)=>(P-t).toString())],ae=[{label:"January",value:"01"},{label:"February",value:"02"},{label:"March",value:"03"},{label:"April",value:"04"},{label:"May",value:"05"},{label:"June",value:"06"},{label:"July",value:"07"},{label:"August",value:"08"},{label:"September",value:"09"},{label:"October",value:"10"},{label:"November",value:"11"},{label:"December",value:"12"}],D=(r,t)=>{const l=Number(r)||0;return t==="JPY"?l.toLocaleString():l.toFixed(2)};function De({payments:r,filters:t,amountsByCurrency:l={},defaultCurrencyCode:a="MYR",currencies:y=[]}){var T,_;const[x,h]=i.useState(t.status||""),[N,Y]=i.useState(t.currency_code||""),[w,F]=i.useState(((T=t.payment_month)==null?void 0:T.split("-")[0])||P.toString()),[S,A]=i.useState(((_=t.payment_month)==null?void 0:_.split("-")[1])||""),E=({year:s,month:u,status:k,currency:B})=>{const J=s==="All"?"":u?`${s}-${u}`:`${s}-01`;R.get(route("organization.payments.index"),{status:k||null,payment_month:J||null,currency_code:B||null},{preserveScroll:!0,preserveState:!0,replace:!0})},[L,I]=i.useState(!0);i.useEffect(()=>{if(L){I(!1);return}E({year:w,month:S,status:x,currency:N})},[w,S,x,N]);const V=()=>{h(""),F(P.toString()),A(""),Y(""),R.get(route("organization.payments.index"),{},{preserveScroll:!0,preserveState:!1,replace:!0})};return e.jsxs(K,{header:"Payments",children:[e.jsx(O,{title:"Payments"}),e.jsxs("div",{className:"container mx-auto py-10 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold mb-4 text-muted-foreground",children:"Payment Overview"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 mb-6",children:[e.jsxs(o,{className:"hover:shadow-lg transition-all duration-200 cursor-pointer hover:bg-accent/50 border-2 hover:border-primary/20 col-span-1 sm:col-span-2 lg:col-span-3 xl:col-span-4",children:[e.jsxs(c,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(d,{className:"text-sm font-medium group-hover:text-primary transition-colors",children:"Total Revenue"}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(z,{className:"h-6 w-6 text-primary"})})]}),e.jsx(m,{children:e.jsx("div",{className:"text-2xl font-bold group-hover:text-primary transition-colors",children:e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{children:[a==="MYR"?"RM":a," ",D(l[a]||0,a)]}),Object.keys(l).length>1&&e.jsx("div",{className:"text-xs text-muted-foreground space-y-1",children:Object.entries(l).filter(([s])=>s!==a).map(([s,u])=>e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{children:[s,":"]}),e.jsx("span",{children:D(u,s)})]},s))})]})})})]}),e.jsxs(o,{className:"hover:shadow-lg transition-all duration-200 cursor-pointer hover:bg-accent/50 border-2 hover:border-primary/20",children:[e.jsxs(c,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(d,{className:"text-sm font-medium group-hover:text-primary transition-colors",children:"Total Payments"}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(z,{className:"h-6 w-6 text-primary"})})]}),e.jsx(m,{children:e.jsx("div",{className:"text-2xl font-bold group-hover:text-primary transition-colors",children:r.length})})]}),e.jsxs(o,{className:"hover:shadow-lg transition-all duration-200 cursor-pointer hover:bg-accent/50 border-2 hover:border-primary/20",children:[e.jsxs(c,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(d,{className:"text-sm font-medium group-hover:text-primary transition-colors",children:"Paid"}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx($,{className:"h-6 w-6 text-green-600"})})]}),e.jsx(m,{children:e.jsx("div",{className:"text-2xl font-bold group-hover:text-primary transition-colors",children:r.filter(s=>s.status==="paid").length})})]}),e.jsxs(o,{className:"hover:shadow-lg transition-all duration-200 cursor-pointer hover:bg-accent/50 border-2 hover:border-primary/20",children:[e.jsxs(c,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(d,{className:"text-sm font-medium group-hover:text-primary transition-colors",children:"Pending"}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(W,{className:"h-6 w-6 text-yellow-500"})})]}),e.jsx(m,{children:e.jsx("div",{className:"text-2xl font-bold group-hover:text-primary transition-colors",children:r.filter(s=>s.status==="pending").length})})]})]})]}),e.jsxs(o,{children:[e.jsx(c,{className:"flex flex-row items-center justify-between",children:e.jsx(d,{children:"Filters"})}),e.jsx(m,{children:e.jsxs("div",{className:"flex items-end gap-4 flex-wrap",children:[e.jsxs("div",{className:"flex flex-col w-[160px]",children:[e.jsx(f,{className:"text-sm mb-1",children:"Year"}),e.jsxs(p,{value:w,onValueChange:s=>{F(s),s==="All"&&A("")},children:[e.jsx(j,{children:e.jsx(g,{placeholder:"Year"})}),e.jsx(v,{children:te.map(s=>e.jsx(n,{value:s,children:s},s))})]})]}),e.jsxs("div",{className:"flex flex-col w-[160px]",children:[e.jsx(f,{className:"text-sm mb-1",children:"Month"}),e.jsxs(p,{value:S,onValueChange:s=>A(s==="all"?"":s),children:[e.jsx(j,{children:e.jsx(g,{placeholder:"Month"})}),e.jsxs(v,{children:[e.jsx(n,{value:"all",children:"All"}),ae.map(s=>e.jsx(n,{value:s.value,children:s.label},s.value))]})]})]}),e.jsxs("div",{className:"flex flex-col w-[160px]",children:[e.jsx(f,{className:"text-sm mb-1",children:"Status"}),e.jsxs(p,{value:x,onValueChange:s=>h(s==="all"?"":s),children:[e.jsx(j,{children:e.jsx(g,{placeholder:"All Statuses"})}),e.jsxs(v,{children:[e.jsx(n,{value:"all",children:"All"}),e.jsx(n,{value:"paid",children:"Paid"}),e.jsx(n,{value:"unpaid",children:"Unpaid"})]})]})]}),e.jsxs("div",{className:"flex flex-col w-[160px]",children:[e.jsx(f,{className:"text-sm mb-1",children:"Currency"}),e.jsxs(p,{value:N,onValueChange:s=>Y(s==="all"?"":s),children:[e.jsx(j,{children:e.jsx(g,{placeholder:"All Currencies"})}),e.jsxs(v,{children:[e.jsx(n,{value:"all",children:"All"}),y.map(s=>e.jsxs(n,{value:s.code,children:[s.code," -"," ",s.symbol]},s.code))]})]})]}),e.jsx("div",{className:"flex items-end",children:e.jsx(C,{className:"flex flex-wrap items-center gap-2 md:flex-row bg-primary text-background",onClick:V,children:"Reset Filters"})})]})})]}),e.jsxs(o,{children:[e.jsxs(c,{className:"flex flex-row items-center justify-between",children:[e.jsx(d,{children:"Payments"}),e.jsx(b,{href:route("organization.payments.create"),children:e.jsx(C,{children:"Add Payment"})})]}),e.jsx(m,{children:e.jsx(Q,{data:r,columns:re})})]})]})]})}export{De as default};
