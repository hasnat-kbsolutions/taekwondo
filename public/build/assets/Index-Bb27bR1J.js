import{r as P,j as e,Y as R,y as g,b as A}from"./app-2gn4RfSZ.js";import{A as F,B as T,D as _,a as k,b as I,c as u}from"./authenticated-layout-Cg-1muXU.js";import{B as y}from"./button-BIncYwTu.js";import{C as a,a as l,b as r,c as i}from"./card-aDrCg9A8.js";import{L as E}from"./label-DHZZwbSO.js";import{S as L,a as C,b as H,c as V,e as $}from"./select-DucK0tRK.js";import{D as K}from"./DataTable-DGXkLYlU.js";import{W as N}from"./wallet-BHnETrAg.js";import{H as O}from"./hourglass-15x-2Ss_.js";import{C as W}from"./circle-x-BxOfsFzc.js";import{E as z}from"./ellipsis-Da7RdrnB.js";import{F as J}from"./file-text-PEhMVDmf.js";import{D as U}from"./download-MkR0Ff7t.js";import{f as X}from"./format-LUeNQFBy.js";import"./input-Dj8_zug_.js";import"./separator-B-OjaV0S.js";import"./index-Bkygkmel.js";import"./createLucideIcon-DybH0MdA.js";import"./building-2-DNx1rPF9.js";import"./users-CkuQDTLu.js";import"./log-out-C5WUean8.js";import"./sun-CBb6fQqu.js";import"./index-CBzvCrkR.js";import"./index-BFcKiWpC.js";import"./chevron-down-ytmlgpZO.js";import"./table-2ad5ZTOX.js";const x=new Date().getFullYear(),q=Array.from({length:31},(d,c)=>x-15+c),j=(d,c="MYR")=>{const m=Number(d)||0;return c==="JPY"?m.toLocaleString():m.toFixed(2)};function be({year:d,payments:c,totalPayments:m,paidPayments:w,pendingPayments:b,unpaidPayments:v,amountsByCurrency:n,defaultCurrencyCode:o}){const[M,p]=P.useState(d||x),S=s=>{const t=parseInt(s);p(t),g.get(route("student.payments.index"),{year:t})},Y=()=>{p(x),g.get(route("student.payments.index"),{year:x})},D=[{header:"#",cell:({row:s})=>s.index+1},{header:"Amount",cell:({row:s})=>{var f;const t=((f=s.original.currency)==null?void 0:f.symbol)||"RM",h=s.original.currency_code||"MYR";return`${t} ${j(s.original.amount,h)}`}},{header:"Method",accessorKey:"method"},{header:"Status",cell:({row:s})=>e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${s.original.status==="paid"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:s.original.status})},{header:"Payment Month",accessorKey:"payment_month"},{header:"Pay At",cell:({row:s})=>s.original.pay_at?X(new Date(s.original.pay_at),"MMM dd, yyyy"):"-"},{header:"Notes",cell:({row:s})=>s.original.notes||"-"},{header:"Actions",cell:({row:s})=>e.jsxs(_,{children:[e.jsx(k,{asChild:!0,children:e.jsx(y,{variant:"ghost",size:"icon",className:"h-8 w-8",children:e.jsx(z,{className:"h-4 w-4"})})}),e.jsxs(I,{align:"end",children:[e.jsx(u,{asChild:!0,children:e.jsxs(A,{href:route("invoice.show",{payment:s.original.id}),children:[e.jsx(J,{className:"w-4 h-4 mr-2"})," View Invoice"]})}),e.jsxs(u,{onClick:t=>{t.preventDefault();const h=route("invoice.download",{payment:s.original.id});window.open(h,"_blank")},children:[e.jsx(U,{className:"w-4 h-4 mr-2"})," Download Invoice"]})]})]})}];return e.jsxs(F,{header:"My Payments",children:[e.jsx(R,{title:"My Payments"}),e.jsxs("div",{className:"container mx-auto py-10 space-y-6",children:[e.jsxs(a,{children:[e.jsx(l,{children:e.jsx(r,{children:"Filters"})}),e.jsx(i,{children:e.jsxs("div",{className:"flex items-end gap-4 flex-wrap",children:[e.jsxs("div",{className:"flex flex-col w-[180px]",children:[e.jsx(E,{className:"text-sm mb-1",children:"Year"}),e.jsxs(L,{onValueChange:S,value:M.toString(),children:[e.jsx(C,{children:e.jsx(H,{placeholder:"Select a year"})}),e.jsx(V,{children:q.map(s=>e.jsx($,{value:s.toString(),children:s},s))})]})]}),e.jsx("div",{className:"flex items-end",children:e.jsx(y,{onClick:Y,children:"Reset Filters"})})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs(a,{children:[e.jsxs(l,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(r,{className:"text-sm font-medium",children:"Total Payments"}),e.jsx(N,{className:"h-6 w-6 text-primary"})]}),e.jsx(i,{children:e.jsx("div",{className:"text-2xl font-bold",children:m||0})})]}),e.jsxs(a,{children:[e.jsxs(l,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(r,{className:"text-sm font-medium",children:"Paid"}),e.jsx(T,{className:"h-6 w-6 text-green-600"})]}),e.jsx(i,{children:e.jsx("div",{className:"text-2xl font-bold text-green-600",children:w||0})})]}),e.jsxs(a,{children:[e.jsxs(l,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(r,{className:"text-sm font-medium",children:"Pending"}),e.jsx(O,{className:"h-6 w-6 text-yellow-500"})]}),e.jsx(i,{children:e.jsx("div",{className:"text-2xl font-bold text-yellow-500",children:b||0})})]}),e.jsxs(a,{children:[e.jsxs(l,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(r,{className:"text-sm font-medium",children:"Unpaid"}),e.jsx(W,{className:"h-6 w-6 text-red-600"})]}),e.jsx(i,{children:e.jsx("div",{className:"text-2xl font-bold text-red-600",children:v||0})})]}),e.jsxs(a,{className:"col-span-1 sm:col-span-2 lg:col-span-4",children:[e.jsxs(l,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(r,{className:"text-sm font-medium",children:"Total Revenue"}),e.jsx(N,{className:"h-6 w-6 text-primary"})]}),e.jsx(i,{children:e.jsxs("div",{className:"space-y-1 w-full",children:[e.jsxs("div",{className:"text-lg font-bold",children:[o==="MYR"?"RM":o," ",j((n==null?void 0:n[o||"MYR"])||0,o||"MYR")]}),n&&Object.keys(n).length>1&&e.jsx("div",{className:"text-xs text-muted-foreground space-y-1",children:Object.entries(n).filter(([s])=>s!==o).map(([s,t])=>e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{children:[s,":"]}),e.jsx("span",{children:j(t,s)})]},s))})]})})]})]}),e.jsxs(a,{children:[e.jsx(l,{children:e.jsx(r,{children:"My Payments"})}),e.jsx(i,{children:e.jsx(K,{data:c,columns:D})})]})]})]})}export{be as default};
