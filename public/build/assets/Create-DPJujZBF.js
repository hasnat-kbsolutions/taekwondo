import{W as N,r as d,a as C,j as e,Y as v}from"./app-CC7qpNu6.js";import{A as S,C as y,t as m}from"./authenticated-layout-Bd5hei_t.js";import{B as x}from"./button-Dawy7JlE.js";import{L as p}from"./label-DaD98WMX.js";import{C as w,a as A,b as P,c as D}from"./card-CUFGxmYR.js";import{S as F,a as E,b as T,c as _,d as k,e as L}from"./select-n3OOaBTe.js";import{C as R}from"./calendar-CuXE0pNT.js";import{P as $,a as z,b as B}from"./popover-BCwEgVmg.js";import{f as I}from"./format-LUeNQFBy.js";import"./input-B5ij4QCV.js";import"./separator-BtGUCeNx.js";import"./index-AMtJWCSb.js";import"./sun-Cdo4h1aO.js";import"./users-DF6lFF4e.js";import"./log-out-tpPZZpB-.js";import"./index-BCDJZF4r.js";import"./index-BReCHXkN.js";import"./chevron-down--P3qsrMs.js";function re({clubs:h}){const{data:a,setData:i,post:u,processing:j}=N({date:"",attendances:{}}),[c,b]=d.useState([]),[r,f]=d.useState({club_id:""});d.useEffect(()=>{r.club_id&&C.get(route("organization.students.filter"),{params:r}).then(t=>b(t.data))},[r]);const o=(t,s,n)=>{i("attendances",{...a.attendances,[t]:{...a.attendances[t],[s]:n}})},g=t=>{t.preventDefault(),u(route("organization.attendances.store"),{onSuccess:()=>{m.success("Attendance submitted successfully!")},onError:s=>{m.error("Failed to submit attendance."),console.error(s)}})};return e.jsxs(S,{header:"Record Attendance",children:[e.jsx(v,{title:"Record Attendance"}),e.jsx("div",{className:"container mx-auto py-10",children:e.jsxs(w,{children:[e.jsx(A,{children:e.jsx(P,{children:"New Attendance"})}),e.jsx(D,{children:e.jsxs("form",{onSubmit:g,className:"flex flex-wrap",children:[e.jsxs("div",{className:"w-[50%] px-2",children:[e.jsx(p,{htmlFor:"date",children:"Date"}),e.jsxs($,{children:[e.jsx(z,{asChild:!0,children:e.jsxs(x,{variant:"outline","data-empty":!a.date,className:"data-[empty=true]:text-muted-foreground w-full justify-start text-left font-normal",children:[e.jsx(y,{className:"mr-2 h-4 w-4"}),a.date?I(new Date(a.date),"PPP"):e.jsx("span",{children:"Pick a date"})]})}),e.jsx(B,{className:"w-auto p-0",children:e.jsx(R,{mode:"single",selected:a.date?new Date(a.date):void 0,onSelect:t=>i("date",t?t.toISOString().split("T")[0]:""),initialFocus:!0})})]})]}),e.jsxs("div",{className:"w-[50%] px-2",children:[e.jsx(p,{htmlFor:"club",children:"Club"}),e.jsxs(F,{value:r.club_id,onValueChange:t=>f({...r,club_id:t}),children:[e.jsx(E,{className:"w-full p-2 border rounded-lg",children:e.jsx(T,{placeholder:"Select Club"})}),e.jsx(_,{children:e.jsx(k,{children:h.map(t=>e.jsx(L,{value:String(t.id),children:t.name},t.id))})})]})]}),c.length>0&&e.jsx("div",{className:"w-full mt-4 overflow-x-auto",children:e.jsxs("table",{className:"w-full table-auto border border-gray-300",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left px-4 py-2 border-b",children:"Name"}),e.jsx("th",{className:"text-left px-4 py-2 border-b",children:"Attendance"})]})}),e.jsx("tbody",{children:c.map(t=>{var s,n;return e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-2 border-b",children:t.name}),e.jsx("td",{className:"px-4 py-2 border-b",children:e.jsxs("div",{className:"flex gap-6",children:[e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"radio",name:`attendance-${t.id}`,value:"present",checked:((s=a.attendances[t.id])==null?void 0:s.status)==="present",onChange:l=>o(t.id,"status",l.target.value)}),e.jsx("span",{children:"Present"})]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"radio",name:`attendance-${t.id}`,value:"absent",checked:((n=a.attendances[t.id])==null?void 0:n.status)==="absent",onChange:l=>o(t.id,"status",l.target.value)}),e.jsx("span",{children:"Absent"})]})]})})]},t.id)})})]})}),e.jsx("div",{className:"w-[100%] px-2 mt-4",children:e.jsx(x,{type:"submit",disabled:j,children:"Submit Attendance"})})]})})]})})]})}export{re as default};
